{"version":3,"sources":["webpack:///./src/views/service/index.vue?652c","webpack:///./src/api/index.js","webpack:///./src/views/service/index.vue?4ed8","webpack:///./src/views/service/index.vue?d91e","webpack:///src/views/service/index.vue","webpack:///./src/views/service/index.vue?be7e","webpack:///./src/views/service/index.vue"],"names":["api","serviceList","creatService","editService","service_id","delService","routersList","creatRouter","updateRouter","routerid","publishRouter","env","pluginList","saveServicePlugin","delServicePlugin","key","saveRouterPlugin","delRouterPlugin","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","editId","drawer","title","_v","scopedSlots","_u","fn","scope","row","staticStyle","showServicePlugins","_e","goDetail","_s","name","model","value","delPop","$index","callback","$$v","$set","expression","cancel","slot","direction","domProps","ref","rules","form","activeEnv","upstreams","dev","type","_l","node","index","_n","addNode","nodes","length","delNode","beta","prod","saveService","pluginDrawer","showAddPlugins","addPlugin","pluginText","pluginRules","pluginForm","item","minimum","config","op","savePlugin","cancelPlugin","curPluginsList","props","plu","pluIndex","directives","rawName","editPlugin","delPlugin","allPluginList","desc","getPluginParam","staticRenderFns","data","pluginsList","serviceListIds","curServiceId","prefix","host","pluginParam","conn","burst","default_conn_delay","created","getServiceList","methods","$http","get","res","status","forEach","el","list","push","listIds","split","pop","put","message","post","delete","port","ip","weight","$delete","$router","query","id","tab","plugins","i","component"],"mappings":"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","file":"js/chunk-38b0221a.a3f8d98a.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=41a6187f&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=41a6187f&lang=scss&scoped=true&\"","let api = {\n    // 服务列表\n    serviceList: '/apioak/admin/services',\n    // 创建服务\n    creatService: '/apioak/admin/service',\n    // 更新服务（编辑）\n    editService: (service_id) => `/apioak/admin/service/${service_id}`,\n    // 删除服务\n    delService: (service_id) => `/apioak/admin/service/${service_id}`,\n    // 路由列表\n    routersList: '/apioak/admin/routers',\n    // 创建路由\n    creatRouter: 'apioak/admin/router',\n    // 更新路由\n    updateRouter: (routerid) => `apioak/admin/router/${routerid}`,\n    // 发布路由\n    publishRouter: (routerid, env) => `apioak/admin/router/${routerid}/env/${env}`,\n    // 获取插件列表\n    pluginList: 'apioak/admin/plugins',\n    // 服务插件保存\n    saveServicePlugin: (service_id) => `/apioak/admin/service/${service_id}/plugin`,\n    // 服务插件删除\n    delServicePlugin: (service_id, key) => `/apioak/admin/service/${service_id}/plugin/${key}`,\n    // 路由插件保存\n    saveRouterPlugin: (routerid) => `/apioak/admin/router/${routerid}/plugin`,\n    // 路由插件删除\n    delRouterPlugin: (routerid, key) => `/apioak/admin/router/${routerid}/plugin/${key}`\n}\nexport default api\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"service\"},[_c('view-header',{attrs:{\"name\":\"服务\"}}),_c('div',{staticClass:\"service-list\"},[_c('el-button',{staticClass:\"service-add fl\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.editId = 0,_vm.drawer = true , _vm.title = '添加服务'}}},[_vm._v(\"新建服务\")]),_c('el-table',{staticClass:\"service-table\",attrs:{\"data\":_vm.serviceList}},[_c('el-table-column',{attrs:{\"width\":\"40px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.plugins)?_c('div',[_c('img',{staticStyle:{\"width\":\"24px\",\"cursor\":\"pointer\",\"vertical-align\":\"middle\"},attrs:{\"src\":require(\"../../assets/apex_plugin.png\"),\"alt\":\"plugin\"},on:{\"click\":function($event){return _vm.showServicePlugins(scope)}}})]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"label\":\"服务名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-link',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.goDetail(scope)}}},[_vm._v(_vm._s(scope.row.name))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"服务前缀\",\"prop\":\"prefix\"}}),_c('el-table-column',{attrs:{\"label\":\"备注\",\"prop\":\"desc\"}}),_c('el-table-column',{attrs:{\"label\":\"活动状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"margin-right\":\"12px\"},attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"small\"},on:{\"click\":function($event){_vm.editService(scope),_vm.drawer = true , _vm.title = '编辑服务'}}},[_vm._v(\"编辑\")]),_c('el-popover',{attrs:{\"width\":\"160\",\"placement\":\"bottom\"},model:{value:(_vm.delPop[scope.$index]),callback:function ($$v) {_vm.$set(_vm.delPop, scope.$index, $$v)},expression:\"delPop[scope.$index]\"}},[_c('p',[_vm._v(\"确认删除该服务吗？\")]),_c('div',{staticStyle:{\"text-align\":\"right\",\"margin\":\"0\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.cancel(scope.$index)}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.delService(scope.$index)}}},[_vm._v(\"确定\")])],1),_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"danger\",\"plain\":\"\",\"size\":\"small\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)]}}])})],1)],1),_c('el-drawer',{staticClass:\"service-drawer\",attrs:{\"title\":_vm.title,\"visible\":_vm.drawer,\"direction\":_vm.direction,\"with-header\":false,\"size\":\"50%\"},on:{\"update:visible\":function($event){_vm.drawer=$event}}},[_c('p',{staticClass:\"service-drawer_tit\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_c('i',{staticClass:\"el-icon-close fr\",on:{\"click\":function($event){_vm.drawer = false}}})]),_c('el-form',{ref:\"ruleForm\",staticClass:\"service-form\",attrs:{\"rules\":_vm.rules,\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"服务名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入服务名称\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"URL前缀\",\"prop\":\"prefix\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入服务前缀\"},model:{value:(_vm.form.prefix),callback:function ($$v) {_vm.$set(_vm.form, \"prefix\", $$v)},expression:\"form.prefix\"}})],1),_c('el-form-item',{attrs:{\"label\":\"备注\",\"prop\":\"desc\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.desc),callback:function ($$v) {_vm.$set(_vm.form, \"desc\", $$v)},expression:\"form.desc\"}})],1),_c('el-row',{attrs:{\"gutter\":24}},[_c('el-col',{staticStyle:{\"padding-top\":\"8px\",\"font-size\":\"16px\",\"color\":\"#606266\",\"padding-right\":\"0\"},attrs:{\"span\":4}},[_vm._v(\"upstreams\")]),_c('el-col',{staticStyle:{\"padding-left\":\"0\"},attrs:{\"span\":20}},[_c('el-tabs',{staticClass:\"service-tab\",model:{value:(_vm.activeEnv),callback:function ($$v) {_vm.activeEnv=$$v},expression:\"activeEnv\"}},[_c('el-tab-pane',{attrs:{\"label\":\"dev\",\"name\":\"dev\"}},[_c('el-form-item',{attrs:{\"label\":\"环境域名\",\"prop\":\"host\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.form.upstreams.dev.host),callback:function ($$v) {_vm.$set(_vm.form.upstreams.dev, \"host\", $$v)},expression:\"form.upstreams.dev.host\"}})],1),_c('el-form-item',{attrs:{\"label\":\"Type\",\"prop\":\"type\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.upstreams.dev.type),callback:function ($$v) {_vm.$set(_vm.form.upstreams.dev, \"type\", $$v)},expression:\"form.upstreams.dev.type\"}},[_c('el-option',{attrs:{\"label\":\"roundrobin\",\"value\":\"roundrobin\"}}),_c('el-option',{attrs:{\"label\":\"chash\",\"value\":\"chash\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"key\",\"prop\":\"key\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"disabled\":_vm.form.upstreams.dev.type == 'roundrobin',\"placeholder\":\"请输入内容\"}})],1),_c('el-form-item',{attrs:{\"inline\":true,\"label\":\"Node\",\"prop\":\"node\"}},_vm._l((_vm.form.upstreams.dev.nodes),function(node,index){return _c('div',{staticStyle:{\"margin-bottom\":\"12px\"}},[_c('el-input',{staticClass:\"node-item\",attrs:{\"type\":\"text\",\"placeholder\":\"IP\"},model:{value:(node.ip),callback:function ($$v) {_vm.$set(node, \"ip\", $$v)},expression:\"node.ip\"}}),_c('el-input',{staticClass:\"node-item\",attrs:{\"type\":\"text\",\"placeholder\":\"Port\"},model:{value:(node.port),callback:function ($$v) {_vm.$set(node, \"port\", _vm._n($$v))},expression:\"node.port\"}}),_c('el-input',{staticClass:\"node-item\",attrs:{\"type\":\"text\",\"placeholder\":\"Weights\"},model:{value:(node.weight),callback:function ($$v) {_vm.$set(node, \"weight\", _vm._n($$v))},expression:\"node.weight\"}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-circle-plus-outline\"},on:{\"click\":function($event){return _vm.addNode('dev')}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-remove-outline\",\"disabled\":_vm.form.upstreams.dev.nodes.length == 1},on:{\"click\":function($event){return _vm.delNode('dev',index)}}})],1)}),0)],1),_c('el-tab-pane',{attrs:{\"label\":\"beta\",\"name\":\"beta\"}},[_c('el-form-item',{attrs:{\"label\":\"环境域名\",\"prop\":\"host\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.form.upstreams.beta.host),callback:function ($$v) {_vm.$set(_vm.form.upstreams.beta, \"host\", $$v)},expression:\"form.upstreams.beta.host\"}})],1),_c('el-form-item',{attrs:{\"label\":\"Type\",\"prop\":\"type\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.upstreams.beta.type),callback:function ($$v) {_vm.$set(_vm.form.upstreams.beta, \"type\", $$v)},expression:\"form.upstreams.beta.type\"}},[_c('el-option',{attrs:{\"label\":\"roundrobin\",\"value\":\"roundrobin\"}}),_c('el-option',{attrs:{\"label\":\"chash\",\"value\":\"chash\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"key\",\"prop\":\"key\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"disabled\":_vm.form.upstreams.beta.type == 'roundrobin',\"placeholder\":\"请输入内容\"}})],1),_c('el-form-item',{attrs:{\"inline\":true,\"label\":\"Node\",\"prop\":\"node\"}},_vm._l((_vm.form.upstreams.beta.nodes),function(node,index){return _c('div',{staticStyle:{\"margin-bottom\":\"12px\"}},[_c('el-input',{staticClass:\"node-item\",attrs:{\"type\":\"text\",\"placeholder\":\"IP\"},model:{value:(node.ip),callback:function ($$v) {_vm.$set(node, \"ip\", $$v)},expression:\"node.ip\"}}),_c('el-input',{staticClass:\"node-item\",attrs:{\"type\":\"text\",\"placeholder\":\"Port\"},model:{value:(node.port),callback:function ($$v) {_vm.$set(node, \"port\", _vm._n($$v))},expression:\"node.port\"}}),_c('el-input',{staticClass:\"node-item\",attrs:{\"type\":\"text\",\"placeholder\":\"Weights\"},model:{value:(node.weight),callback:function ($$v) {_vm.$set(node, \"weight\", _vm._n($$v))},expression:\"node.weight\"}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-circle-plus-outline\"},on:{\"click\":function($event){return _vm.addNode('beta')}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-remove-outline\",\"disabled\":_vm.form.upstreams.dev.nodes.length == 1},on:{\"click\":function($event){return _vm.delNode('beta',index)}}})],1)}),0)],1),_c('el-tab-pane',{attrs:{\"label\":\"prod\",\"name\":\"prod\"}},[_c('el-form-item',{attrs:{\"label\":\"环境域名\",\"prop\":\"host\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.form.upstreams.prod.host),callback:function ($$v) {_vm.$set(_vm.form.upstreams.prod, \"host\", $$v)},expression:\"form.upstreams.prod.host\"}})],1),_c('el-form-item',{attrs:{\"label\":\"Type\",\"prop\":\"type\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.upstreams.prod.type),callback:function ($$v) {_vm.$set(_vm.form.upstreams.prod, \"type\", $$v)},expression:\"form.upstreams.prod.type\"}},[_c('el-option',{attrs:{\"label\":\"roundrobin\",\"value\":\"roundrobin\"}}),_c('el-option',{attrs:{\"label\":\"chash\",\"value\":\"chash\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"key\",\"prop\":\"key\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"disabled\":_vm.form.upstreams.prod.type == 'roundrobin',\"placeholder\":\"请输入内容\"}})],1),_c('el-form-item',{attrs:{\"inline\":true,\"label\":\"Node\",\"prop\":\"node\"}},_vm._l((_vm.form.upstreams.prod.nodes),function(node,index){return _c('div',{staticStyle:{\"margin-bottom\":\"12px\"}},[_c('el-input',{staticClass:\"node-item\",attrs:{\"type\":\"text\",\"placeholder\":\"IP\"},model:{value:(node.ip),callback:function ($$v) {_vm.$set(node, \"ip\", $$v)},expression:\"node.ip\"}}),_c('el-input',{staticClass:\"node-item\",attrs:{\"type\":\"text\",\"placeholder\":\"Port\"},model:{value:(node.port),callback:function ($$v) {_vm.$set(node, \"port\", _vm._n($$v))},expression:\"node.port\"}}),_c('el-input',{staticClass:\"node-item\",attrs:{\"type\":\"text\",\"placeholder\":\"Weights\"},model:{value:(node.weight),callback:function ($$v) {_vm.$set(node, \"weight\", _vm._n($$v))},expression:\"node.weight\"}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-circle-plus-outline\"},on:{\"click\":function($event){return _vm.addNode('prod')}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-remove-outline\",\"disabled\":_vm.form.upstreams.dev.nodes.length == 1},on:{\"click\":function($event){return _vm.delNode('prod',index)}}})],1)}),0)],1)],1)],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveService}},[_vm._v(\"保存\")]),_c('el-button',{on:{\"click\":function($event){_vm.drawer = false}}},[_vm._v(\"取消\")])],1)],1)],1),_c('el-drawer',{staticClass:\"service-drawer\",attrs:{\"title\":_vm.title,\"visible\":_vm.pluginDrawer,\"direction\":_vm.direction,\"with-header\":false,\"size\":\"50%\"},on:{\"update:visible\":function($event){_vm.pluginDrawer=$event}}},[_c('p',{staticClass:\"service-drawer_tit\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_c('i',{staticClass:\"el-icon-close fr\",on:{\"click\":function($event){_vm.pluginDrawer = false}}})]),(!_vm.showAddPlugins)?_c('el-button',{staticClass:\"fr\",staticStyle:{\"margin-right\":\"32px\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.addPlugin}},[_vm._v(\"添加\")]):_vm._e(),(_vm.showAddPlugins)?_c('div',{staticStyle:{\"background\":\"#fafafa\",\"padding\":\"12px\"}},[_c('h3',{staticStyle:{\"font-size\":\"16px\",\"font-weight\":\"bold\",\"margin-bottom\":\"20px\",\"margin-left\":\"12px\"}},[_vm._v(_vm._s(_vm.pluginText))]),_c('el-form',{ref:\"pluginForm\",attrs:{\"label-width\":\"160px\",\"rules\":_vm.pluginRules,\"size\":\"small\"},model:{value:(_vm.pluginForm),callback:function ($$v) {_vm.pluginForm=$$v},expression:\"pluginForm\"}},_vm._l((_vm.pluginParam),function(item,key){return _c('el-form-item',{key:key,attrs:{\"label\":key}},[(item.type == 'number')?_c('span',[_c('el-input-number',{attrs:{\"min\":item.minimum},model:{value:(_vm.pluginForm.config[key]),callback:function ($$v) {_vm.$set(_vm.pluginForm.config, key, $$v)},expression:\"pluginForm.config[key]\"}})],1):_vm._e(),(item.type == 'string')?_c('span',[_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.pluginForm.config[key]),callback:function ($$v) {_vm.$set(_vm.pluginForm.config, key, $$v)},expression:\"pluginForm.config[key]\"}})],1):_vm._e(),(item.type == 'array')?_c('span',[_c('el-select',{model:{value:(_vm.pluginForm.config[key]),callback:function ($$v) {_vm.$set(_vm.pluginForm.config, key, $$v)},expression:\"pluginForm.config[key]\"}},_vm._l((item.options),function(op,index){return _c('el-option',{key:(\"op\" + index),attrs:{\"label\":op,\"value\":op}})}),1)],1):_vm._e()])}),1),_c('div',{staticStyle:{\"margin-left\":\"160px\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.savePlugin('pluginForm')}}},[_vm._v(\"提交\")]),_c('el-button',{attrs:{\"plain\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.cancelPlugin('pluginForm')}}},[_vm._v(\"取消\")])],1)],1):_vm._e(),_c('div',{staticStyle:{\"padding\":\"0 32px\",\"margin-top\":\"24px\"}},[_c('el-table',{attrs:{\"data\":_vm.curPluginsList}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-form',{staticClass:\"table-expand\",attrs:{\"label-position\":\"left\",\"size\":\"small\"}},_vm._l((props.row),function(plu,pluIndex){return _c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(pluIndex !='name' && pluIndex != 'desc'),expression:\"pluIndex !='name' && pluIndex != 'desc'\"}],key:(\"serviceplugin\" + pluIndex),attrs:{\"label\":pluIndex}},[_c('span',[_vm._v(_vm._s(plu))])])}),1)]}}])}),_c('el-table-column',{attrs:{\"label\":\"配置名称\",\"prop\":\"name\",\"width\":\"120px\"}}),_c('el-table-column',{attrs:{\"label\":\"描述\",\"prop\":\"desc\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"160px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.editPlugin(scope)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.delPlugin(scope)}}},[_vm._v(\"删除\")])]}}])})],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"插件列表\",\"visible\":_vm.allPluginList},on:{\"update:visible\":function($event){_vm.allPluginList=$event}}},[_c('el-row',{attrs:{\"gutter\":20}},_vm._l((_vm.pluginsList),function(item,index){return _c('el-col',{key:(\"plu\" + index),staticStyle:{\"margin-bottom\":\"20px\"},attrs:{\"span\":8}},[_c('el-card',{staticClass:\"plugin-card\",attrs:{\"shadow\":\"hover\"}},[_c('h3',[_vm._v(_vm._s(item.name))]),_c('p',[_vm._v(_vm._s(item.desc))]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.getPluginParam(item)}}},[_vm._v(\"添加\")])],1)],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"service\">\n    <view-header name=\"服务\"></view-header>\n    <div class=\"service-list\">\n      <el-button\n        class=\"service-add fl\"\n        type=\"primary\"\n        @click=\"editId = 0,drawer = true , title = '添加服务'\"\n      >新建服务</el-button>\n      <el-table class=\"service-table\" :data=\"serviceList\">\n        <el-table-column width=\"40px\">\n          <template slot-scope=\"scope\">\n            <div v-if=\"scope.row.plugins\">\n              <img\n                @click=\"showServicePlugins(scope)\"\n                style=\"width:24px;cursor:pointer;vertical-align: middle;\"\n                src=\"../../assets/apex_plugin.png\"\n                alt=\"plugin\"\n              />\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"服务名称\">\n          <template slot-scope=\"scope\">\n            <el-link type=\"primary\" @click=\"goDetail(scope)\">{{scope.row.name}}</el-link>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"服务前缀\" prop=\"prefix\"></el-table-column>\n        <el-table-column label=\"备注\" prop=\"desc\"></el-table-column>\n        <el-table-column label=\"活动状态\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"primary\"\n              plain\n              size=\"small\"\n              style=\"margin-right:12px;\"\n              @click=\"editService(scope),drawer = true , title = '编辑服务'\"\n            >编辑</el-button>\n            <el-popover width=\"160\" placement=\"bottom\" v-model=\"delPop[scope.$index]\">\n              <p>确认删除该服务吗？</p>\n              <div style=\"text-align: right; margin: 0\">\n                <el-button size=\"mini\" type=\"text\" @click=\"cancel(scope.$index)\">取消</el-button>\n                <el-button type=\"primary\" size=\"mini\" @click=\"delService(scope.$index)\">确定</el-button>\n              </div>\n              <el-button slot=\"reference\" type=\"danger\" plain size=\"small\">删除</el-button>\n            </el-popover>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <el-drawer\n      class=\"service-drawer\"\n      :title=\"title\"\n      :visible.sync=\"drawer\"\n      :direction=\"direction\"\n      :with-header=\"false\"\n      size=\"50%\"\n    >\n      <p class=\"service-drawer_tit\">\n        <span v-html=\"title\"></span>\n        <i class=\"el-icon-close fr\" @click=\"drawer = false\"></i>\n      </p>\n      <el-form class=\"service-form\" :rules=\"rules\" ref=\"ruleForm\" :model=\"form\" label-width=\"80px\">\n        <el-form-item label=\"服务名称\" prop=\"name\">\n          <el-input placeholder=\"请输入服务名称\" v-model=\"form.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"URL前缀\" prop=\"prefix\">\n          <el-input placeholder=\"请输入服务前缀\" v-model=\"form.prefix\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"备注\" prop=\"desc\">\n          <el-input type=\"textarea\" v-model=\"form.desc\"></el-input>\n        </el-form-item>\n        <el-row :gutter=\"24\">\n          <el-col\n            :span=\"4\"\n            style=\"padding-top:8px;font-size:16px;color:#606266;padding-right:0;\"\n          >upstreams</el-col>\n          <el-col :span=\"20\" style=\"padding-left:0;\">\n            <el-tabs class=\"service-tab\" v-model=\"activeEnv\">\n              <el-tab-pane label=\"dev\" name=\"dev\">\n                <el-form-item label=\"环境域名\" prop=\"host\">\n                  <el-input v-model=\"form.upstreams.dev.host\" placeholder=\"请输入内容\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"Type\" prop=\"type\">\n                  <el-select v-model=\"form.upstreams.dev.type\" placeholder=\"请选择\">\n                    <el-option label=\"roundrobin\" value=\"roundrobin\"></el-option>\n                    <el-option label=\"chash\" value=\"chash\"></el-option>\n                  </el-select>\n                </el-form-item>\n                <el-form-item label=\"key\" prop=\"key\">\n                  <el-input\n                    type=\"text\"\n                    :disabled=\"form.upstreams.dev.type == 'roundrobin'\"\n                    placeholder=\"请输入内容\"\n                  ></el-input>\n                </el-form-item>\n                <el-form-item :inline=\"true\" label=\"Node\" prop=\"node\">\n                  <div v-for=\"(node,index) in form.upstreams.dev.nodes\" style=\"margin-bottom:12px\">\n                    <el-input type=\"text\" placeholder=\"IP\" class=\"node-item\" v-model=\"node.ip\"></el-input>\n                    <el-input\n                      type=\"text\"\n                      placeholder=\"Port\"\n                      class=\"node-item\"\n                      v-model.number=\"node.port\"\n                    ></el-input>\n                    <el-input\n                      type=\"text\"\n                      placeholder=\"Weights\"\n                      class=\"node-item\"\n                      v-model.number=\"node.weight\"\n                    ></el-input>\n                    <el-button\n                      type=\"primary\"\n                      icon=\"el-icon-circle-plus-outline\"\n                      @click=\"addNode('dev')\"\n                    ></el-button>\n                    <el-button\n                      type=\"danger\"\n                      icon=\"el-icon-remove-outline\"\n                      :disabled=\"form.upstreams.dev.nodes.length == 1\"\n                      @click=\"delNode('dev',index)\"\n                    ></el-button>\n                  </div>\n                </el-form-item>\n              </el-tab-pane>\n              <el-tab-pane label=\"beta\" name=\"beta\">\n                <el-form-item label=\"环境域名\" prop=\"host\">\n                  <el-input v-model=\"form.upstreams.beta.host\" placeholder=\"请输入内容\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"Type\" prop=\"type\">\n                  <el-select v-model=\"form.upstreams.beta.type\" placeholder=\"请选择\">\n                    <el-option label=\"roundrobin\" value=\"roundrobin\"></el-option>\n                    <el-option label=\"chash\" value=\"chash\"></el-option>\n                  </el-select>\n                </el-form-item>\n                <el-form-item label=\"key\" prop=\"key\">\n                  <el-input\n                    type=\"text\"\n                    :disabled=\"form.upstreams.beta.type == 'roundrobin'\"\n                    placeholder=\"请输入内容\"\n                  ></el-input>\n                </el-form-item>\n                <el-form-item :inline=\"true\" label=\"Node\" prop=\"node\">\n                  <div v-for=\"(node,index) in form.upstreams.beta.nodes\" style=\"margin-bottom:12px\">\n                    <el-input type=\"text\" placeholder=\"IP\" class=\"node-item\" v-model=\"node.ip\"></el-input>\n                    <el-input\n                      type=\"text\"\n                      placeholder=\"Port\"\n                      class=\"node-item\"\n                      v-model.number=\"node.port\"\n                    ></el-input>\n                    <el-input\n                      type=\"text\"\n                      placeholder=\"Weights\"\n                      class=\"node-item\"\n                      v-model.number=\"node.weight\"\n                    ></el-input>\n                    <el-button\n                      type=\"primary\"\n                      icon=\"el-icon-circle-plus-outline\"\n                      @click=\"addNode('beta')\"\n                    ></el-button>\n                    <el-button\n                      type=\"danger\"\n                      icon=\"el-icon-remove-outline\"\n                      :disabled=\"form.upstreams.dev.nodes.length == 1\"\n                      @click=\"delNode('beta',index)\"\n                    ></el-button>\n                  </div>\n                </el-form-item>\n              </el-tab-pane>\n              <el-tab-pane label=\"prod\" name=\"prod\">\n                <el-form-item label=\"环境域名\" prop=\"host\">\n                  <el-input v-model=\"form.upstreams.prod.host\" placeholder=\"请输入内容\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"Type\" prop=\"type\">\n                  <el-select v-model=\"form.upstreams.prod.type\" placeholder=\"请选择\">\n                    <el-option label=\"roundrobin\" value=\"roundrobin\"></el-option>\n                    <el-option label=\"chash\" value=\"chash\"></el-option>\n                  </el-select>\n                </el-form-item>\n                <el-form-item label=\"key\" prop=\"key\">\n                  <el-input\n                    type=\"text\"\n                    :disabled=\"form.upstreams.prod.type == 'roundrobin'\"\n                    placeholder=\"请输入内容\"\n                  ></el-input>\n                </el-form-item>\n                <el-form-item :inline=\"true\" label=\"Node\" prop=\"node\">\n                  <div v-for=\"(node,index) in form.upstreams.prod.nodes\" style=\"margin-bottom:12px\">\n                    <el-input type=\"text\" placeholder=\"IP\" class=\"node-item\" v-model=\"node.ip\"></el-input>\n                    <el-input\n                      type=\"text\"\n                      placeholder=\"Port\"\n                      class=\"node-item\"\n                      v-model.number=\"node.port\"\n                    ></el-input>\n                    <el-input\n                      type=\"text\"\n                      placeholder=\"Weights\"\n                      class=\"node-item\"\n                      v-model.number=\"node.weight\"\n                    ></el-input>\n                    <el-button\n                      type=\"primary\"\n                      icon=\"el-icon-circle-plus-outline\"\n                      @click=\"addNode('prod')\"\n                    ></el-button>\n                    <el-button\n                      type=\"danger\"\n                      icon=\"el-icon-remove-outline\"\n                      :disabled=\"form.upstreams.dev.nodes.length == 1\"\n                      @click=\"delNode('prod',index)\"\n                    ></el-button>\n                  </div>\n                </el-form-item>\n              </el-tab-pane>\n            </el-tabs>\n          </el-col>\n        </el-row>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"saveService\">保存</el-button>\n          <el-button @click=\"drawer = false\">取消</el-button>\n        </el-form-item>\n      </el-form>\n    </el-drawer>\n    <el-drawer\n      class=\"service-drawer\"\n      :title=\"title\"\n      :visible.sync=\"pluginDrawer\"\n      :direction=\"direction\"\n      :with-header=\"false\"\n      size=\"50%\"\n    >\n      <p class=\"service-drawer_tit\">\n        <span v-html=\"title\"></span>\n        <i class=\"el-icon-close fr\" @click=\"pluginDrawer = false\"></i>\n      </p>\n      <el-button\n        type=\"primary\"\n        size=\"small\"\n        v-if=\"!showAddPlugins\"\n        style=\"margin-right:32px;\"\n        class=\"fr\"\n        @click=\"addPlugin\"\n      >添加</el-button>\n      <div style=\"background:#fafafa;padding:12px;\" v-if=\"showAddPlugins\">\n        <h3\n          style=\"font-size:16px;font-weight:bold;margin-bottom:20px;margin-left:12px;\"\n        >{{ pluginText }}</h3>\n        <el-form\n          label-width=\"160px\"\n          ref=\"pluginForm\"\n          v-model=\"pluginForm\"\n          :rules=\"pluginRules\"\n          size=\"small\"\n        >\n          <el-form-item v-for=\"(item,key) in pluginParam\" :key=\"key\" :label=\"key\">\n            <span v-if=\"item.type == 'number'\">\n              <el-input-number v-model=\"pluginForm.config[key]\" :min=\"item.minimum\"></el-input-number>\n            </span>\n            <span v-if=\"item.type == 'string'\">\n              <el-input type=\"text\" v-model=\"pluginForm.config[key]\"></el-input>\n            </span>\n            <span v-if=\"item.type == 'array'\">\n              <el-select v-model=\"pluginForm.config[key]\">\n                <el-option\n                  v-for=\"(op,index) in item.options\"\n                  :key=\"`op${index}`\"\n                  :label=\"op\"\n                  :value=\"op\"\n                ></el-option>\n              </el-select>\n            </span>\n          </el-form-item>\n        </el-form>\n        <div style=\"margin-left:160px;\">\n          <el-button type=\"primary\" plain size=\"small\" @click=\"savePlugin('pluginForm')\">提交</el-button>\n          <el-button plain size=\"small\" @click=\"cancelPlugin('pluginForm')\">取消</el-button>\n        </div>\n      </div>\n      <div style=\"padding:0 32px;margin-top:24px;\">\n        <el-table :data=\"curPluginsList\">\n          <el-table-column type=\"expand\">\n            <template slot-scope=\"props\">\n              <el-form label-position=\"left\" class=\"table-expand\" size=\"small\">\n                <el-form-item v-for=\"(plu,pluIndex) in props.row\" :key=\"`serviceplugin${pluIndex}`\" :label=\"pluIndex\" v-show=\"pluIndex !='name' && pluIndex != 'desc'\">\n                  <span>{{ plu }}</span>\n                </el-form-item>\n              </el-form>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"配置名称\" prop=\"name\" width=\"120px\"></el-table-column>\n          <el-table-column label=\"描述\" prop=\"desc\"></el-table-column>\n          <el-table-column label=\"操作\" width=\"160px\">\n            <template slot-scope=\"scope\">\n              <el-button type=\"primary\" size=\"mini\" plain @click=\"editPlugin(scope)\">编辑</el-button>\n              <el-button type=\"danger\" size=\"mini\" plain @click=\"delPlugin(scope)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n    </el-drawer>\n    <el-dialog title=\"插件列表\" :visible.sync=\"allPluginList\">\n      <el-row :gutter=\"20\">\n        <el-col\n          v-for=\"(item,index) in pluginsList\"\n          :key=\"`plu${index}`\"\n          :span=\"8\"\n          style=\"margin-bottom:20px\"\n        >\n          <el-card shadow=\"hover\" class=\"plugin-card\">\n            <h3>{{ item.name }}</h3>\n            <p>{{ item.desc }}</p>\n            <el-button type=\"primary\" size=\"small\" @click=\"getPluginParam(item)\">添加</el-button>\n          </el-card>\n        </el-col>\n      </el-row>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport api from \"@/api\";\nexport default {\n  name: \"Service\",\n  data() {\n    return {\n      direction: \"rtl\",\n      drawer: false,\n      pluginDrawer: false,\n      allPluginList: false,\n      pluginsList: [], // 所有插件列表\n      pluginText: \"\",\n      title: \"添加服务\",\n      activeEnv: \"dev\", // tab默认选中\n      serviceList: [],\n      serviceListIds: [],\n      delPop: [],\n      curPluginsList: [],\n      editId: 0, // 当前编辑id\n      curServiceId: \"\", // 当前服务id\n      showAddPlugins: false,\n      form: {\n        name: \"\",\n        prefix: \"\",\n        desc: \"\",\n        upstreams: {\n          prod: {\n            host: \"\",\n            type: \"\",\n            nodes: [\n              {\n                port: \"\",\n                ip: \"\",\n                weight: \"\"\n              }\n            ]\n          },\n          dev: {\n            host: \"\",\n            type: \"\",\n            nodes: [\n              {\n                port: \"\",\n                ip: \"\",\n                weight: \"\"\n              }\n            ]\n          },\n          beta: {\n            host: \"\",\n            type: \"\",\n            nodes: [\n              {\n                port: \"\",\n                ip: \"\",\n                weight: \"\"\n              }\n            ]\n          }\n        }\n      },\n      pluginForm: {},\n      pluginParam: {},\n      rules: {\n        name: [{ required: true, message: \"请输入服务名称\", trigger: \"blur\" }],\n        prefix: [{ required: true, message: \"请输入前缀\", trigger: \"blur\" }],\n        host: [{ required: true, message: \"请输入host\", trigger: \"blur\" }],\n        type: [{ required: true, message: \"请输入type\", trigger: \"blur\" }]\n      },\n      pluginRules: {\n        conn: [{ required: true, message: \"必填\", trigger: \"blur\" }],\n        burst: [{ required: true, message: \"必填\", trigger: \"blur\" }],\n        key: [{ required: true, message: \"必填\", trigger: \"blur\" }],\n        default_conn_delay: [\n          { required: true, message: \"必填\", trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  created() {\n    this.getServiceList();\n  },\n  methods: {\n    /**\n     *  获取服务列表\n     */\n    getServiceList() {\n      this.$http.get(api.serviceList).then(res => {\n        if (res.status == 200) {\n          let list = []; // 存放服务列表\n          let listIds = []; // 存放服务id\n          let pop = [];\n          res.data.nodes.forEach(el => {\n            if (el.value) {\n              list.push(el.value);\n              listIds.push(el.key.split(\"/\")[3]);\n              pop.push(false);\n            }\n          });\n          this.serviceList = list;\n          this.serviceListIds = listIds;\n          this.delPop = pop;\n        }\n      });\n    },\n    /**\n     *  保存&编辑服务\n     */\n    saveService() {\n      if (this.editId) {\n        // 有id为更新（修改）\n        this.$http.put(api.editService(this.editId), this.form).then(res => {\n          if (res.status == 200) {\n            this.$message({\n              type: \"sucess\",\n              message: \"编辑成功\"\n            });\n            this.getServiceList();\n          }\n        });\n      } else {\n        // 无id为新建\n        this.$http.post(api.creatService, this.form).then(res => {\n          if (res.status == 201 || res.status == 200) {\n            this.$message({\n              type: \"sucess\",\n              message: \"创建成功\"\n            });\n            this.getServiceList();\n          }\n        });\n      }\n    },\n    /**\n     *  编辑服务\n     * @param scope {Object} 当前编辑数据\n     */\n    editService(scope) {\n      this.form = scope.row; // 给表单赋值\n      this.editId = this.serviceListIds[scope.$index]; // 获取当前编辑的id\n    },\n    /**\n     *  删除服务\n     */\n    delService(index) {\n      this.editId = this.serviceListIds[index]; // 获取当前编辑的id\n      this.$http.delete(api.delService(this.editId)).then(res => {\n        if (res.status == 200) {\n          this.$message({\n            type: \"success\",\n            message: \"删除成功\"\n          });\n        }\n        this.getServiceList();\n      });\n    },\n    /**\n     *  添加node\n     * @param type {String} 环境\n     */\n    addNode(type) {\n      this.upstreams[`${type}`][\"nodes\"].push({\n        port: \"\",\n        ip: \"\",\n        weight: \"\"\n      });\n    },\n    /**\n     *  删除node\n     */\n    delNode(type, index) {\n      this.$delete(this.upstreams[`${type}`][\"nodes\"], index);\n    },\n    /**\n     *  取消确认弹层\n     */\n    cancel(index) {\n      this.$set(this.delPop, index, false);\n    },\n    /**\n     * 跳转api详情\n     */\n    goDetail(scope) {\n      this.$router.push({\n        name: \"serviceDetail\",\n        query: {\n          id: this.serviceListIds[scope.$index],\n          name:scope.row.name,\n          tab: \"api\"\n        }\n      });\n    },\n    /**\n     * 查看服务插件\n     */\n    showServicePlugins(scope) {\n      this.curPluginsList = [];\n      this.pluginDrawer = true;\n      this.curServiceId = this.serviceListIds[scope.$index];\n      for (let i in scope.row.plugins) {\n        scope.row.plugins[i][\"name\"] = i;\n        this.curPluginsList.push(scope.row.plugins[i]);\n      }\n      this.title = `${scope.row.name} 插件列表`;\n    },\n    async addPlugin() {\n      this.allPluginList = true;\n      const { status, data } = await this.$http.get(api.pluginList);\n      if (status == 200) {\n        this.pluginsList = data;\n      }\n    },\n    /**\n     * 获取plugin 参数\n     */\n    async getPluginParam(scope) {\n      this.pluginForm.key = scope.key;\n      this.showAddPlugins = true;\n      this.pluginText = `添加 ${scope.key} 插件`;\n      this.allPluginList = false;\n      this.pluginParam = scope.parameter; // 插件参数\n      let obj = {};\n      for (let i in scope.parameter) {\n        obj[i] = scope.parameter[i][\"default\"];\n        obj[\"desc\"] = scope.desc;\n      }\n      this.$set(this.pluginForm, \"config\", obj);\n      this.$set(this.pluginForm, \"key\", scope.key);\n    },\n    /**\n     * 编辑plugin\n     */\n    async editPlugin(scope) {\n      // 获取list\n      let rowData = scope.row;\n      const { status, data } = await this.$http.get(api.pluginList);\n      if (status == 200) {\n        this.showAddPlugins = true;\n        this.pluginText = `编辑 ${scope.row.name} 插件`;\n        console.log(data);\n        data.forEach((el, index) => {\n          if (el.key == scope.row.name) {\n            this.pluginParam = el.parameter; // 插件参数\n          }\n        });\n        let obj = {};\n        for (let i in scope.row) {\n          if (i != \"name\") {\n            obj[i] = scope.row[i];\n          }\n        }\n        this.$set(this.pluginForm, \"key\", scope.row.name);\n        this.$set(this.pluginForm, \"config\", obj);\n      }\n    },\n    /**\n     * 取消保存\n     */\n    cancelPlugin(scope) {\n      this.showAddPlugins = false;\n    },\n    /**\n     * 保存服务插件\n     */\n    async savePlugin(scope) {\n      const { status, data } = await this.$http.post(\n        api.saveServicePlugin(this.curServiceId),\n        this.pluginForm\n      );\n      if (status == 200) {\n        this.curPluginsList = [];\n        for (let i in data.value.plugins) {\n          data.value.plugins[i][\"name\"] = i;\n          this.curPluginsList.push(data.value.plugins[i]);\n        }\n        this.showAddPlugins = false;\n        this.pluginForm = {};\n      }\n    },\n    /**\n     * 删除服务插件\n     */\n    async delPlugin(scope) {\n      this.$confirm(\"此操作将永久删除, 是否继续?\", \"警告\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(async () => {\n          const { status, data } = await this.$http.delete(\n            api.delServicePlugin(this.curServiceId, scope.row.name)\n          );\n          if (status == 200) {\n            this.$message({\n              type: \"success\",\n              message: `${scope.row.name}插件删除成功`\n            });\n            this.$delete(this.curPluginsList, scope.$index);\n          }\n        })\n        .catch(() => {});\n    }\n  }\n};\n</script>\n<style lang=\"css\">\n.el-drawer__body {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.table-expand {\n  font-size: 0;\n}\n.table-expand label {\n  width: 160px;\n  color: #99a9bf;\n  text-align: right !important;\n}\n.table-expand .el-form-item {\n  margin-right: 0;\n  margin-bottom: 0;\n  width: 100%;\n}\n.table-expand .el-form-item__content {\n  padding-left: 160px;\n}\n</style>\n<style lang=\"scss\" scoped>\n.service {\n  &-add {\n    margin-bottom: 16px;\n  }\n  &-list {\n    margin: 20px 32px;\n  }\n  &-table {\n    padding: 16px 24px;\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.05);\n  }\n  &-drawer {\n    &_tit {\n      padding: 24px;\n      font-size: 20px;\n      font-weight: 700;\n      i {\n        cursor: pointer;\n      }\n    }\n    .node-item {\n      width: 100px;\n      margin-right: 12px;\n    }\n  }\n  &-form {\n    padding: 0 24px;\n  }\n  &-upstreams {\n    padding-left: 32px;\n    color: #606266;\n    font-size: 14px;\n  }\n  .plugin-card {\n    text-align: center;\n    h3 {\n      font-size: 16px;\n      font-weight: bold;\n      margin-bottom: 12px;\n    }\n    p {\n      text-align: left;\n      color: #666;\n      margin-bottom: 12px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=41a6187f&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=41a6187f&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"41a6187f\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}