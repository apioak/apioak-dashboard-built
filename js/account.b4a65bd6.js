(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["account"],{"5dc0":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register-container"},[r("div",{staticClass:"login-content"},[r("el-form",{ref:"registerForms",staticClass:"sign-form",attrs:{model:e.registerForms,rules:e.registerRules,"label-position":"left","label-width":"0px"}},[r("el-form-item",{attrs:{prop:"name"}},[r("el-input",{attrs:{type:"text",placeholder:"昵称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.executeAccountRegister("registerForms")}},model:{value:e.registerForms.name,callback:function(t){e.$set(e.registerForms,"name",t)},expression:"registerForms.name"}})],1),r("el-form-item",{attrs:{prop:"email"}},[r("el-input",{attrs:{type:"text",placeholder:"邮箱"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.executeAccountRegister("registerForms")}},model:{value:e.registerForms.email,callback:function(t){e.$set(e.registerForms,"email",t)},expression:"registerForms.email"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入6-16位密码，区分大小写","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.executeAccountRegister("registerForms")}},model:{value:e.registerForms.password,callback:function(t){e.$set(e.registerForms,"password",t)},expression:"registerForms.password"}})],1),r("el-form-item",{attrs:{prop:"checkPass"}},[r("el-input",{attrs:{type:"password",placeholder:"确认密码","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.executeAccountRegister("registerForms")}},model:{value:e.registerForms.valid_password,callback:function(t){e.$set(e.registerForms,"valid_password",t)},expression:"registerForms.valid_password"}})],1),r("el-form-item",{staticStyle:{width:"100%"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.executeRegisterLoading},on:{click:function(t){return e.executeAccountRegister("registerForms")}}},[e._v(" 注册 ")])],1)],1)],1),r("div",{staticClass:"toggle-box"},[r("div",{staticClass:"toggle-btn login",on:{click:e.redirectLoginPage}},[e._v("登录帐户")])])])},n=[],o={data:function(){var e=this;return{registerForms:{name:"",email:"",password:"",valid_password:""},registerRules:{name:[{required:!0,message:"昵称长度限制（4 - 16）",min:4,max:16,type:"string",trigger:"change"}],email:[{required:!0,trigger:"change",validator:function(e,t,r){if(0===t.length)return r(new Error("输入登录邮箱"));var s=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;return s.test(t)?r():r(new Error("邮箱格式不合法"))}}],password:[{required:!0,message:"密码长度限制（6 - 16）",min:6,max:16,type:"string",trigger:"change"}],valid_password:[{required:!0,trigger:"change",validator:function(t,r,s){return 0===r.length?s(new Error("输入确认密码")):e.registerForms.password!==r?s(new Error("密码输入不一致")):s()}}]},executeRegisterLoading:!1}},methods:{redirectLoginPage:function(){this.$router.push({path:"/account/login"})},executeAccountRegister:function(e){var t=this;this.$refs[e].validate((function(e){return!!e&&(t.executeRegisterLoading=!0,t.$oakRequest.post(t.$oakBackendApis.account.register,t.registerForms).then((function(e){if(200===e.status)return t.$message({type:"success",message:"注册成功"}),t.$router.push({path:"/account/login"}),!0})).catch((function(e){t.$message({type:"error",message:"注册失败"})})),t.executeRegisterLoading=!1,!1)}))}}},i=o,a=(r("f564"),r("2877")),c=Object(a["a"])(i,s,n,!1,null,"74519b35",null);t["default"]=c.exports},8038:function(e,t,r){},8601:function(e,t,r){"use strict";var s=r("8038"),n=r.n(s);n.a},9498:function(e,t,r){},9760:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-container"},[r("div",{staticClass:"login-content"},[r("el-form",{ref:"loginForms",staticClass:"register-form",attrs:{model:e.loginForms,rules:e.loginRules,"label-position":"left","label-width":"0px"}},[r("el-form-item",{attrs:{prop:"email"}},[r("el-input",{attrs:{type:"text",placeholder:"邮箱"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.executeAccountLogin("loginForms")}},model:{value:e.loginForms.email,callback:function(t){e.$set(e.loginForms,"email",t)},expression:"loginForms.email"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"密码","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.executeAccountLogin("loginForms")}},model:{value:e.loginForms.password,callback:function(t){e.$set(e.loginForms,"password",t)},expression:"loginForms.password"}})],1),r("el-form-item",{staticStyle:{width:"100%"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.executeLoginLoading},on:{click:function(t){return e.executeAccountLogin("loginForms")}}},[e._v("登录 ")])],1)],1)],1),r("div",{staticClass:"toggle-box"},[r("div",{staticClass:"toggle-btn sign",on:{click:e.redirectRegisterPage}},[e._v("注册账户")])])])},n=[],o=(r("b0c0"),r("b64b"),{data:function(){return{executeLoginLoading:!1,loginForms:{email:"",password:""},loginRules:{email:[{required:!0,trigger:"change",validator:function(e,t,r){if(0===t.length)return r(new Error("输入登录邮箱"));var s=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;return s.test(t)?r():r(new Error("邮箱格式不合法"))}}],password:[{required:!0,trigger:"change",min:6,max:16,message:"密码长度限制（6 - 16）"}]}}},methods:{redirectRegisterPage:function(){this.$router.push({path:"/account/register"})},executeAccountLogin:function(e){var t=this;this.$refs[e].validate((function(e){return!!e&&(t.executeLoginLoading=!0,t.$oakRequest.put(t.$oakBackendApis.account.login,t.loginForms).then((function(e){if(200===e.status){var r=e.data.user;if(Object.keys(r).length>0)return t.$message({type:"success",message:"登录成功"}),t.$cookies.set(t.$oakConst.cookies.APIOAK_ADMIN_TOKEN,r.token),t.$cookies.set(t.$oakConst.cookies.APIOAK_ADMIN_ID,r.id),t.$cookies.set(t.$oakConst.cookies.APIOAK_ADMIN_NAME,r.name),t.$cookies.set(t.$oakConst.cookies.APIOAK_ADMIN_OWNER,r.is_owner),t.$router.push({path:"/projects"}),!0}})).catch((function(e){t.$message({type:"error",message:"登录失败"})})),t.executeLoginLoading=!1,!1)}))}}}),i=o,a=(r("8601"),r("2877")),c=Object(a["a"])(i,s,n,!1,null,"77cdcda8",null);t["default"]=c.exports},b0c0:function(e,t,r){var s=r("83ab"),n=r("9bf2").f,o=Function.prototype,i=o.toString,a=/^\s*function ([^ (]*)/,c="name";s&&!(c in o)&&n(o,c,{configurable:!0,get:function(){try{return i.call(this).match(a)[1]}catch(e){return""}}})},f564:function(e,t,r){"use strict";var s=r("9498"),n=r.n(s);n.a}}]);
//# sourceMappingURL=account.b4a65bd6.js.map