(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"057f":function(e,t,r){var s=r("fc6a"),n=r("241c").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(e){try{return n(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?i(e):n(s(e))}},"0729":function(e,t,r){"use strict";var s=r("1e3b"),n=r.n(s);n.a},1131:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACn0lEQVRoQ+2YvWtTURjGnzcJ+hd0cdHBSdxcHDs4VHLEySIUREE6tJI0IoiTdXEpkp6ggzioKBR0Em9b7NJuLg46xKWKky46O5n7yCVJvSZp7vnouRq4d0zej+f3PufjJoIJf2TC9aMA+NcOFg4UDnhOoFhCngP0Ts/dAdXiHGP8WF+SN97qgXzvAdXkMkq4DeAnyjgTXZO3vhC5OZAS39UsaEc1OTkRAEPiu6pfRnWZ/e8BQorvGhnwCS0+KEAe4oMB5CXeGyARyjKOVoCVVzX5mF6NVc0HAiz0PjPasD3wmagup01XtvMeqGrOC/CwfySWgdlBiHOazwgcNjltlOZdALd69XZAzEd12c0CcQZQmu8AnNprIGiPgsgSkHyvNO8BuP5XbIw7UUOWs/KdAJLXARDPh4o7QCjN+wAWB2oZLTnnPaA0E/FzI6djAaE0HwG46ireHaDFbRDT+9prAKFW+RSCSz7i3QE0vwI4MnZ9joFQmmsALvqKdwKYafJYpYQvWZtr3OmkNF8AuJCqYbzmB/tab2LV5DRK2DYC6I5o5OmUgnAW7+SANUAGhMkdMW5Y4R3odzfY2MaupgLzAxjjhIvwP3OxzHZaQukeB+xEvg4EWE7WAIkGpUlL44bCKXiyXpMrvnWsAdQqdyE47tsYhi9rWX2sAFSLGyDOZhXN+H4rjnFzoyHvPev07krDKiNuT6NMAp9LxAcKPkmMndcN2TRKNAwycuB8iyc6RHuoZu9EkQ6+/SphisCUxDjUj+uU0d6syXdDLU5hRgBJ5armigA39roc8HHopN72b5Vqi4+FuLzf+42rCJ88Ywf6TapNLlXK2Br8/esjwifXGsCnWYjcAiDEVG1qFg7YTCtEbOFAiKna1CwcsJlWiNjfm54AQBnRmUQAAAAASUVORK5CYII="},1276:function(e,t,r){"use strict";var s=r("d784"),n=r("44e7"),a=r("825a"),o=r("1d80"),i=r("4840"),l=r("8aa5"),c=r("50c4"),u=r("14c3"),p=r("9263"),d=r("d039"),m=[].push,f=Math.min,g=4294967295,h=!d((function(){return!RegExp(g,"y")}));s("split",2,(function(e,t,r){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var s=String(o(this)),a=void 0===r?g:r>>>0;if(0===a)return[];if(void 0===e)return[s];if(!n(e))return t.call(s,e,a);var i,l,c,u=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,h=new RegExp(e.source,d+"g");while(i=p.call(h,s)){if(l=h.lastIndex,l>f&&(u.push(s.slice(f,i.index)),i.length>1&&i.index<s.length&&m.apply(u,i.slice(1)),c=i[0].length,f=l,u.length>=a))break;h.lastIndex===i.index&&h.lastIndex++}return f===s.length?!c&&h.test("")||u.push(""):u.push(s.slice(f)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var n=o(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,n,r):s.call(String(n),t,r)},function(e,n){var o=r(s,e,this,n,s!==t);if(o.done)return o.value;var p=a(e),d=String(this),m=i(p,RegExp),v=p.unicode,b=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(h?"y":"g"),y=new m(h?p:"^(?:"+p.source+")",b),_=void 0===n?g:n>>>0;if(0===_)return[];if(0===d.length)return null===u(y,d)?[d]:[];var x=0,j=0,P=[];while(j<d.length){y.lastIndex=h?j:0;var S,k=u(y,h?d:d.slice(j));if(null===k||(S=f(c(y.lastIndex+(h?0:j)),d.length))===x)j=l(d,j,v);else{if(P.push(d.slice(x,j)),P.length===_)return P;for(var C=1;C<=k.length-1;C++)if(P.push(k[C]),P.length===_)return P;j=x=S}}return P.push(d.slice(x)),P}]}),!h)},"140a":function(e,t,r){},"14c3":function(e,t,r){var s=r("c6b6"),n=r("9263");e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var a=r.call(e,t);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==s(e))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},"1e3b":function(e,t,r){},2532:function(e,t,r){"use strict";var s=r("23e7"),n=r("5a34"),a=r("1d80"),o=r("ab13");s({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~String(a(this)).indexOf(n(e),arguments.length>1?arguments[1]:void 0)}})},"25d3":function(e,t,r){},"25f0":function(e,t,r){"use strict";var s=r("6eeb"),n=r("825a"),a=r("d039"),o=r("ad6d"),i="toString",l=RegExp.prototype,c=l[i],u=a((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),p=c.name!=i;(u||p)&&s(RegExp.prototype,i,(function(){var e=n(this),t=String(e.source),r=e.flags,s=String(void 0===r&&e instanceof RegExp&&!("flags"in l)?o.call(e):r);return"/"+t+"/"+s}),{unsafe:!0})},"2a2d":function(e,t,r){"use strict";var s=r("3813"),n=r.n(s);n.a},3813:function(e,t,r){},3835:function(e,t,r){"use strict";function s(e){if(Array.isArray(e))return e}r.d(t,"a",(function(){return l}));r("a4d3"),r("e01a"),r("d28b"),r("e260"),r("d3b7"),r("3ca3"),r("ddb0");function n(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],s=!0,n=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(s=(o=i.next()).done);s=!0)if(r.push(o.value),t&&r.length===t)break}catch(l){n=!0,a=l}finally{try{s||null==i["return"]||i["return"]()}finally{if(n)throw a}}return r}}r("a630"),r("fb6a"),r("b0c0"),r("25f0");function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return s(e)||n(e,t)||o(e,t)||i()}},"3ca3":function(e,t,r){"use strict";var s=r("6547").charAt,n=r("69f3"),a=r("7dd0"),o="String Iterator",i=n.set,l=n.getterFor(o);a(String,"String",(function(e){i(this,{type:o,string:String(e),index:0})}),(function(){var e,t=l(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=s(r,n),t.index+=e.length,{value:e,done:!1})}))},4276:function(e,t,r){"use strict";var s=r("f855"),n=r.n(s);n.a},"44e7":function(e,t,r){var s=r("861d"),n=r("c6b6"),a=r("b622"),o=a("match");e.exports=function(e){var t;return s(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==n(e))}},"466d":function(e,t,r){"use strict";var s=r("d784"),n=r("825a"),a=r("50c4"),o=r("1d80"),i=r("8aa5"),l=r("14c3");s("match",1,(function(e,t,r){return[function(t){var r=o(this),s=void 0==t?void 0:t[e];return void 0!==s?s.call(t,r):new RegExp(t)[e](String(r))},function(e){var s=r(t,e,this);if(s.done)return s.value;var o=n(e),c=String(this);if(!o.global)return l(o,c);var u=o.unicode;o.lastIndex=0;var p,d=[],m=0;while(null!==(p=l(o,c))){var f=String(p[0]);d[m]=f,""===f&&(o.lastIndex=i(c,a(o.lastIndex),u)),m++}return 0===m?null:d}]}))},"46ec":function(e,t,r){},"498a":function(e,t,r){"use strict";var s=r("23e7"),n=r("58a8").trim,a=r("c8d2");s({target:"String",proto:!0,forced:a("trim")},{trim:function(){return n(this)}})},"4de4":function(e,t,r){"use strict";var s=r("23e7"),n=r("b727").filter,a=r("1dde"),o=r("ae40"),i=a("filter"),l=o("filter");s({target:"Array",proto:!0,forced:!i||!l},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,r){"use strict";var s=r("0366"),n=r("7b0b"),a=r("9bdd"),o=r("e95a"),i=r("50c4"),l=r("8418"),c=r("35a1");e.exports=function(e){var t,r,u,p,d,m,f=n(e),g="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,b=void 0!==v,y=c(f),_=0;if(b&&(v=s(v,h>2?arguments[2]:void 0,2)),void 0==y||g==Array&&o(y))for(t=i(f.length),r=new g(t);t>_;_++)m=b?v(f[_],_):f[_],l(r,_,m);else for(p=y.call(f),d=p.next,r=new g;!(u=d.call(p)).done;_++)m=b?a(p,v,[u.value,_],!0):u.value,l(r,_,m);return r.length=_,r}},"4fad":function(e,t,r){var s=r("23e7"),n=r("6f53").entries;s({target:"Object",stat:!0},{entries:function(e){return n(e)}})},"545c":function(e,t,r){"use strict";var s=r("94e2"),n=r.n(s);n.a},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");var s=r("ade3");function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},"57e9":function(e,t,r){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var s=r("1d80"),n=r("5899"),a="["+n+"]",o=RegExp("^"+a+a+"*"),i=RegExp(a+a+"*$"),l=function(e){return function(t){var r=String(s(t));return 1&e&&(r=r.replace(o,"")),2&e&&(r=r.replace(i,"")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5a34":function(e,t,r){var s=r("44e7");e.exports=function(e){if(s(e))throw TypeError("The method doesn't accept regular expressions");return e}},6547:function(e,t,r){var s=r("a691"),n=r("1d80"),a=function(e){return function(t,r){var a,o,i=String(n(t)),l=s(r),c=i.length;return l<0||l>=c?e?"":void 0:(a=i.charCodeAt(l),a<55296||a>56319||l+1===c||(o=i.charCodeAt(l+1))<56320||o>57343?e?i.charAt(l):a:e?i.slice(l,l+2):o-56320+(a-55296<<10)+65536)}};e.exports={codeAt:a(!1),charAt:a(!0)}},6572:function(e,t,r){},"6f53":function(e,t,r){var s=r("83ab"),n=r("df75"),a=r("fc6a"),o=r("d1e7").f,i=function(e){return function(t){var r,i=a(t),l=n(i),c=l.length,u=0,p=[];while(c>u)r=l[u++],s&&!o.call(i,r)||p.push(e?[r,i[r]]:i[r]);return p}};e.exports={entries:i(!0),values:i(!1)}},"707c":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"project-container"},[s("div",{staticClass:"project-header"},[s("el-button",{staticClass:"fl",staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.openCreatedProject}},[e._v("新建项目 ")]),s("el-form",{staticClass:"project-form-inline",attrs:{inline:!0,model:e.projectQueryData}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"输入项目名称","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryProjectByName(t)}},model:{value:e.projectQueryData.name,callback:function(t){e.$set(e.projectQueryData,"name",t)},expression:"projectQueryData.name"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.queryProjectByName}},[e._v("搜索")])],1)],1)],1),e.projectCount>0?s("div",{staticClass:"project-table-container app-content"},[s("el-table",{staticClass:"project-table",attrs:{data:e.projectTableLists}},[s("el-table-column",{attrs:{width:"40px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("img",{staticStyle:{width:"24px",cursor:"pointer","vertical-align":"middle"},attrs:{src:r("1131"),alt:"plugin"},on:{click:function(r){return e.openPluginProject(t.row)}}})])]}}],null,!1,2710867635)}),s("el-table-column",{attrs:{label:"项目名称",prop:"name"}}),s("el-table-column",{attrs:{label:"项目角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:1===t.row.is_admin?"primary":"success",size:"mini"}},[e._v(" "+e._s(1===t.row.is_admin?"管理员":"成员")+" ")])]}}],null,!1,3706960447)}),s("el-table-column",{attrs:{label:"项目路径",prop:"path"}}),s("el-table-column",{attrs:{label:"项目描述",prop:"description"}}),s("el-table-column",{attrs:{label:"操作",width:"400px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{staticStyle:{"margin-right":"0px"},attrs:{type:"primary",size:"small",disabled:1!==t.row.is_admin},on:{click:function(r){return e.openUpdatedProject(t.row)}}},[e._v("编辑 ")]),s("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"success",size:"small"},on:{click:function(r){return e.openDetailProject(t.row)}}},[e._v("详情 ")]),s("el-popconfirm",{staticStyle:{"margin-right":"10px"},attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",iconColor:"red",title:"确定删除该项目吗？"},on:{onConfirm:function(r){return e.removeProject(t.row)}}},[s("el-button",{attrs:{slot:"reference",type:"danger",size:"small",disabled:1!==t.row.is_admin},slot:"reference"},[e._v("删除 ")])],1),s("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(r){return e.openMemberProject(t.row)}}},[e._v("成员 ")]),s("el-button",{attrs:{size:"small"},on:{click:function(r){return e.redirectRouters(t.row)}}},[e._v("APIs")])]}}],null,!1,2589329805)})],1),s("el-pagination",{staticClass:"project-pagination",attrs:{"current-page":e.pageNum,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.projectCount},on:{"size-change":e.changePageSize,"current-change":e.changePageNumber}})],1):s("div",{staticClass:"empty-content"},[s("img",{staticClass:"empty-background",attrs:{src:r("8422")}})]),s("project-created",{attrs:{open:e.optionCreatedProjectOpen,projectId:e.optionCreatedProjectId},on:{changeCreatedProject:e.changeCreatedProject}}),s("project-updated",{attrs:{open:e.optionUpdatedProjectOpen,projectId:e.optionUpdatedProjectId},on:{changeUpdatedProject:e.changeUpdatedProject}}),s("project-detail",{attrs:{open:e.optionDetailProjectOpen,projectId:e.optionDetailProjectId},on:{changeDetailProject:e.changeDetailProject}}),s("project-member",{attrs:{open:e.optionMemberProjectOpen,projectId:e.optionMemberProjectId,isAdmin:e.optionMemberProjectAdmin},on:{changeMemberProject:e.changeMemberProject}}),s("project-plugin",{attrs:{open:e.optionPluginProjectOpen,projectId:e.optionPluginProjectId,isAdmin:e.optionPluginProjectAdmin},on:{changePluginProject:e.changePluginProject}})],1)])},n=[],a=(r("4de4"),r("caad"),r("b0c0"),r("b64b"),r("2532"),r("498a"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-drawer",{staticClass:"project-save-drawer",attrs:{visible:e.open_,direction:e.direction,"with-header":e.withHeader,size:e.size,projectId:e.projectId},on:{"update:visible":function(t){e.open_=t}}},[r("p",{staticClass:"drawer-title"},[r("span",{domProps:{innerHTML:e._s(e.title)}}),r("i",{staticClass:"el-icon-close fr",on:{click:function(t){return e.cancelSave("projectForm")}}})]),r("div",{staticClass:"drawer-table-container"},[r("el-form",{ref:"projectForm",attrs:{model:e.projectForm,"label-width":"80px"}},[r("el-input",{attrs:{type:"hidden"},model:{value:e.projectForm.id,callback:function(t){e.$set(e.projectForm,"id",t)},expression:"projectForm.id"}}),r("el-form-item",{attrs:{label:"项目名称",prop:"name",rules:e.projectRules.name}},[r("el-input",{attrs:{placeholder:"项目名称"},model:{value:e.projectForm.name,callback:function(t){e.$set(e.projectForm,"name",t)},expression:"projectForm.name"}})],1),r("el-form-item",{attrs:{label:"项目路径",prop:"path",rules:e.projectRules.path}},[r("el-input",{attrs:{placeholder:"项目路径"},model:{value:e.projectForm.path,callback:function(t){e.$set(e.projectForm,"path",t)},expression:"projectForm.path"}})],1),r("el-form-item",{attrs:{label:"项目描述",prop:"description",rules:e.projectRules.description}},[r("el-input",{attrs:{type:"textarea",placeholder:"项目描述"},model:{value:e.projectForm.description,callback:function(t){e.$set(e.projectForm,"description",t)},expression:"projectForm.description"}})],1),r("el-row",{attrs:{gutter:24}},[r("el-col",{staticClass:"drawer-upstream-title",attrs:{span:4}},[e._v("上游服务")]),r("el-col",{attrs:{span:20}},[r("el-tabs",{model:{value:e.defaultEnv,callback:function(t){e.defaultEnv=t},expression:"defaultEnv"}},e._l(e.projectForm.upstreams,(function(t,s){return r("el-tab-pane",{attrs:{label:e.getEnvChineseName(t.env),name:t.env}},[r("el-input",{attrs:{type:"hidden"},model:{value:e.projectForm.upstreams[s].id,callback:function(t){e.$set(e.projectForm.upstreams[s],"id",t)},expression:"projectForm.upstreams[upstreamIndex].id"}}),r("el-form-item",{attrs:{label:"主机名称",prop:"upstreams["+s+"].host",rules:e.projectRules.hostname}},[r("el-input",{attrs:{placeholder:"主机名称"},model:{value:e.projectForm.upstreams[s].host,callback:function(t){e.$set(e.projectForm.upstreams[s],"host",t)},expression:"projectForm.upstreams[upstreamIndex].host"}})],1),r("el-form-item",{attrs:{label:"轮询算法",prop:"upstreams["+s+"].type"}},[r("el-select",{attrs:{placeholder:"轮询算法"},model:{value:e.projectForm.upstreams[s].type,callback:function(t){e.$set(e.projectForm.upstreams[s],"type",t)},expression:"projectForm.upstreams[upstreamIndex].type"}},[r("el-option",{attrs:{label:"CHASH",value:"CHASH"}}),r("el-option",{attrs:{label:"ROUNDROBIN",value:"ROUNDROBIN"}})],1)],1),r("el-form-item",{attrs:{inline:!0,label:"服务节点",required:""}},e._l(t.nodes,(function(t,n){return r("el-form-item",{staticStyle:{"margin-bottom":"12px"}},[r("el-form-item",{staticStyle:{float:"left"},attrs:{prop:"upstreams["+s+"].nodes["+n+"].ip",rules:e.projectRules.nodeIp}},[r("el-input",{staticClass:"node-item node-item-ip",attrs:{type:"text",placeholder:"节点IP"},model:{value:e.projectForm.upstreams[s].nodes[n].ip,callback:function(t){e.$set(e.projectForm.upstreams[s].nodes[n],"ip",t)},expression:"projectForm.upstreams[upstreamIndex].nodes[nodeIndex].ip"}})],1),r("el-form-item",{staticStyle:{float:"left"},attrs:{prop:"upstreams["+s+"].nodes["+n+"].port",rules:e.projectRules.nodePort}},[r("el-input",{staticClass:"node-item node-item-port",attrs:{type:"text",placeholder:"节点端口"},model:{value:e.projectForm.upstreams[s].nodes[n].port,callback:function(t){e.$set(e.projectForm.upstreams[s].nodes[n],"port",e._n(t))},expression:"projectForm.upstreams[upstreamIndex].nodes[nodeIndex].port"}})],1),r("el-form-item",{staticStyle:{float:"left"},attrs:{prop:"upstreams["+s+"].nodes["+n+"].weight",rules:e.projectRules.nodeWeight}},[r("el-input",{staticClass:"node-item node-item-weight",attrs:{type:"text",placeholder:"节点权重"},model:{value:e.projectForm.upstreams[s].nodes[n].weight,callback:function(t){e.$set(e.projectForm.upstreams[s].nodes[n],"weight",e._n(t))},expression:"projectForm.upstreams[upstreamIndex].nodes[nodeIndex].weight"}})],1),r("el-form-item",{staticStyle:{float:"left"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.createdNode(s)}}})],1),r("el-form-item",{staticStyle:{float:"left","margin-left":"5px"}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-remove-outline",disabled:1===e.projectForm.upstreams[s].nodes.length},on:{click:function(t){return e.deleteNode(s,n)}}})],1)],1)})),1),r("el-form-item",{attrs:{label:"连接超时",prop:"upstreams["+s+"].timeouts.connect",rules:e.projectRules.timeout}},[r("el-input",{staticStyle:{width:"160px"},attrs:{type:"number"},model:{value:e.projectForm.upstreams[s].timeouts.connect,callback:function(t){e.$set(e.projectForm.upstreams[s].timeouts,"connect",e._n(t))},expression:"projectForm.upstreams[upstreamIndex].timeouts.connect"}},[r("template",{slot:"append"},[e._v("毫秒")])],2)],1),r("el-form-item",{attrs:{label:"发送超时",prop:"upstreams["+s+"].timeouts.send",rules:e.projectRules.timeout}},[r("el-input",{staticStyle:{width:"160px"},attrs:{type:"number"},model:{value:e.projectForm.upstreams[s].timeouts.send,callback:function(t){e.$set(e.projectForm.upstreams[s].timeouts,"send",e._n(t))},expression:"projectForm.upstreams[upstreamIndex].timeouts.send"}},[r("template",{slot:"append"},[e._v("毫秒")])],2)],1),r("el-form-item",{attrs:{label:"读取超时",prop:"upstreams["+s+"].timeouts.read",rules:e.projectRules.timeout}},[r("el-input",{staticStyle:{width:"160px"},attrs:{type:"number"},model:{value:e.projectForm.upstreams[s].timeouts.read,callback:function(t){e.$set(e.projectForm.upstreams[s].timeouts,"read",e._n(t))},expression:"projectForm.upstreams[upstreamIndex].timeouts.read"}},[r("template",{slot:"append"},[e._v("毫秒")])],2)],1)],1)})),1)],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.executeSave("projectForm")}}},[e._v("保存 ")]),r("el-button",{on:{click:function(t){return e.cancelSave("projectForm")}}},[e._v("取消 ")])],1)],1)],1)])}),o=[],i=(r("a9e3"),{props:{projectId:{type:Number,default:0},size:{type:String,default:"60%"},direction:{type:String,default:"rtl"},open:{type:Boolean,default:!1},withHeader:{type:Boolean,default:!1}},data:function(){var e=function(e,t,r){var s=/^([\u4e00-\u9fa5]|[A-Za-z0-9\s]){0,100}$/;s.test(t)?r():r(new Error("项目描述不合法，支持中文、英文，内容长度（0-100）"))},t=function(e,t,r){var s=/^([\u4e00-\u9fa5]|[A-Za-z0-9\s]){2,20}$/;s.test(t)?r():r(new Error("项目名称不合法，支持中文、英文，内容长度（2-20）"))},r=function(e,t,r){var s=/^\/[a-zA-Z0-9\-\_\.\+]{2,20}$/;s.test(t)?r():r(new Error('项目路径不合法，必须以"/"开头，内容支持大小写字母、数字、和-_.+等符合URL规则的符号，内容长度（2-20）'))},s=function(e,t,r){var s=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,n=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;if(!s.test(t)&&!n.test(t))return r(new Error("节点IP不合法"));r()},n=function(e,t,r){var s=/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$/;if(!s.test(t))return r(new Error("主机名称不合法，主机名称应为WEB服务器的 Server Name，禁止使用 http:// 或 https:// 开始。"));r()};return{title:"",defaultEnv:"PROD",requestApi:"",action:"CREATED",projectForm:{id:0,name:"",path:"",description:"",upstreams:[{id:0,env:"PROD",host:"localhost",type:"CHASH",timeouts:{connect:5e3,send:5e3,read:5e3},nodes:[{ip:"127.0.0.1",port:10666,weight:100}]},{id:0,env:"BETA",host:"localhost",type:"CHASH",timeouts:{connect:5e3,send:5e3,read:5e3},nodes:[{ip:"127.0.0.1",port:10666,weight:100}]},{id:0,env:"TEST",host:"localhost",type:"CHASH",timeouts:{connect:5e3,send:5e3,read:5e3},nodes:[{ip:"127.0.0.1",port:10666,weight:100}]}]},projectRules:{name:[{required:!0,validator:t,trigger:"blur"}],path:[{required:!0,validator:r,trigger:"blur"}],description:[{required:!1,validator:e,trigger:"blur"}],hostname:{required:!0,trigger:"blur",validator:n},nodeWeight:[{type:"number",required:!0,trigger:"blur",min:0,max:100,message:"取值范围（0 - 100）"}],nodePort:[{type:"number",required:!0,trigger:"blur",min:1,max:65535,message:"取值范围（1 - 65535）"}],nodeIp:[{required:!0,trigger:"blur",validator:s}],timeout:[{type:"number",required:!0,trigger:"blur",min:0,max:6e4,message:"取值范围（0 - 60000）"}]}}},computed:{open_:{get:function(){return this.open},set:function(e){"CREATED"===this.action&&this.$emit("changeCreatedProject",e),"UPDATED"===this.action&&this.$emit("changeUpdatedProject",e),this.$refs["projectForm"].resetFields()}}},watch:{open:function(e){e&&(this.projectId>0?(this.action="UPDATED",this.title="编辑项目",this.requestApi=this.$oakBackendApis.project.updated(this.projectId),this.getProjectById(this.projectId)):(this.action="CREATED",this.title="新增项目",this.requestApi=this.$oakBackendApis.project.created))}},methods:{executeSave:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;"CREATED"===t.action&&t.$oakRequest.post(t.requestApi,t.projectForm).then((function(e){200===e.status&&(t.$message({type:"success",message:"保存项目成功"}),t.cancelSave("projectForm"))})),"UPDATED"===t.action&&t.$oakRequest.put(t.requestApi,t.projectForm).then((function(e){200===e.status&&(t.$message({type:"success",message:"保存项目成功"}),t.cancelSave("projectForm"))}))}))},cancelSave:function(e){this.open_=!1},deleteNode:function(e,t){this.$delete(this.projectForm.upstreams[e]["nodes"],t)},createdNode:function(e){this.projectForm.upstreams[e]["nodes"].push({ip:"127.0.0.1",port:10666,weight:100})},getEnvChineseName:function(e){return"PROD"===e?"生产环境":"BETA"===e?"预发环境":"TEST"===e?"测试环境":void 0},getProjectById:function(e){var t=this;this.$oakRequest.get(this.$oakBackendApis.project.query(e),this.projectForm).then((function(e){if(200===e.status){var r=e.data.project;Object.keys(r).length>0&&(t.projectForm=e.data.project)}}))}}}),l=i,c=(r("ee42"),r("2877")),u=Object(c["a"])(l,a,o,!1,null,"0abd0b97",null),p=u.exports,d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-drawer",{staticClass:"project-detail-drawer",attrs:{visible:e.open_,direction:e.direction,"with-header":e.withHeader,size:e.size,projectId:e.projectId},on:{"update:visible":function(t){e.open_=t}}},[r("p",{staticClass:"project-drawer-tit"},[r("span",{domProps:{innerHTML:e._s(e.title)}}),r("i",{staticClass:"el-icon-close fr",on:{click:e.cancelDetail}})]),r("div",{staticClass:"part-info api-detail-info"},[r("h3",[e._v("基本信息")]),r("div",{staticClass:"baseinfo"},[r("p",[r("span",{staticClass:"tit"},[e._v("项目名称:")]),r("span",{staticClass:"cont"},[e._v(e._s(e.projectForm.name))])]),r("p",[r("span",{staticClass:"tit"},[e._v("项目路径:")]),r("span",{staticClass:"cont"},[e._v(e._s(e.projectForm.path))])]),r("p",[r("span",{staticClass:"tit"},[e._v("项目描述:")]),r("span",{staticClass:"cont"},[e._v(e._s(e.projectForm.description))])])]),r("h3",[e._v("上游服务")]),e._l(e.projectForm.upstreams,(function(t,s){return r("div",{key:t.id,staticClass:"upbox"},[r("div",{staticClass:"upbox-title-header"},["PROD"===t.env?r("span",{staticClass:"title"},[e._v("生产环境")]):e._e(),"BETA"===t.env?r("span",{staticClass:"title"},[e._v("预发环境")]):e._e(),"TEST"===t.env?r("span",{staticClass:"title"},[e._v("测试环境")]):e._e()]),r("div",[r("p",{staticClass:"upbox-item"},[r("span",{staticClass:"upbox-item-name"},[e._v("主机地址:")]),r("span",{staticClass:"upbox-item-value"},[e._v(e._s(t.host))])]),r("p",{staticClass:"upbox-item"},[r("span",{staticClass:"upbox-item-name"},[e._v("轮询算法:")]),r("span",{staticClass:"upbox-item-value"},[e._v(e._s(t.type))])]),r("span",{staticClass:"sub-title"},[e._v("服务节点:")]),e._l(t.nodes,(function(t,s){return r("div",{key:s},[r("div",{staticClass:"fl-box"},[r("p",{staticClass:"fl-item"},[r("span",{staticClass:"fl-item-name"},[e._v("节点IP:")]),r("span",{staticClass:"fl-item-value"},[e._v(e._s(t.ip))])]),r("p",{staticClass:"fl-item"},[r("span",{staticClass:"fl-item-name"},[e._v("节点端口:")]),r("span",{staticClass:"fl-item-value"},[e._v(e._s(t.port))])]),r("p",{staticClass:"fl-item"},[r("span",{staticClass:"fl-item-name"},[e._v("节点权重:")]),r("span",{staticClass:"fl-item-value"},[e._v(e._s(t.weight))])])])])})),r("div",{staticClass:"time-item"},[r("span",{staticClass:"item-item-name"},[e._v("连接超时:")]),r("span",{staticClass:"item-item-value"},[e._v(e._s(t.timeouts.connect))])]),r("div",{staticClass:"time-item"},[r("span",{staticClass:"item-item-name"},[e._v("发送超时:")]),r("span",{staticClass:"item-item-value"},[e._v(e._s(t.timeouts.send))])]),r("div",{staticClass:"time-item time-item-end"},[r("span",{staticClass:"item-item-name"},[e._v("读取超时:")]),r("span",{staticClass:"item-item-value"},[e._v(e._s(t.timeouts.read))])])],2)])}))],2)])},m=[],f={props:{projectId:{type:Number,default:0},size:{type:String,default:"60%"},direction:{type:String,default:"rtl"},open:{type:Boolean,default:!1},withHeader:{type:Boolean,default:!1},title:{type:String,default:"项目详情"}},data:function(){return{projectForm:{}}},watch:{open:function(e){e&&(this.projectId>0?this.getProjectById(this.projectId):this.cancelDetail())}},computed:{open_:{get:function(){return this.open},set:function(e){this.$emit("changeDetailProject",e)}}},methods:{cancelDetail:function(){this.open_=!1},getProjectById:function(e){var t=this;this.$oakRequest.get(this.$oakBackendApis.project.query(e),this.projectForm).then((function(e){200===e.status&&(t.projectForm=e.data.project)}))}}},g=f,h=(r("4276"),Object(c["a"])(g,d,m,!1,null,"074d0568",null)),v=h.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-drawer",{staticClass:"project-member-drawer",attrs:{visible:e.open_,direction:e.direction,"with-header":e.withHeader,size:e.size,projectId:e.projectId,isAdmin:e.isAdmin},on:{"update:visible":function(t){e.open_=t}}},[r("p",{staticClass:"drawer-title"},[r("span",{domProps:{innerHTML:e._s(e.title)}}),r("i",{staticClass:"el-icon-close fr",on:{click:e.cancelMember}})]),r("div",{staticClass:"list-table"},[e.isAdmin?r("div",[r("el-button",{staticClass:"fr",attrs:{type:"primary",size:"small"},on:{click:e.openCreateMember}},[e._v("添加")])],1):e._e(),e.projectMemberCreatedOpen?r("div",{staticClass:"addNewUser-container"},[r("el-form",{ref:"projectMemberForm",staticClass:"user-ruleForm",attrs:{model:e.projectMemberForm,rules:e.projectMemberRules,"label-width":"100px"}},[r("el-form-item",{staticStyle:{width:"350px"},attrs:{label:"选择成员",prop:"user_id"}},[r("el-select",{staticStyle:{width:"265px"},attrs:{filterable:"",placeholder:"请选择成员"},model:{value:e.projectMemberForm.user_id,callback:function(t){e.$set(e.projectMemberForm,"user_id",t)},expression:"projectMemberForm.user_id"}},e._l(e.systemMembers,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[r("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.email))])])})),1)],1),r("el-form-item",{attrs:{label:"管理员",prop:"is_admin"}},[r("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:e.projectMemberForm.is_admin,callback:function(t){e.$set(e.projectMemberForm,"is_admin",t)},expression:"projectMemberForm.is_admin"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.executeSaveProjectMember("projectMemberForm")}}},[e._v("完成 ")]),r("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cancelSaveProjectMember("projectMemberForm")}}},[e._v("取消 ")])],1)],1)],1):e._e(),r("el-table",{staticClass:"myList-table",attrs:{data:e.projectMembers}},[r("el-table-column",{attrs:{label:"用户名",prop:"name"}}),r("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),r("el-table-column",{attrs:{label:"管理员",prop:"description"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0,disabled:!e.isAdmin},on:{change:function(r){return e.executeChangeProjectMemberRole(r,t.row,"projectMemberForm")}},model:{value:t.row.is_admin,callback:function(r){e.$set(t.row,"is_admin",r)},expression:"member.row.is_admin"}})]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",iconColor:"red",title:"确定删除该成员吗？"},on:{onConfirm:function(r){return e.removeProjectMember(t.row)}}},[r("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",disabled:!e.isAdmin},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1)])},y=[],_=(r("4160"),r("159b"),{props:{projectId:{type:Number,default:0},isAdmin:{type:Boolean,default:!1},size:{type:String,default:"50%"},direction:{type:String,default:"rtl"},open:{type:Boolean,default:!1},withHeader:{type:Boolean,default:!1},title:{type:String,default:"项目成员"}},data:function(){return{projectMembers:[],systemMembers:[],projectMemberCreatedOpen:!1,projectMemberForm:{user_id:"",is_admin:""},projectMemberRules:{user_id:[{type:"number",required:!0,message:"请选择成员",trigger:"change",min:1}]}}},watch:{open:function(e){e&&(this.projectId>0?this.$nextTick(this.updatedProjectAndSystemMembers()):this.cancelMember())}},computed:{open_:{get:function(){return this.open},set:function(e){this.projectMembers=[],this.systemMembers=[],this.projectMemberCreatedOpen=!1,this.$emit("changeMemberProject",e)}}},methods:{cancelMember:function(){this.open_=!1},getProjectMembers:function(e){var t=this;this.$oakRequest.get(this.$oakBackendApis.project.members(e),this.projectForm).then((function(e){if(200===e.status){var r=e.data.members;Object.keys(r).length>0?t.projectMembers=r:t.projectMembers=[]}}))},getSystemMembers:function(){var e=this;this.$oakRequest.get(this.$oakBackendApis.common.members).then((function(t){if(200===t.status){var r=t.data.members;Object.keys(r).length>0?e.systemMembers=r:e.systemMembers=[]}}))},openCreateMember:function(){var e=[];this.projectMembers.forEach((function(t){e.push(t.email)})),this.systemMembers=this.systemMembers.filter((function(t){return!1===e.includes(t.email)})),this.projectMemberCreatedOpen=!0},executeSaveProjectMember:function(e){var t=this;this.$refs[e].validate((function(r){if(!r)return!1;t.$oakRequest.post(t.$oakBackendApis.project.createdMember(t.projectId),t.projectMemberForm).then((function(r){200===r.status&&(t.$message({type:"success",message:"添加成员成功"}),t.updatedProjectAndSystemMembers(),t.cancelSaveProjectMember(e))}))}))},executeChangeProjectMemberRole:function(e,t,r){var s=this;this.$oakRequest.put(this.$oakBackendApis.project.updatedMember(this.projectId,t.id),{is_admin:e}).then((function(e){200===e.status&&(s.$message({type:"success",message:"修改成功"}),s.updatedProjectAndSystemMembers(),s.cancelSaveProjectMember(r))}))},removeProjectMember:function(e){var t=this;this.$oakRequest.delete(this.$oakBackendApis.project.deletedMember(this.projectId,e.id)).then((function(e){200===e.status&&(t.$message({type:"success",message:"删除成功"}),t.getProjectMembers(t.projectId))}))},updatedProjectAndSystemMembers:function(){this.getProjectMembers(this.projectId),this.getSystemMembers()},cancelSaveProjectMember:function(e){this.$refs[e].resetFields(),this.projectMemberCreatedOpen=!1}}}),x=_,j=(r("a62a"),Object(c["a"])(x,b,y,!1,null,"4fe52f78",null)),P=j.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-drawer",{staticClass:"project-plugin-drawer",attrs:{visible:e.open_,direction:e.direction,"with-header":e.withHeader,size:e.size,projectId:e.projectId,isAdmin:e.isAdmin},on:{"update:visible":function(t){e.open_=t}}},[r("p",{staticClass:"drawer-title"},[r("span",{domProps:{innerHTML:e._s(e.title)}}),r("i",{staticClass:"el-icon-close fr",on:{click:e.cancelPlugin}})]),e.isAdmin?r("div",[r("el-button",{staticClass:"fr",staticStyle:{"margin-right":"32px"},attrs:{type:"primary",size:"small"},on:{click:e.openCreatedPlugin}},[e._v("添加")])],1):e._e(),e.pluginSaveOpen?r("div",{staticStyle:{background:"#fafafa",padding:"12px"}},[r("h3",{staticStyle:{"font-size":"16px","font-weight":"bold","margin-bottom":"20px","margin-left":"12px"}},[e._v(e._s(e.pluginSaveTitle))]),r("div",{staticStyle:{"text-align":"center"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.pluginSaveRadio,callback:function(t){e.pluginSaveRadio=t},expression:"pluginSaveRadio"}},[r("el-radio-button",{attrs:{label:"BASIS"}},[e._v("插件信息")]),r("el-radio-button",{attrs:{label:"CONFIG"}},[e._v("插件配置")])],1)],1),r("div",{staticStyle:{margin:"20px"}},[r("el-form",{ref:"pluginForms",attrs:{"label-width":"160px",model:e.pluginForms,size:"small",rules:e.pluginRules,"label-position":e.pluginSaveRadio}},[r("input",{attrs:{type:"hidden",name:""}}),r("el-input",{attrs:{type:"hidden"},model:{value:e.pluginForms.id,callback:function(t){e.$set(e.pluginForms,"id",t)},expression:"pluginForms.id"}}),"BASIS"===e.pluginSaveRadio?r("div",[r("el-form-item",{attrs:{label:"选择插件",prop:"name"}},[r("el-select",{staticStyle:{width:"265px"},attrs:{placeholder:"选择插件",disabled:"UPDATED"===e.pluginSaveAction,filterable:""},on:{change:e.changeCreatedPlugin},model:{value:e.pluginForms.name,callback:function(t){e.$set(e.pluginForms,"name",t)},expression:"pluginForms.name"}},e._l(e.systemPlugins,(function(t){return r("el-option",{attrs:{label:t.name,value:t.name}},[r("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.type))])])})),1)],1),r("el-form-item",{attrs:{label:"插件类型",prop:"type"}},[r("el-input",{attrs:{disabled:""},model:{value:e.pluginForms.type,callback:function(t){e.$set(e.pluginForms,"type",t)},expression:"pluginForms.type"}})],1),r("el-form-item",{attrs:{label:"插件描述",prop:"description"}},[r("el-input",{attrs:{disabled:""},model:{value:e.pluginForms.description,callback:function(t){e.$set(e.pluginForms,"description",t)},expression:"pluginForms.description"}})],1)],1):e._e(),"CONFIG"===e.pluginSaveRadio?r("div",e._l(e.pluginForms.config,(function(t,s){return r("el-form-item",{attrs:{label:s,prop:"config."+s+".value",rules:t.validateRules}},["array"===t.type?r("el-select",{attrs:{placeholder:"选择配置"},model:{value:e.pluginForms.config[s].value,callback:function(t){e.$set(e.pluginForms.config[s],"value",t)},expression:"pluginForms.config[configOptionName].value"}},e._l(t.options,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1):e._e(),"number"===t.type||"integer"===t.type?r("el-input",{model:{value:e.pluginForms.config[s].value,callback:function(t){e.$set(e.pluginForms.config[s],"value",e._n(t))},expression:"pluginForms.config[configOptionName].value"}}):e._e(),"string"===t.type?r("el-input",{model:{value:e.pluginForms.config[s].value,callback:function(t){e.$set(e.pluginForms.config[s],"value",t)},expression:"pluginForms.config[configOptionName].value"}}):e._e()],1)})),1):e._e()],1)],1),r("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[r("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(t){return e.executeSaveProjectPlugin("pluginForms")}}},[e._v("提交 ")]),r("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){return e.cancelSaveProjectPlugin("pluginForms")}}},[e._v("取消")])],1)]):e._e(),r("div",{staticStyle:{padding:"0 32px","margin-top":"24px"}},[r("el-table",{attrs:{data:e.projectPlugins}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",size:"small"}},e._l(t.row.config,(function(t,s){return r("el-form-item",{attrs:{label:s}},[r("span",[e._v(e._s(t))])])})),1)]}}])}),r("el-table-column",{attrs:{label:"插件名称",prop:"name",width:"120px"}}),r("el-table-column",{attrs:{label:"描述",prop:"description"}}),r("el-table-column",{attrs:{label:"操作",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.isAdmin},on:{click:function(r){return e.openUpdatedPlugin(t.row)}}},[e._v("编辑 ")]),r("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",iconColor:"red",title:"确定删除该插件吗？"},on:{onConfirm:function(r){return e.executeRemoveProjectPlugin(t.row,"pluginForms")}}},[r("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",disabled:!e.isAdmin},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1)])},k=[],C=(r("a4d3"),r("e01a"),r("99af"),r("4fad"),r("3835")),w={name:"plugin",props:{projectId:{type:Number,default:0},isAdmin:{type:Boolean,default:!1},size:{type:String,default:"50%"},direction:{type:String,default:"rtl"},open:{type:Boolean,default:!1},withHeader:{type:Boolean,default:!1},title:{type:String,default:"项目插件"}},data:function(){return{pluginSaveOpen:!1,pluginSaveTitle:"",pluginSaveRadio:"BASIS",pluginSaveAction:"",projectPlugins:[],systemPlugins:[],pluginUpdatedOpen:!1,pluginConfigs:{},pluginForms:{id:0,name:"",type:"",description:"",config:{}},pluginRules:{name:[{required:!0,trigger:"change",message:"插件名称不合法"}],type:[{required:!0,trigger:"change",message:"插件类型不合法"}],description:[{required:!0,trigger:"change",message:"插件描述不合法"}]}}},watch:{open:function(e){e&&(this.projectId>0?this.updatedProjectAndSystemPlugins():this.cancelPlugin())},pluginSaveRadio:function(e){this.$refs["pluginForms"]&&this.$refs["pluginForms"].clearValidate()}},computed:{open_:{get:function(){return this.open},set:function(e){this.projectPlugins=[],this.systemPlugins=[],this.pluginSaveOpen=!1,this.$emit("changePluginProject",e)}}},methods:{cancelPlugin:function(){this.open_=!1},getSystemPlugins:function(){var e=this;this.$oakRequest.get(this.$oakBackendApis.common.plugins).then((function(t){if(200===t.status){var r=t.data.plugins;Object.keys(r).length>0?e.systemPlugins=r:e.systemPlugins=[]}}))},getProjectPlugins:function(e){var t=this;this.$oakRequest.get(this.$oakBackendApis.project.plugins(e)).then((function(e){if(200===e.status){var r=e.data.plugins;Object.keys(r).length>0?t.projectPlugins=r:t.projectPlugins=[]}}))},cancelSaveProjectPlugin:function(e){this.updatedProjectAndSystemPlugins(),this.$refs[e].resetFields(),this.pluginSaveOpen=!1},executeSaveProjectPlugin:function(e){var t=this;this.$refs[e].validate((function(r){if(!r)return!1;for(var s=JSON.parse(JSON.stringify(t.pluginForms)),n=0,a=Object.entries(s.config);n<a.length;n++){var o=Object(C["a"])(a[n],2),i=o[0],l=o[1];s.config[i]=l.value}"UPDATED"===t.pluginSaveAction&&t.$oakRequest.put(t.$oakBackendApis.project.updatedPlugin(t.projectId,s.id),s).then((function(r){200===r.status&&(t.$message({type:"success",message:"编辑插件成功"}),t.cancelSaveProjectPlugin(e))})),"CREATED"===t.pluginSaveAction&&t.$oakRequest.post(t.$oakBackendApis.project.createdPlugin(t.projectId),s).then((function(r){200===r.status&&(t.$message({type:"success",message:"添加插件成功"}),t.cancelSaveProjectPlugin(e))}))}))},executeRemoveProjectPlugin:function(e,t){var r=this;this.$oakRequest.delete(this.$oakBackendApis.project.deletedPlugin(this.projectId,e.id)).then((function(e){200===e.status&&r.$message({type:"success",message:"删除插件成功"}),r.cancelSaveProjectPlugin(t)}))},createdAutoValidateAndData:function(e){this.pluginForms.id=e.id||0,this.pluginForms.name=e.name,this.pluginForms.type=e.type,this.pluginForms.description=e.description,this.pluginForms.config={};for(var t=0,r=Object.entries(e.config);t<r.length;t++){var s=Object(C["a"])(r[t],2),n=s[0],a=s[1],o={};o.value=a.default,o.type=a.type,o.options=a.options,o.validateRules=[];var i={required:!0,trigger:"change",type:a.type,min:a.minLength||a.minimum,max:a.maxLength||a.maximum};"string"===i.type&&(i.message="".concat(n," 不合法，配置长度为（").concat(i.min," - ").concat(i.max,"）")),"number"!==i.type&&"integer"!==i.type||(i.message="".concat(n," 不合法，取值范围为（").concat(i.min," - ").concat(i.max,"）")),o.validateRules.push(i),this.$set(this.pluginForms.config,n,o)}},openUpdatedPlugin:function(e){var t=this.systemPlugins.filter((function(t){return t.name===e.name}));if(t.length>0){var r=t[0];r.id=e.id;for(var s=0,n=Object.entries(r.config);s<n.length;s++){var a=Object(C["a"])(n[s],1),o=a[0];r.config[o].default=e.config[o]}this.createdAutoValidateAndData(r),this.pluginSaveAction="UPDATED",this.pluginSaveRadio="CONFIG",this.pluginSaveOpen=!0,this.pluginSaveTitle="编辑插件【".concat(r.name,"】")}},openCreatedPlugin:function(){var e=[];this.projectPlugins.forEach((function(t){e.push(t.name)})),this.systemPlugins=this.systemPlugins.filter((function(t){return!1===e.includes(t.name)}));var t=this.systemPlugins[0];this.createdAutoValidateAndData(t),this.pluginSaveAction="CREATED",this.pluginSaveRadio="BASIS",this.pluginSaveOpen=!0,this.pluginSaveTitle="新增插件【".concat(t.name,"】")},changeCreatedPlugin:function(e){var t=this.systemPlugins.filter((function(t){return t.name===e}));t.length>0&&this.createdAutoValidateAndData(t[0])},updatedProjectAndSystemPlugins:function(){this.getProjectPlugins(this.projectId),this.getSystemPlugins()}}},F=w,R=(r("2a2d"),Object(c["a"])(F,S,k,!1,null,"8216e8d6",null)),A=R.exports,$={name:"projects",components:{ProjectCreated:p,ProjectUpdated:p,ProjectDetail:v,ProjectMember:P,ProjectPlugin:A},data:function(){return{optionCreatedProjectOpen:!1,optionCreatedProjectId:0,optionUpdatedProjectOpen:!1,optionUpdatedProjectId:0,optionDetailProjectOpen:!1,optionDetailProjectId:0,optionMemberProjectOpen:!1,optionMemberProjectId:0,optionMemberProjectAdmin:!1,optionPluginProjectOpen:!1,optionPluginProjectId:0,optionPluginProjectAdmin:!1,projectCount:0,projectLists:[],projectTableLists:[],projectQueryData:{name:""},pageSize:10,pageNum:1,pageSizes:[10,15,20]}},created:function(){this.getProjects()},methods:{changePageSize:function(e){this.pageSize=e,this.initTable()},changePageNumber:function(e){this.pageNum=e,this.initTable()},initTable:function(){this.projectTableLists=[],this.pageNum=this.pageNum>1?this.pageNum:1;var e=(this.pageNum-1)*this.pageSize,t=e+this.pageSize;t>this.projectCount&&(t=this.projectCount);for(var r=e;r<t;r++)this.projectLists[r]&&this.projectTableLists.push(this.projectLists[r])},getProjects:function(){var e=this;this.$oakRequest.get(this.$oakBackendApis.common.projects).then((function(t){if(200===t.status){var r=t.data.projects,s=Object.keys(r).length;s>0?(e.projectLists=r,e.projectCount=s,e.pageNum=1,e.initTable()):(e.projectLists=[],e.projectCount=0)}}))},openCreatedProject:function(){this.optionCreatedProjectOpen=!0,this.optionCreatedProjectId=0},changeCreatedProject:function(e){this.optionCreatedProjectOpen=!1,this.optionCreatedProjectId=0,this.getProjects()},openUpdatedProject:function(e){this.optionUpdatedProjectOpen=!0,this.optionUpdatedProjectId=e.id},changeUpdatedProject:function(e){this.optionUpdatedProjectOpen=!1,this.optionUpdatedProjectId=0,this.getProjects()},openDetailProject:function(e){this.optionDetailProjectOpen=!0,this.optionDetailProjectId=e.id},changeDetailProject:function(e){this.optionDetailProjectOpen=!1,this.optionDetailProjectId=0},openMemberProject:function(e){this.optionMemberProjectOpen=!0,this.optionMemberProjectId=e.id,this.optionMemberProjectAdmin=1===e.is_admin},changeMemberProject:function(e){this.optionMemberProjectOpen=!1,this.optionMemberProjectId=0,this.optionMemberProjectAdmin=!1},openPluginProject:function(e){this.optionPluginProjectOpen=!0,this.optionPluginProjectId=e.id,this.optionPluginProjectAdmin=1===e.is_admin},changePluginProject:function(e){this.optionPluginProjectOpen=!1,this.optionPluginProjectId=0,this.optionPluginProjectAdmin=!1},redirectRouters:function(e){this.$router.push({name:"routers",params:{projectId:e.id}})},removeProject:function(e){var t=this;this.$oakRequest.delete(this.$oakBackendApis.project.deleted(e.id)).then((function(e){200===e.status&&(t.$message({type:"success",message:"删除项目成功"}),t.getProjects())}))},queryProjectByName:function(){var e=this.projectQueryData.name.trim();e?(this.projectLists=this.projectLists.filter((function(t){return t.name.includes(e)})),this.initTable()):this.getProjects()}}},O=$,I=(r("e0d3"),r("dc19"),Object(c["a"])(O,s,n,!1,null,"a8d7dd50",null));t["default"]=I.exports},7156:function(e,t,r){var s=r("861d"),n=r("d2bb");e.exports=function(e,t,r){var a,o;return n&&"function"==typeof(a=t.constructor)&&a!==r&&s(o=a.prototype)&&o!==r.prototype&&n(e,o),e}},"740e":function(e,t,r){},"746f":function(e,t,r){var s=r("428f"),n=r("5135"),a=r("e538"),o=r("9bf2").f;e.exports=function(e){var t=s.Symbol||(s.Symbol={});n(t,e)||o(t,e,{value:a.f(e)})}},8422:function(e,t,r){e.exports=r.p+"img/empty-background.dd691560.png"},"859d":function(e,t,r){"use strict";var s=r("25d3"),n=r.n(s);n.a},"8aa5":function(e,t,r){"use strict";var s=r("6547").charAt;e.exports=function(e,t,r){return t+(r?s(e,t).length:1)}},"8c5d":function(e,t,r){},"8cd2":function(e,t,r){"use strict";var s=r("bff1"),n=r.n(s);n.a},9263:function(e,t,r){"use strict";var s=r("ad6d"),n=r("9f7f"),a=RegExp.prototype.exec,o=String.prototype.replace,i=a,l=function(){var e=/a/,t=/b*/g;return a.call(e,"a"),a.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),c=n.UNSUPPORTED_Y||n.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],p=l||u||c;p&&(i=function(e){var t,r,n,i,p=this,d=c&&p.sticky,m=s.call(p),f=p.source,g=0,h=e;return d&&(m=m.replace("y",""),-1===m.indexOf("g")&&(m+="g"),h=String(e).slice(p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==e[p.lastIndex-1])&&(f="(?: "+f+")",h=" "+h,g++),r=new RegExp("^(?:"+f+")",m)),u&&(r=new RegExp("^"+f+"$(?!\\s)",m)),l&&(t=p.lastIndex),n=a.call(d?r:p,h),d?n?(n.input=n.input.slice(g),n[0]=n[0].slice(g),n.index=p.lastIndex,p.lastIndex+=n[0].length):p.lastIndex=0:l&&n&&(p.lastIndex=p.global?n.index+n[0].length:t),u&&n&&n.length>1&&o.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n}),e.exports=i},"92c6":function(e,t,r){},"93ba":function(e,t,r){"use strict";var s=r("92c6"),n=r.n(s);n.a},"94e2":function(e,t,r){},"971f":function(e,t,r){"use strict";var s=r("8c5d"),n=r.n(s);n.a},"9f7f":function(e,t,r){"use strict";var s=r("d039");function n(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=s((function(){var e=n("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=s((function(){var e=n("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a0ee:function(e,t,r){},a4d3:function(e,t,r){"use strict";var s=r("23e7"),n=r("da84"),a=r("d066"),o=r("c430"),i=r("83ab"),l=r("4930"),c=r("fdbf"),u=r("d039"),p=r("5135"),d=r("e8b5"),m=r("861d"),f=r("825a"),g=r("7b0b"),h=r("fc6a"),v=r("c04e"),b=r("5c6c"),y=r("7c73"),_=r("df75"),x=r("241c"),j=r("057f"),P=r("7418"),S=r("06cf"),k=r("9bf2"),C=r("d1e7"),w=r("9112"),F=r("6eeb"),R=r("5692"),A=r("f772"),$=r("d012"),O=r("90e3"),I=r("b622"),E=r("e538"),q=r("746f"),T=r("d44e"),z=r("69f3"),U=r("b727").forEach,D=A("hidden"),N="Symbol",B="prototype",M=I("toPrimitive"),L=z.set,H=z.getterFor(N),Q=Object[B],G=n.Symbol,V=a("JSON","stringify"),Z=S.f,Y=k.f,K=j.f,X=C.f,W=R("symbols"),J=R("op-symbols"),ee=R("string-to-symbol-registry"),te=R("symbol-to-string-registry"),re=R("wks"),se=n.QObject,ne=!se||!se[B]||!se[B].findChild,ae=i&&u((function(){return 7!=y(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(e,t,r){var s=Z(Q,t);s&&delete Q[t],Y(e,t,r),s&&e!==Q&&Y(Q,t,s)}:Y,oe=function(e,t){var r=W[e]=y(G[B]);return L(r,{type:N,tag:e,description:t}),i||(r.description=t),r},ie=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof G},le=function(e,t,r){e===Q&&le(J,t,r),f(e);var s=v(t,!0);return f(r),p(W,s)?(r.enumerable?(p(e,D)&&e[D][s]&&(e[D][s]=!1),r=y(r,{enumerable:b(0,!1)})):(p(e,D)||Y(e,D,b(1,{})),e[D][s]=!0),ae(e,s,r)):Y(e,s,r)},ce=function(e,t){f(e);var r=h(t),s=_(r).concat(fe(r));return U(s,(function(t){i&&!pe.call(r,t)||le(e,t,r[t])})),e},ue=function(e,t){return void 0===t?y(e):ce(y(e),t)},pe=function(e){var t=v(e,!0),r=X.call(this,t);return!(this===Q&&p(W,t)&&!p(J,t))&&(!(r||!p(this,t)||!p(W,t)||p(this,D)&&this[D][t])||r)},de=function(e,t){var r=h(e),s=v(t,!0);if(r!==Q||!p(W,s)||p(J,s)){var n=Z(r,s);return!n||!p(W,s)||p(r,D)&&r[D][s]||(n.enumerable=!0),n}},me=function(e){var t=K(h(e)),r=[];return U(t,(function(e){p(W,e)||p($,e)||r.push(e)})),r},fe=function(e){var t=e===Q,r=K(t?J:h(e)),s=[];return U(r,(function(e){!p(W,e)||t&&!p(Q,e)||s.push(W[e])})),s};if(l||(G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=O(e),r=function(e){this===Q&&r.call(J,e),p(this,D)&&p(this[D],t)&&(this[D][t]=!1),ae(this,t,b(1,e))};return i&&ne&&ae(Q,t,{configurable:!0,set:r}),oe(t,e)},F(G[B],"toString",(function(){return H(this).tag})),F(G,"withoutSetter",(function(e){return oe(O(e),e)})),C.f=pe,k.f=le,S.f=de,x.f=j.f=me,P.f=fe,E.f=function(e){return oe(I(e),e)},i&&(Y(G[B],"description",{configurable:!0,get:function(){return H(this).description}}),o||F(Q,"propertyIsEnumerable",pe,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:G}),U(_(re),(function(e){q(e)})),s({target:N,stat:!0,forced:!l},{for:function(e){var t=String(e);if(p(ee,t))return ee[t];var r=G(t);return ee[t]=r,te[r]=t,r},keyFor:function(e){if(!ie(e))throw TypeError(e+" is not a symbol");if(p(te,e))return te[e]},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),s({target:"Object",stat:!0,forced:!l,sham:!i},{create:ue,defineProperty:le,defineProperties:ce,getOwnPropertyDescriptor:de}),s({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:me,getOwnPropertySymbols:fe}),s({target:"Object",stat:!0,forced:u((function(){P.f(1)}))},{getOwnPropertySymbols:function(e){return P.f(g(e))}}),V){var ge=!l||u((function(){var e=G();return"[null]"!=V([e])||"{}"!=V({a:e})||"{}"!=V(Object(e))}));s({target:"JSON",stat:!0,forced:ge},{stringify:function(e,t,r){var s,n=[e],a=1;while(arguments.length>a)n.push(arguments[a++]);if(s=t,(m(t)||void 0!==e)&&!ie(e))return d(t)||(t=function(e,t){if("function"==typeof s&&(t=s.call(this,e,t)),!ie(t))return t}),n[1]=t,V.apply(null,n)}})}G[B][M]||w(G[B],M,G[B].valueOf),T(G,N),$[D]=!0},a62a:function(e,t,r){"use strict";var s=r("740e"),n=r.n(s);n.a},a630:function(e,t,r){var s=r("23e7"),n=r("4df4"),a=r("1c7e"),o=!a((function(e){Array.from(e)}));s({target:"Array",stat:!0,forced:o},{from:n})},a9e3:function(e,t,r){"use strict";var s=r("83ab"),n=r("da84"),a=r("94ca"),o=r("6eeb"),i=r("5135"),l=r("c6b6"),c=r("7156"),u=r("c04e"),p=r("d039"),d=r("7c73"),m=r("241c").f,f=r("06cf").f,g=r("9bf2").f,h=r("58a8").trim,v="Number",b=n[v],y=b.prototype,_=l(d(y))==v,x=function(e){var t,r,s,n,a,o,i,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=h(c),t=c.charCodeAt(0),43===t||45===t){if(r=c.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:s=2,n=49;break;case 79:case 111:s=8,n=55;break;default:return+c}for(a=c.slice(2),o=a.length,i=0;i<o;i++)if(l=a.charCodeAt(i),l<48||l>n)return NaN;return parseInt(a,s)}return+c};if(a(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var j,P=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof P&&(_?p((function(){y.valueOf.call(r)})):l(r)!=v)?c(new b(x(t)),r,P):x(t)},S=s?m(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;S.length>k;k++)i(b,j=S[k])&&!i(P,j)&&g(P,j,f(b,j));P.prototype=y,y.constructor=P,o(n,v,P)}},ab13:function(e,t,r){var s=r("b622"),n=s("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(s){}}return!1}},ac1f:function(e,t,r){"use strict";var s=r("23e7"),n=r("9263");s({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(e,t,r){"use strict";var s=r("825a");e.exports=function(){var e=s(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b0c0:function(e,t,r){var s=r("83ab"),n=r("9bf2").f,a=Function.prototype,o=a.toString,i=/^\s*function ([^ (]*)/,l="name";s&&!(l in a)&&n(a,l,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(e){return""}}})},bff1:function(e,t,r){},c775:function(e,t,r){"use strict";var s=r("a0ee"),n=r.n(s);n.a},c8d2:function(e,t,r){var s=r("d039"),n=r("5899"),a="​᠎";e.exports=function(e){return s((function(){return!!n[e]()||a[e]()!=a||n[e].name!==e}))}},caad:function(e,t,r){"use strict";var s=r("23e7"),n=r("4d64").includes,a=r("44d2"),o=r("ae40"),i=o("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:!i},{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},cec7:function(e,t,r){"use strict";var s=r("140a"),n=r.n(s);n.a},d28b:function(e,t,r){var s=r("746f");s("iterator")},d784:function(e,t,r){"use strict";r("ac1f");var s=r("6eeb"),n=r("d039"),a=r("b622"),o=r("9263"),i=r("9112"),l=a("species"),c=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),p=a("replace"),d=function(){return!!/./[p]&&""===/./[p]("a","$0")}(),m=!n((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));e.exports=function(e,t,r,p){var f=a(e),g=!n((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),h=g&&!n((function(){var t=!1,r=/a/;return"split"===e&&(r={},r.constructor={},r.constructor[l]=function(){return r},r.flags="",r[f]=/./[f]),r.exec=function(){return t=!0,null},r[f](""),!t}));if(!g||!h||"replace"===e&&(!c||!u||d)||"split"===e&&!m){var v=/./[f],b=r(f,""[e],(function(e,t,r,s,n){return t.exec===o?g&&!n?{done:!0,value:v.call(t,r,s)}:{done:!0,value:e.call(r,t,s)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=b[0],_=b[1];s(String.prototype,e,y),s(RegExp.prototype,f,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)})}p&&i(RegExp.prototype[f],"sham",!0)}},dbb4:function(e,t,r){var s=r("23e7"),n=r("83ab"),a=r("56ef"),o=r("fc6a"),i=r("06cf"),l=r("8418");s({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(e){var t,r,s=o(e),n=i.f,c=a(s),u={},p=0;while(c.length>p)r=n(s,t=c[p++]),void 0!==r&&l(u,t,r);return u}})},dc19:function(e,t,r){"use strict";var s=r("6572"),n=r.n(s);n.a},dd41:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"apilist-container"},[s("div",{staticClass:"apilist-top"},[s("el-button",{staticClass:"apilist-add fl",staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.openCreatedRouter}},[e._v("新建路由 ")]),s("el-form",{staticClass:"apilist-form-inline",attrs:{inline:!0,model:e.routerQueryData}},[s("el-select",{staticStyle:{"margin-right":"10px"},attrs:{filterable:"",placeholder:"请选择项目"},model:{value:e.selectedProjectId,callback:function(t){e.selectedProjectId=t},expression:"selectedProjectId"}},[s("el-option",{key:0,attrs:{label:"选择项目",value:0}}),e._l(e.projectLists,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],2),s("el-form-item",[s("el-input",{attrs:{placeholder:"输入路由名称","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryRouterByName(t)}},model:{value:e.routerQueryData.name,callback:function(t){e.$set(e.routerQueryData,"name",t)},expression:"routerQueryData.name"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.queryRouterByName}},[e._v("查询")])],1)],1)],1),e.routerCount>0?s("div",{staticClass:"apilist-table app-content"},[s("el-table",{staticClass:"list-table",attrs:{data:e.routerTableLists}},[s("el-table-column",{attrs:{width:"40px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("img",{staticStyle:{width:"24px",cursor:"pointer","vertical-align":"middle"},attrs:{src:r("1131"),alt:"plugin"},on:{click:function(r){return e.openPluginRouter(t.row)}}})])]}}],null,!1,367773378)}),s("el-table-column",{attrs:{label:"名称",width:"160px",prop:"name"}}),s("el-table-column",{attrs:{label:"路径"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("div",{class:"request-method-"+t.row.request_method},[e._v(e._s("DELETE"===t.row.request_method?"DEL":t.row.request_method)+" ")]),s("span",[e._v(e._s(t.row.request_path))])]),s("div")]}}],null,!1,3660194947)}),s("el-table-column",{attrs:{label:"所属项目",width:"100px",prop:"project_name"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.project_name))])]}}],null,!1,453935365)}),s("el-table-column",{attrs:{label:"环境",width:"100px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[1===parseInt(t.row["env_prod_publish"])?s("p",{staticStyle:{color:"#67C23A"}},[s("i",{staticClass:"dot dot-on"}),e._v(" 生产环境 ")]):s("p",[s("i",{staticClass:"dot dot-off"}),e._v(" 生产环境 ")]),1===parseInt(t.row["env_beta_publish"])?s("p",{staticStyle:{color:"#67C23A"}},[s("i",{staticClass:"dot dot-on"}),e._v(" 预发环境 ")]):s("p",[s("i",{staticClass:"dot dot-off"}),e._v(" 预发环境 ")]),1===parseInt(t.row["env_test_publish"])?s("p",{staticStyle:{color:"#67C23A"}},[s("i",{staticClass:"dot dot-on"}),e._v(" 测试环境 ")]):s("p",[s("i",{staticClass:"dot dot-off"}),e._v(" 测试环境 ")])])]}}],null,!1,2710788907)}),s("el-table-column",{attrs:{label:"操作",width:"450px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("el-dropdown",[s("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-right":"10px"}},[e._v(" 复制"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{nativeOn:{click:function(r){return e.executeCopyRoutePath(t.row,"PROD")}}},[s("div",[e._v("生产环境")])]),s("el-dropdown-item",{nativeOn:{click:function(r){return e.executeCopyRoutePath(t.row,"BETA")}}},[s("div",[e._v("预发环境")])]),s("el-dropdown-item",{nativeOn:{click:function(r){return e.executeCopyRoutePath(t.row,"TEST")}}},[s("div",[e._v("测试环境")])])],1)],1),s("el-dropdown",[s("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-right":"10px"}},[e._v(" 发布"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{nativeOn:{click:function(r){return e.executePushRouter(t.row,"PROD")}}},[s("div",[e._v("生产环境")])]),s("el-dropdown-item",{nativeOn:{click:function(r){return e.executePushRouter(t.row,"BETA")}}},[s("div",[e._v("预发环境")])]),s("el-dropdown-item",{nativeOn:{click:function(r){return e.executePushRouter(t.row,"TEST")}}},[s("div",[e._v("测试环境")])])],1)],1),s("el-dropdown",[s("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-right":"10px"}},[e._v(" 下线 "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{nativeOn:{click:function(r){return e.executePullRouter(t.row,"PROD")}}},[s("div",[e._v("生产环境")])]),s("el-dropdown-item",{nativeOn:{click:function(r){return e.executePullRouter(t.row,"BETA")}}},[s("div",[e._v("预发环境")])]),s("el-dropdown-item",{nativeOn:{click:function(r){return e.executePullRouter(t.row,"TEST")}}},[s("div",[e._v("测试环境")])])],1)],1),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){return e.openUpdatedRouter(t.row)}}},[e._v("编辑 ")]),s("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"success",size:"small"},on:{click:function(r){return e.openDetailRouter(t.row)}}},[e._v("详情 ")]),s("el-popconfirm",{staticStyle:{"margin-right":"10px"},attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",iconColor:"red",title:"确认删除该路由吗？"},on:{onConfirm:function(r){return e.removeRouter(t.row)}}},[s("el-button",{attrs:{slot:"reference",type:"danger",size:"small"},slot:"reference"},[e._v("删除")])],1)],1)]}}],null,!1,1075867951)})],1),s("el-pagination",{staticClass:"myGroup-pagination",attrs:{"current-page":e.pageNum,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.routerCount},on:{"size-change":e.changePageSize,"current-change":e.changePageNumber}})],1):s("div",{staticClass:"empty-content"},[s("img",{staticClass:"empty-background",attrs:{src:r("8422")}})]),s("router-detail",{attrs:{routerId:e.optionDetailRouterId,open:e.optionDetailRouterOpen},on:{changeDetailRouter:e.changeDetailRouter}}),s("router-plugin",{attrs:{routerId:e.optionPluginRouterId,open:e.optionPluginRouterOpen},on:{changePluginRouter:e.changePluginRouter}}),s("router-created",{attrs:{routerId:e.optionCreatedRouterId,open:e.optionCreatedRouterOpen,projectId:e.optionCreatedRouterProjectId},on:{changeCreatedRouter:e.changeCreatedRouter}}),s("router-updated",{attrs:{routerId:e.optionUpdatedRouterId,open:e.optionUpdatedRouterOpen},on:{changeUpdatedRouter:e.changeUpdatedRouter}})],1)},n=[],a=(r("99af"),r("4de4"),r("4160"),r("caad"),r("b0c0"),r("b64b"),r("2532"),r("498a"),r("159b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-drawer",{staticClass:"api-drawer",attrs:{visible:e.open_,direction:e.direction,"with-header":e.withHeader,size:e.size,routerId:e.routerId,projectId:e.projectId},on:{"update:visible":function(t){e.open_=t}}},[r("p",{staticClass:"api-drawer_tit"},[r("span",{domProps:{innerHTML:e._s(e.title)}}),r("i",{staticClass:"el-icon-close fr",on:{click:e.cancelSaveRouter}})]),r("el-steps",{attrs:{active:e.routerOperateSection,"finish-status":"success",simple:""}},[r("el-step",{attrs:{title:"前端配置"}}),r("el-step",{attrs:{title:"后端配置"}}),r("el-step",{attrs:{title:"响应结果"}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:1===e.routerOperateSection,expression:"routerOperateSection === 1"}],staticStyle:{"margin-top":"10px"}},[r("el-form",{ref:"routerRequestForms",attrs:{model:e.routerForms,rules:e.routerRequestRules,"label-width":"120px"}},[r("el-input",{attrs:{type:"hidden"},model:{value:e.routerForms.id,callback:function(t){e.$set(e.routerForms,"id",t)},expression:"routerForms.id"}}),r("el-form-item",{attrs:{label:"路由名称",prop:"name"}},[r("el-input",{staticClass:"api-drawer_input",attrs:{type:"text",placeholder:"路由名称",maxlength:"20","show-word-limit":""},model:{value:e.routerForms.name,callback:function(t){e.$set(e.routerForms,"name",t)},expression:"routerForms.name"}})],1),r("el-form-item",{attrs:{label:"选择项目",prop:"project_id",rules:e.routerRequestRules.project_id}},[r("el-select",{attrs:{filterable:"",clearable:"",placeholder:"选择项目",disabled:"UPDATED"===e.routerOperateAction},model:{value:e.routerForms.project_id,callback:function(t){e.$set(e.routerForms,"project_id",t)},expression:"routerForms.project_id"}},e._l(e.routerProjects,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"路由路径",prop:"request_path"}},[r("el-input",{staticClass:"api-drawer_input",attrs:{type:"text",placeholder:"路由路径"},model:{value:e.routerForms.request_path,callback:function(t){e.$set(e.routerForms,"request_path",t)},expression:"routerForms.request_path"}})],1),r("el-form-item",{attrs:{label:"请求方式",prop:"request_method",required:""}},[r("el-select",{model:{value:e.routerForms.request_method,callback:function(t){e.$set(e.routerForms,"request_method",t)},expression:"routerForms.request_method"}},[r("el-option",{attrs:{label:"GET",value:"GET"}}),r("el-option",{attrs:{label:"POST",value:"POST"}}),r("el-option",{attrs:{label:"PUT",value:"PUT"}}),r("el-option",{attrs:{label:"DELETE",value:"DELETE"}})],1)],1),r("el-form-item",{attrs:{label:"支持跨域",prop:"enable_cors"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},model:{value:e.routerForms.enable_cors,callback:function(t){e.$set(e.routerForms,"enable_cors",e._n(t))},expression:"routerForms.enable_cors"}})],1),r("el-form-item",{attrs:{label:"备注",prop:"description"}},[r("el-input",{attrs:{type:"textarea",placeholder:"输入备注信息"},model:{value:e.routerForms.description,callback:function(t){e.$set(e.routerForms,"description",t)},expression:"routerForms.description"}})],1),r("div",{staticClass:"fe-inline-table",staticStyle:{"padding-left":"120px",position:"relative"}},[r("span",{staticStyle:{position:"absolute",top:"14px",left:"55px","font-size":"14px",color:"#606266"}},[e._v("参数配置")]),r("el-table",{attrs:{data:e.routerForms.request_params,"empty-text":"暂无参数"}},[r("el-table-column",{attrs:{label:"参数名"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"request_params."+t.$index+".name",rules:e.routerRequestRules.request_params.name}},[r("el-input",{attrs:{placeholder:"请输入参数名",size:"small"},model:{value:e.routerForms.request_params[t.$index].name,callback:function(r){e.$set(e.routerForms.request_params[t.$index],"name",r)},expression:"routerForms.request_params[requestParams.$index].name"}})],1)]}}])}),r("el-table-column",{attrs:{label:"参数位置"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"request_params."+t.$index+".position",rules:e.routerRequestRules.request_params.position}},[r("el-select",{attrs:{size:"small"},model:{value:e.routerForms.request_params[t.$index].position,callback:function(r){e.$set(e.routerForms.request_params[t.$index],"position",r)},expression:"routerForms.request_params[requestParams.$index].position"}},[r("el-option",{attrs:{label:"Header",value:"HEADER"}}),r("el-option",{attrs:{label:"Path",value:"PATH"}}),r("el-option",{attrs:{label:"Query",value:"QUERY"}})],1)],1)]}}])}),r("el-table-column",{attrs:{label:"参数类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"request_params."+t.$index+".type",rules:e.routerRequestRules.request_params.type}},[r("el-select",{attrs:{size:"small"},model:{value:e.routerForms.request_params[t.$index].type,callback:function(r){e.$set(e.routerForms.request_params[t.$index],"type",r)},expression:"routerForms.request_params[requestParams.$index].type"}},[r("el-option",{attrs:{label:"STRING",value:"STRING"}}),r("el-option",{attrs:{label:"INTEGER",value:"INTEGER"}}),r("el-option",{attrs:{label:"BOOLEAN",value:"BOOLEAN"}}),r("el-option",{attrs:{label:"FLOAT",value:"FLOAT"}})],1)],1)]}}])}),r("el-table-column",{attrs:{label:"默认值"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"request_params."+t.$index+".default_val",rules:e.routerRequestRules.request_params.default_val}},[r("el-input",{attrs:{placeholder:"输入默认值",size:"small",disabled:1===e.routerForms.request_params[t.$index].required},model:{value:e.routerForms.request_params[t.$index].default_val,callback:function(r){e.$set(e.routerForms.request_params[t.$index],"default_val",r)},expression:"routerForms.request_params[requestParams.$index].default_val"}})],1)]}}])}),r("el-table-column",{attrs:{label:"必填"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"request_params."+t.$index+".required",rules:e.routerRequestRules.request_params.required}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},model:{value:e.routerForms.request_params[t.$index].required,callback:function(r){e.$set(e.routerForms.request_params[t.$index],"required",e._n(r))},expression:"routerForms.request_params[requestParams.$index].required"}})],1)]}}])}),r("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"request_params."+t.$index+".description",rules:e.routerRequestRules.request_params.description}},[r("el-input",{attrs:{placeholder:"请输入备注",size:"small"},model:{value:e.routerForms.request_params[t.$index].description,callback:function(r){e.$set(e.routerForms.request_params[t.$index],"description",r)},expression:"routerForms.request_params[requestParams.$index].description"}})],1)]}}])}),r("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.removeRequestParamsConfig(t)}}},[e._v("删除")])]}}])})],1),r("el-button",{attrs:{type:"text"},on:{click:e.additionRequestParamsConfig}},[e._v("新增参数配置")])],1)],1),r("div",{staticStyle:{"margin-bottom":"30px"}},[r("el-button",{staticStyle:{"margin-left":"120px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.nextSection("routerRequestForms")}}},[e._v("下一步 ")])],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:2===e.routerOperateSection,expression:"routerOperateSection === 2"}],staticStyle:{"margin-top":"30px"}},[r("el-form",{ref:"routerBackendForms",attrs:{model:e.routerForms,rules:e.routerBackendRules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"后端路径",prop:"backend_path"}},[r("el-input",{staticClass:"api-drawer_input",attrs:{placeholder:"请输入内容"},model:{value:e.routerForms.backend_path,callback:function(t){e.$set(e.routerForms,"backend_path",t)},expression:"routerForms.backend_path"}})],1),r("el-form-item",{attrs:{label:"请求方式",prop:"backend_method"}},[r("el-select",{model:{value:e.routerForms.backend_method,callback:function(t){e.$set(e.routerForms,"backend_method",t)},expression:"routerForms.backend_method"}},[r("el-option",{attrs:{label:"GET",value:"GET"}}),r("el-option",{attrs:{label:"POST",value:"POST"}}),r("el-option",{attrs:{label:"PUT",value:"PUT"}}),r("el-option",{attrs:{label:"DELETE",value:"DELETE"}})],1)],1),r("div",{staticClass:"fe-inline-table",staticStyle:{"padding-left":"120px",position:"relative"}},[r("span",{staticStyle:{position:"absolute",top:"14px",left:"55px","font-size":"14px",color:"#606266"}},[e._v("后端参数配置")]),r("el-table",{attrs:{data:e.routerForms.backend_params,"empty-text":"暂无参数"}},[r("el-table-column",{attrs:{label:"后端参数名"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"backend_params."+t.$index+".name",rules:e.routerBackendRules.backend_params.name}},[r("el-input",{attrs:{placeholder:"请输入参数名",size:"small"},model:{value:e.routerForms.backend_params[t.$index].name,callback:function(r){e.$set(e.routerForms.backend_params[t.$index],"name",r)},expression:"routerForms.backend_params[backendParam.$index].name"}})],1)]}}])}),r("el-table-column",{attrs:{label:"后端参数位置"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"backend_params."+t.$index+".position",rules:e.routerBackendRules.backend_params.position}},[r("el-select",{attrs:{size:"small"},model:{value:e.routerForms.backend_params[t.$index].position,callback:function(r){e.$set(e.routerForms.backend_params[t.$index],"position",r)},expression:"routerForms.backend_params[backendParam.$index].position"}},[r("el-option",{attrs:{label:"QUERY",value:"QUERY"}}),r("el-option",{attrs:{label:"HEADER",value:"HEADER"}}),r("el-option",{attrs:{label:"PATH",value:"PATH"}})],1)],1)]}}])}),r("el-table-column",{attrs:{label:"前端参数名",prop:"request_param_name"}}),r("el-table-column",{attrs:{label:"前端参数位置",prop:"request_param_position"}}),r("el-table-column",{attrs:{label:"前端参数类型",prop:"request_param_type"}})],1)],1),r("div",{staticClass:"fe-inline-table",staticStyle:{"padding-left":"120px",position:"relative"}},[r("span",{staticStyle:{position:"absolute",top:"14px",left:"55px","font-size":"14px",color:"#606266"}},[e._v("常量参数")]),r("el-table",{attrs:{data:e.routerForms.constant_params,"empty-text":"暂无参数"}},[r("el-table-column",{attrs:{label:"参数名"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"constant_params."+t.$index+".name",rules:e.routerBackendRules.constant_params.name}},[r("el-input",{attrs:{placeholder:"输入参数名",size:"small"},model:{value:e.routerForms.constant_params[t.$index].name,callback:function(r){e.$set(e.routerForms.constant_params[t.$index],"name",r)},expression:"routerForms.constant_params[constantParams.$index].name"}})],1)]}}])}),r("el-table-column",{attrs:{label:"参数位置"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"constant_params."+t.$index+".position",rules:e.routerBackendRules.constant_params.position}},[r("el-select",{attrs:{size:"small"},model:{value:e.routerForms.constant_params[t.$index].position,callback:function(r){e.$set(e.routerForms.constant_params[t.$index],"position",r)},expression:"routerForms.constant_params[constantParams.$index].position"}},[r("el-option",{attrs:{label:"HEADER",value:"HEADER"}}),r("el-option",{attrs:{label:"QUERY",value:"QUERY"}})],1)],1)]}}])}),r("el-table-column",{attrs:{label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"constant_params."+t.$index+".value",rules:e.routerBackendRules.constant_params.value}},[r("el-input",{attrs:{placeholder:"输入参数值",size:"small"},model:{value:e.routerForms.constant_params[t.$index].value,callback:function(r){e.$set(e.routerForms.constant_params[t.$index],"value",r)},expression:"routerForms.constant_params[constantParams.$index].value"}})],1)]}}])}),r("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"constant_params."+t.$index+".type",rules:e.routerBackendRules.constant_params.type}},[r("el-select",{attrs:{size:"small"},model:{value:e.routerForms.constant_params[t.$index].type,callback:function(r){e.$set(e.routerForms.constant_params[t.$index],"type",r)},expression:"routerForms.constant_params[constantParams.$index].type"}},[r("el-option",{attrs:{label:"STRING",value:"STRING"}}),r("el-option",{attrs:{label:"INTEGER",value:"INTEGER"}}),r("el-option",{attrs:{label:"BOOLEAN",value:"BOOLEAN"}}),r("el-option",{attrs:{label:"FLOAT",value:"FLOAT"}})],1)],1)]}}])}),r("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"constant_params."+t.$index+".description",rules:e.routerBackendRules.constant_params.description}},[r("el-input",{attrs:{placeholder:"请输入备注",size:"small"},model:{value:e.routerForms.constant_params[t.$index].description,callback:function(r){e.$set(e.routerForms.constant_params[t.$index],"description",r)},expression:"routerForms.constant_params[constantParams.$index].description"}})],1)]}}])}),r("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.removeConstantParamsConfig(t)}}},[e._v("删除 ")])]}}])})],1)],1),r("el-button",{staticStyle:{"margin-left":"120px"},attrs:{type:"text"},on:{click:e.additionConstantParamsConfig}},[e._v("新增参数配置 ")])],1),r("div",{staticStyle:{"margin-bottom":"30px"}},[r("el-button",{staticStyle:{"margin-left":"120px"},attrs:{size:"small"},on:{click:e.prevSection}},[e._v("上一步")]),r("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.nextSection("routerBackendForms")}}},[e._v(" 下一步 ")])],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:3===e.routerOperateSection,expression:"routerOperateSection === 3"}],staticStyle:{"margin-top":"30px"}},[r("el-form",{ref:"routerResponseForms",attrs:{model:e.routerForms,rules:e.routerResponseRules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"返回类型",prop:"response_type"}},[r("el-select",{model:{value:e.routerForms.response_type,callback:function(t){e.$set(e.routerForms,"response_type",t)},expression:"routerForms.response_type"}},[r("el-option",{attrs:{label:"application/json",value:"application/json"}}),r("el-option",{attrs:{label:"text/html",value:"text/html"}}),r("el-option",{attrs:{label:"text/xml",value:"text/xml"}})],1)],1),r("el-form-item",{attrs:{label:"成功响应示例",prop:"response_success"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.routerForms.response_success,callback:function(t){e.$set(e.routerForms,"response_success",t)},expression:"routerForms.response_success"}})],1),r("el-form-item",{attrs:{label:"失败响应示例",prop:"response_failure"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.routerForms.response_failure,callback:function(t){e.$set(e.routerForms,"response_failure",t)},expression:"routerForms.response_failure"}})],1),r("div",{staticClass:"fe-inline-table",staticStyle:{"padding-left":"120px",position:"relative"}},[r("span",{staticStyle:{position:"absolute",top:"14px",left:"45px","font-size":"14px",color:"#606266"}},[e._v("错误码配置")]),r("el-table",{attrs:{data:e.routerForms.response_codes,"empty-text":"暂无参数"}},[r("el-table-column",{attrs:{label:"错误码"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"response_codes."+t.$index+".code",rules:e.routerResponseRules.response_codes.code}},[r("el-input",{attrs:{placeholder:"输入参数名",size:"small"},model:{value:e.routerForms.response_codes[t.$index].code,callback:function(r){e.$set(e.routerForms.response_codes[t.$index],"code",e._n(r))},expression:"routerForms.response_codes[responseCode.$index].code"}})],1)]}}])}),r("el-table-column",{attrs:{label:"错误信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"response_codes."+t.$index+".message",rules:e.routerResponseRules.response_codes.message}},[r("el-input",{attrs:{placeholder:"输入错误信息",size:"small"},model:{value:e.routerForms.response_codes[t.$index].message,callback:function(r){e.$set(e.routerForms.response_codes[t.$index],"message",r)},expression:"routerForms.response_codes[responseCode.$index].message"}})],1)]}}])}),r("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"resizeInputClass",attrs:{prop:"response_codes."+t.$index+".description",rules:e.routerResponseRules.response_codes.description}},[r("el-input",{attrs:{placeholder:"输入备注",size:"small"},model:{value:e.routerForms.response_codes[t.$index].description,callback:function(r){e.$set(e.routerForms.response_codes[t.$index],"description",r)},expression:"routerForms.response_codes[responseCode.$index].description"}})],1)]}}])}),r("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.removeResponseCodesConfig(t)}}},[e._v("删除")])]}}])})],1),r("el-button",{attrs:{type:"text"},on:{click:e.additionResponseCodesConfig}},[e._v("新增参数配置")])],1)],1),r("div",{staticStyle:{"margin-bottom":"30px"}},[r("el-button",{staticStyle:{"margin-left":"120px"},attrs:{size:"small"},on:{click:e.prevSection}},[e._v("上一步")]),r("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.nextSection("routerResponseForms")}}},[e._v("完成 ")])],1)],1)],1)}),o=[],i=(r("a4d3"),r("e01a"),r("a9e3"),r("ac1f"),r("466d"),r("1276"),r("5530")),l={props:{routerId:{type:Number,default:0},projectId:{type:Number,default:0},size:{type:String,default:"60%"},direction:{type:String,default:"rtl"},open:{type:Boolean,default:!1},withHeader:{type:Boolean,default:!1}},computed:{open_:{get:function(){return this.open},set:function(e){"CREATED"===this.routerOperateAction&&this.$emit("changeCreatedRouter",e),"UPDATED"===this.routerOperateAction&&this.$emit("changeUpdatedRouter",e),this.routerForms={},this.routerOperateSection=1,this.$refs["routerRequestForms"].resetFields(),this.$refs["routerBackendForms"].resetFields(),this.$refs["routerResponseForms"].resetFields()}}},watch:{open:function(e){e&&this.initPageData()}},methods:{removeRequestParamsConfig:function(e){this.$delete(this.routerForms.request_params,e.$index)},additionRequestParamsConfig:function(e){var t=Object(i["a"])({name:"",position:"QUERY",type:"STRING",default_val:"",required:1,description:""},e||{});this.routerForms.request_params.push(t)},additionBackendParamsConfig:function(e){var t=Object(i["a"])({request_param_position:"QUERY",request_param_type:"STRING",request_param_name:"",name:"",request_param_required:1,position:"QUERY",request_param_description:"",request_param_default_val:""},e||{});this.routerForms.backend_params.push(t)},removeConstantParamsConfig:function(e){this.$delete(this.routerForms.constant_params,e.$index)},additionConstantParamsConfig:function(e){var t=Object(i["a"])({value:"",position:"HEADER",description:"",name:"",type:"STRING"},e||{});this.routerForms.constant_params.push(t)},removeResponseCodesConfig:function(e){this.$delete(this.routerForms.response_codes,e.$index)},additionResponseCodesConfig:function(e){var t=Object(i["a"])({code:"",message:"",description:""},e||{});this.routerForms.response_codes.push(t)},nextSection:function(e){var t=this;this.$refs[e].validate((function(e){return!!e&&(1===t.routerOperateSection?(0===t.routerForms.backend_path.length&&(t.routerForms.backend_path=t.routerForms.request_path),0===t.routerForms.backend_method.length&&(t.routerForms.backend_method=t.routerForms.request_method),t.routerForms.request_params.forEach((function(e){var r=t.routerForms.backend_params.filter((function(t){return t.request_param_position===e.position&&t.request_param_name===e.name}));0===r.length&&t.additionBackendParamsConfig({request_param_position:e.position,request_param_type:e.type,request_param_name:e.name,name:e.name,request_param_required:e.required,position:e.position,request_param_description:e.description,request_param_default_val:e.default_val})})),t.routerOperateSection+=1,!0):2===t.routerOperateSection?(t.routerOperateSection+=1,!0):3===t.routerOperateSection?("CREATED"===t.routerOperateAction&&t.$oakRequest.post(t.$oakBackendApis.router.created,t.routerForms).then((function(e){200===e.status&&(t.$message({type:"success",message:"创建路由成功"}),t.cancelSaveRouter())})),"UPDATED"===t.routerOperateAction&&t.$oakRequest.put(t.$oakBackendApis.router.updated(t.routerId),t.routerForms).then((function(e){200===e.status&&(t.$message({type:"success",message:"编辑路由成功"}),t.cancelSaveRouter())})),!0):void 0)}))},prevSection:function(){this.routerOperateSection>1?this.routerOperateSection-=1:this.routerOperateSection=1},initPageData:function(){this.getProjects(),this.routerId>0?(this.title="编辑路由",this.routerOperateAction="UPDATED",this.getRouter()):(this.title="新增路由",this.routerOperateAction="CREATED",this.projectId>0&&(this.routerForms.project_id=this.projectId),this.routerForms.id=0,this.routerForms.enable_cors=1,this.routerForms.request_method="GET",this.routerForms.response_type="application/json")},getRouter:function(){var e=this;this.$oakRequest.get(this.$oakBackendApis.router.query(this.routerId)).then((function(t){if(200===t.status){var r=t.data.router;Object.keys(r).length>0?(0===Object.keys(r.request_params).length&&(r.request_params=[]),0===Object.keys(r.backend_params).length&&(r.backend_params=[]),0===Object.keys(r.constant_params).length&&(r.constant_params=[]),0===Object.keys(r.response_codes).length&&(r.response_codes=[]),e.routerForms=r):e.routerForms={}}}))},getProjects:function(){var e=this;this.$oakRequest.get(this.$oakBackendApis.common.projects).then((function(t){if(200===t.status){var r=t.data.projects;Object.keys(r).length>0?e.routerProjects=r:e.routerProjects=[]}}))},cancelSaveRouter:function(){this.open_=!1}},data:function(){var e=this;return{title:"",routerOperateAction:"",routerOperateSection:1,routerProjects:[],commonHttpMethods:["GET","POST","PUT","DELETE"],commonVarPositions:["QUERY","HEADER","PATH"],commonVarTypes:["STRING","INTEGER","BOOLEAN","FLOAT"],commonContentTypes:["application/json","text/html","text/xml"],routerForms:{id:0,project_id:"",name:"",enable_cors:1,description:"",request_path:"",request_method:"GET",request_params:[],backend_path:"",backend_method:"",backend_params:[],constant_params:[],response_type:"application/json",response_success:"",response_failure:"",response_codes:[],response_schema:{},response_success_schema:{},response_failure_schema:{}},routerRequestRules:{id:[{type:"number",required:!0,min:0,message:"项目ID不合法",trigger:"change"}],project_id:[{type:"string",required:!0,validator:function(e,t,r){var s=Number(t);return 0===s?r(new Error("请选择项目或到【项目管理】中创建后选择")):r()},trigger:"change"}],name:[{type:"string",required:!0,min:3,max:20,message:"长度范围（3 - 20）",trigger:"blur"}],description:[{type:"string",required:!1,min:0,max:50,message:"长度范围（0 - 20）",trigger:"change"}],enable_cors:[{type:"enum",required:!0,enum:[0,1]}],request_path:[{type:"string",required:!0,validator:function(t,r,s){var n=/^\/[\\.a-zA-Z0-9-_]+(\/\{[a-zA-Z0-9-_]+\}|\/[\\.a-zA-Z0-9-_]+)*$/;n.test(r)||s(new Error('必须以 "/" 开头，支持大小写字母、数字 和 - _ . 等符号；并支持{}内输入变量，例如：/apioak/{hello}'));var a=/\{([a-zA-Z0-9-_])+\}/g,o=r.match(a)||[];return o.length>0&&o.forEach((function(t){var r=t.substring(1,t.length-1);if(r.length>20)return s(new Error("变量 ".concat(r," 超出长度限制（1 - 20）")));var n=e.routerForms.request_params.filter((function(e){return e.name===r&&"PATH"===e.position}));return 0===n.length?s(new Error("必须在参数配置中声明 PATH 变量 ".concat(r))):void 0})),s()},trigger:"blur"}],request_method:[{type:"string",trigger:"change",validator:function(t,r,s){return 0!==r.length&&e.commonHttpMethods.includes(r)?s():s(new Error("选择请求方式"))}}],request_params:{name:[{type:"string",trigger:"blur",validator:function(t,r,s){return r.length>20||r.length<1?s(new Error("长度范围（1 - 20）")):(e.$refs["routerRequestForms"].validateField("request_path"),s())}}],position:[{type:"string",trigger:"change",validator:function(t,r,s){return 0!==r.length&&e.commonVarPositions.includes(r)?(e.$refs["routerRequestForms"].validateField("request_path"),s()):s(new Error("选择参数位置"))}}],type:[{type:"string",trigger:"change",validator:function(t,r,s){return 0!==r.length&&e.commonVarTypes.includes(r)?s():s(new Error("选择参数类型"))}}],default_val:[{type:"string",trigger:"change",validator:function(t,r,s){var n=t.field.split(".")[1]||0,a=e.routerForms.request_params[n].required;return 1===a?s():0===r.length?s(new Error("输入默认值")):s()}}],required:[{type:"number",required:!0,min:0,max:1,message:"选择是否必填"}],description:[{type:"string",required:!1,min:0,max:50,message:"长度范围（0 - 50）"}]}},routerBackendRules:{backend_path:[{type:"string",required:!0,validator:function(t,r,s){var n=/^\/[\\.a-zA-Z0-9-_]+(\/\{[a-zA-Z0-9-_]+\}|\/[\\.a-zA-Z0-9-_]+)*$/;if(!n.test(r))return s(new Error('必须以 "/" 开头，支持大小写字母、数字 和 - _ . 等符号；并支持{}内输入变量，例如：/apioak/{hello}'));var a=/\{([a-zA-Z0-9-_])+\}/g,o=r.match(a)||[];return o.length>0&&o.forEach((function(t){var r=t.substring(1,t.length-1);if(r.length>20)return s(new Error("变量 ".concat(r," 超出长度限制（1 - 20）")));var n=e.routerForms.backend_params.filter((function(e){return e.name===r&&"PATH"===e.position}));return 0===n.length?s(new Error("必须在参数配置中映射 PATH 变量 ".concat(r))):void 0})),s()},trigger:"change"}],backend_method:[{type:"string",trigger:"change",validator:function(t,r,s){return 0!==r.length&&e.commonHttpMethods.includes(r)?s():s(new Error("选择请求方式"))}}],backend_params:{name:[{type:"string",trigger:"blur",validator:function(t,r,s){return r.length>20||r.length<1?s(new Error("长度范围（1 - 20）")):(e.$refs["routerBackendForms"].validateField("backend_path"),s())}}],position:[{type:"string",trigger:"change",validator:function(t,r,s){return 0!==r.length&&e.commonVarPositions.includes(r)?(e.$refs["routerBackendForms"].validateField("backend_path"),s()):s(new Error("选择参数位置"))}}],request_param_name:[{type:"string",required:!0,min:1,max:20,message:"长度范围（1 - 20）"}],request_param_position:[{type:"enum",required:!0,enum:this.commonVarPositions,message:"选择参数位置"}],request_param_type:[{type:"enum",required:!0,enum:this.commonVarTypes,message:"选择参数类型"}],request_param_description:[{type:"string",required:!1,min:0,max:50,message:"长度范围（0 - 50）"}]},constant_params:{name:[{type:"string",required:!0,min:1,max:20,message:"长度范围（1 - 20）",trigger:"blur"}],type:[{type:"enum",trigger:"change",validator:function(t,r,s){return 0!==r.length&&e.commonVarTypes.includes(r)?s():s(new Error("选择参数类型"))}}],position:[{type:"string",trigger:"change",validator:function(t,r,s){return 0!==r.length&&e.commonVarPositions.includes(r)?s():s(new Error("选择参数位置"))}}],value:[{type:"string",required:!0,min:1,max:20,message:"长度范围（1 - 20）",trigger:"blur"}],description:[{type:"string",required:!1,min:0,max:50,message:"长度范围（0 - 50）"}]}},routerResponseRules:{response_type:[{type:"string",trigger:"change",validator:function(t,r,s){return 0!==r.length&&e.commonContentTypes.includes(r)?s():s(new Error("选择响应类型"))}}],response_success:[{type:"string",required:!1}],response_failure:[{type:"string",required:!1}],response_codes:{code:[{type:"number",required:!0,min:200,max:1e5,message:"取值范围（200 - 100000）"}],message:[{type:"string",required:!0,min:1,max:20,message:"长度范围（1 - 10）"}],description:[{type:"string",required:!1,min:0,max:50,message:"长度范围（0 - 50）"}]},response_success_schema:[{type:"string",required:!1}],response_failure_schema:[{type:"string",required:!1}],response_schema:[{type:"string",required:!1}]}}}},c=l,u=(r("8cd2"),r("2877")),p=Object(u["a"])(c,a,o,!1,null,"911b1d4a",null),d=p.exports,m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-drawer",{staticClass:"api-drawer detail",attrs:{visible:e.open_,direction:e.direction,"with-header":e.withHeader,size:e.size,routerId:e.routerId,title:e.title},on:{"update:visible":function(t){e.open_=t}}},[r("p",{staticClass:"api-drawer_tit"},[r("span",{domProps:{innerHTML:e._s(e.title)}}),r("i",{staticClass:"el-icon-close fr",on:{click:e.cancelDetail}})]),r("div",{staticClass:"part-info api-detail-info"},[r("h3",[e._v("基本信息")]),r("div",[r("p",[r("span",{staticClass:"tit"},[e._v("所属项目")]),r("span",{staticClass:"cont"},[e._v(e._s(e.router.project_name))])]),r("p",[r("span",{staticClass:"tit"},[e._v("API名称")]),r("span",{staticClass:"cont"},[e._v(e._s(e.router.name))])]),r("p",[r("span",{staticClass:"tit"},[e._v("备注")]),r("span",{staticClass:"cont"},[e._v(e._s(e.router.description))])])]),r("h3",[e._v("前端信息")]),r("div",[r("p",[r("span",{staticClass:"tit"},[e._v("请求方式")]),r("span",{staticClass:"cont"},[e._v(e._s(e.router.request_method))])]),r("p",[r("span",{staticClass:"tit"},[e._v("请求路径")]),r("span",{staticClass:"cont"},[e._v(e._s(e.router.project_path+e.router.request_path))])]),r("p",[r("span",{staticClass:"tit"},[e._v("跨域请求")]),r("span",{staticClass:"cont"},[e._v(e._s(e.router.enable_cors?"启用":"禁用"))])]),r("p",[r("span",{staticClass:"tit"},[e._v("参数配置")]),r("el-table",{staticStyle:{"margin-left":"40px"},attrs:{size:"mini",data:e.router.request_params,"header-cell-style":"background:#fafafa"}},[r("el-table-column",{attrs:{label:"参数",prop:"name"}}),r("el-table-column",{attrs:{label:"位置",prop:"position"}}),r("el-table-column",{attrs:{label:"必填"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.required?"是":"否"))]}}])}),r("el-table-column",{attrs:{label:"类型",prop:"type"}}),r("el-table-column",{attrs:{label:"默认值",prop:"default_val"}}),r("el-table-column",{attrs:{label:"描述",prop:"description"}})],1)],1)]),r("h3",[e._v("后端信息")]),r("div",[r("p",[r("span",{staticClass:"tit"},[e._v("请求方式")]),r("span",{staticClass:"cont"},[e._v(e._s(e.router.backend_method))])]),r("p",[r("span",{staticClass:"tit"},[e._v("请求路径")]),r("span",{staticClass:"cont"},[e._v(e._s(e.router.backend_path))])]),r("p",[r("span",{staticClass:"tit"},[e._v("参数配置")]),r("el-table",{staticStyle:{"margin-left":"40px"},attrs:{size:"mini",data:e.router.backend_params,"header-cell-style":"background:#fafafa"}},[r("el-table-column",{attrs:{label:"后端参数名",prop:"request_param_name"}}),r("el-table-column",{attrs:{label:"后端参数位置",prop:"request_param_position"}}),r("el-table-column",{attrs:{label:"前端参数名",prop:"name"}}),r("el-table-column",{attrs:{label:"前端参数位置",prop:"position"}}),r("el-table-column",{attrs:{label:"前端参数类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(e.router.request_params[t.$index].type))])]}}])}),r("el-table-column",{attrs:{label:"描述",prop:"request_param_description"}})],1)],1),r("p",[r("span",{staticClass:"tit"},[e._v("常量参数")]),r("el-table",{staticStyle:{"margin-left":"40px"},attrs:{size:"mini",data:e.router.constant_params,"header-cell-style":"background:#fafafa"}},[r("el-table-column",{attrs:{label:"参数",prop:"name"}}),r("el-table-column",{attrs:{label:"位置",prop:"position"}}),r("el-table-column",{attrs:{label:"参数值",prop:"value"}}),r("el-table-column",{attrs:{label:"描述",prop:"description"}})],1)],1)]),r("h3",[e._v("响应信息")]),r("div",[r("p",[r("span",{staticClass:"tit"},[e._v("返回类型")]),r("span",{staticClass:"cont"},[e._v(e._s(e.router.response_type))])]),r("p",[r("span",{staticClass:"tit",staticStyle:{"margin-left":"28px","margin-bottom":"12px"}},[e._v("成功响应示例")]),r("el-input",{staticStyle:{"margin-left":"32px",width:"80%"},attrs:{type:"textarea",disabled:""},model:{value:e.router.response_success,callback:function(t){e.$set(e.router,"response_success",t)},expression:"router.response_success"}})],1),r("p",[r("span",{staticClass:"tit",staticStyle:{"margin-left":"28px","margin-bottom":"12px"}},[e._v("失败响应示例")]),r("el-input",{staticStyle:{"margin-left":"32px",width:"80%"},attrs:{type:"textarea",disabled:""},model:{value:e.router.response_failure,callback:function(t){e.$set(e.router,"response_failure",t)},expression:"router.response_failure"}})],1),r("p",[r("span",{staticClass:"tit",staticStyle:{"margin-bottom":"12px"}},[e._v("错误码配置")]),r("el-table",{staticStyle:{"margin-left":"40px"},attrs:{size:"mini",data:e.router.response_codes,"header-cell-style":"background:#fafafa"}},[r("el-table-column",{attrs:{label:"错误码",prop:"code"}}),r("el-table-column",{attrs:{label:"错误信息",prop:"message"}}),r("el-table-column",{attrs:{label:"描述",prop:"descriptio"}})],1)],1)])])])},f=[],g={props:{routerId:{type:Number,default:0},size:{type:String,default:"60%"},direction:{type:String,default:"rtl"},open:{type:Boolean,default:!1},withHeader:{type:Boolean,default:!1},title:{type:String,default:"路由详情"}},data:function(){return{router:{}}},computed:{open_:{get:function(){return this.open},set:function(e){this.$emit("changeDetailRouter",e)}}},watch:{open:function(e){e&&(this.routerId?this.getRouter():this.cancelDetail())}},methods:{cancelDetail:function(){this.open_=!1},getRouter:function(){var e=this;this.routerId>0&&this.$oakRequest.get(this.$oakBackendApis.router.query(this.routerId)).then((function(t){if(200===t.status){var r=t.data.router;Object.keys(r).length>0?e.router=r:e.router={}}}))}}},h=g,v=(r("859d"),Object(u["a"])(h,m,f,!1,null,"e48ec570",null)),b=v.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-drawer",{staticClass:"router-plugin-drawer",attrs:{visible:e.open_,direction:e.direction,"with-header":e.withHeader,size:e.size,routerId:e.routerId},on:{"update:visible":function(t){e.open_=t}}},[r("p",{staticClass:"drawer-title"},[r("span",{domProps:{innerHTML:e._s(e.title)}}),r("i",{staticClass:"el-icon-close fr",on:{click:e.cancelPlugin}})]),r("el-button",{staticClass:"fr",staticStyle:{"margin-right":"32px"},attrs:{type:"primary",size:"small"},on:{click:e.openCreatedPlugin}},[e._v("添加 ")]),e.pluginSaveOpen?r("div",{staticStyle:{background:"#fafafa",padding:"12px"}},[r("h3",{staticStyle:{"font-size":"16px","font-weight":"bold","margin-bottom":"20px","margin-left":"12px"}},[e._v(e._s(e.pluginSaveTitle))]),r("div",{staticStyle:{"text-align":"center"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.pluginSaveRadio,callback:function(t){e.pluginSaveRadio=t},expression:"pluginSaveRadio"}},[r("el-radio-button",{attrs:{label:"BASIS"}},[e._v("插件信息")]),r("el-radio-button",{attrs:{label:"CONFIG"}},[e._v("插件配置")])],1)],1),r("div",{staticStyle:{margin:"20px"}},[r("el-form",{ref:"pluginForms",attrs:{"label-width":"160px",model:e.pluginForms,size:"small",rules:e.pluginRules,"label-position":e.pluginSaveRadio}},[r("input",{attrs:{type:"hidden",name:""}}),r("el-input",{attrs:{type:"hidden"},model:{value:e.pluginForms.id,callback:function(t){e.$set(e.pluginForms,"id",t)},expression:"pluginForms.id"}}),"BASIS"===e.pluginSaveRadio?r("div",[r("el-form-item",{attrs:{label:"选择插件",prop:"name"}},[r("el-select",{staticStyle:{width:"265px"},attrs:{placeholder:"选择插件",disabled:"UPDATED"===e.pluginSaveAction,filterable:""},on:{change:e.changeCreatedPlugin},model:{value:e.pluginForms.name,callback:function(t){e.$set(e.pluginForms,"name",t)},expression:"pluginForms.name"}},e._l(e.systemPlugins,(function(t){return r("el-option",{attrs:{label:t.name,value:t.name}},[r("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.type))])])})),1)],1),r("el-form-item",{attrs:{label:"插件类型",prop:"type"}},[r("el-input",{attrs:{disabled:""},model:{value:e.pluginForms.type,callback:function(t){e.$set(e.pluginForms,"type",t)},expression:"pluginForms.type"}})],1),r("el-form-item",{attrs:{label:"插件描述",prop:"description"}},[r("el-input",{attrs:{disabled:""},model:{value:e.pluginForms.description,callback:function(t){e.$set(e.pluginForms,"description",t)},expression:"pluginForms.description"}})],1)],1):e._e(),"CONFIG"===e.pluginSaveRadio?r("div",e._l(e.pluginForms.config,(function(t,s){return r("el-form-item",{attrs:{label:s,prop:"config."+s+".value",rules:t.validateRules}},["array"===t.type?r("el-select",{attrs:{placeholder:"选择配置"},model:{value:e.pluginForms.config[s].value,callback:function(t){e.$set(e.pluginForms.config[s],"value",t)},expression:"pluginForms.config[configOptionName].value"}},e._l(t.options,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1):e._e(),"number"===t.type||"integer"===t.type?r("el-input",{model:{value:e.pluginForms.config[s].value,callback:function(t){e.$set(e.pluginForms.config[s],"value",e._n(t))},expression:"pluginForms.config[configOptionName].value"}}):e._e(),"string"===t.type?r("el-input",{model:{value:e.pluginForms.config[s].value,callback:function(t){e.$set(e.pluginForms.config[s],"value",t)},expression:"pluginForms.config[configOptionName].value"}}):e._e()],1)})),1):e._e()],1)],1),r("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[r("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(t){return e.executeSaveRouterPlugin("pluginForms")}}},[e._v("提交 ")]),r("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){return e.cancelSaveRouterPlugin("pluginForms")}}},[e._v("取消")])],1)]):e._e(),r("div",{staticStyle:{padding:"0 32px","margin-top":"24px"}},[r("el-table",{attrs:{data:e.routerPlugins}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",size:"small"}},e._l(t.row.config,(function(t,s){return r("el-form-item",{attrs:{label:s}},[r("span",[e._v(e._s(t))])])})),1)]}}])}),r("el-table-column",{attrs:{label:"插件名称",prop:"name",width:"120px"}}),r("el-table-column",{attrs:{label:"描述",prop:"description"}}),r("el-table-column",{attrs:{label:"操作",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.openUpdatedPlugin(t.row)}}},[e._v("编辑 ")]),r("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",iconColor:"red",title:"确定删除该插件吗？"},on:{onConfirm:function(r){return e.executeRemoveRouterPlugin(t.row,"pluginForms")}}},[r("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1)],1)},_=[],x=(r("4fad"),r("3835")),j={props:{routerId:{type:Number,default:0},size:{type:String,default:"50%"},direction:{type:String,default:"rtl"},open:{type:Boolean,default:!1},withHeader:{type:Boolean,default:!1},title:{type:String,default:"路由插件"}},data:function(){return{pluginSaveOpen:!1,pluginSaveTitle:"",pluginSaveRadio:"BASIS",pluginSaveAction:"",routerPlugins:[],systemPlugins:[],pluginUpdatedOpen:!1,pluginConfigs:{},pluginForms:{id:0,name:"",type:"",description:"",config:{}},pluginRules:{name:[{required:!0,trigger:"change",message:"插件名称不合法"}],type:[{required:!0,trigger:"change",message:"插件类型不合法"}],description:[{required:!0,trigger:"change",message:"插件描述不合法"}]}}},watch:{open:function(e){e&&(this.routerId>0?this.updatedRouterAndSystemPlugins():this.cancelPlugin())},pluginSaveRadio:function(e){this.$refs["pluginForms"]&&this.$refs["pluginForms"].clearValidate()}},computed:{open_:{get:function(){return this.open},set:function(e){this.routerPlugins=[],this.systemPlugins=[],this.pluginSaveOpen=!1,this.$emit("changePluginRouter",e)}}},methods:{cancelPlugin:function(){this.open_=!1},getSystemPlugins:function(){var e=this;this.$oakRequest.get(this.$oakBackendApis.common.plugins).then((function(t){if(200===t.status){var r=t.data.plugins;Object.keys(r).length>0?e.systemPlugins=r:e.systemPlugins=[]}}))},getRouterPlugins:function(){var e=this;this.$oakRequest.get(this.$oakBackendApis.router.plugins(this.routerId)).then((function(t){if(200===t.status){var r=t.data.plugins;Object.keys(r).length>0?e.routerPlugins=r:e.routerPlugins=[]}}))},cancelSaveRouterPlugin:function(e){this.updatedRouterAndSystemPlugins(),this.$refs[e].resetFields(),this.pluginSaveOpen=!1},executeSaveRouterPlugin:function(e){var t=this;this.$refs[e].validate((function(r){if(!r)return!1;for(var s=JSON.parse(JSON.stringify(t.pluginForms)),n=0,a=Object.entries(s.config);n<a.length;n++){var o=Object(x["a"])(a[n],2),i=o[0],l=o[1];s.config[i]=l.value}"UPDATED"===t.pluginSaveAction&&t.$oakRequest.put(t.$oakBackendApis.router.updatedPlugin(t.routerId,s.id),s).then((function(r){200===r.status&&(t.$message({type:"success",message:"编辑插件成功"}),t.cancelSaveRouterPlugin(e))})),"CREATED"===t.pluginSaveAction&&t.$oakRequest.post(t.$oakBackendApis.router.createdPlugin(t.routerId),s).then((function(r){200===r.status&&(t.$message({type:"success",message:"添加插件成功"}),t.cancelSaveRouterPlugin(e))}))}))},executeRemoveRouterPlugin:function(e,t){var r=this;this.$oakRequest.delete(this.$oakBackendApis.router.deletedPlugin(this.routerId,e.id)).then((function(e){200===e.status&&r.$message({type:"success",message:"删除插件成功"}),r.cancelSaveRouterPlugin(t)}))},createdAutoValidateAndData:function(e){this.pluginForms.id=e.id||0,this.pluginForms.name=e.name,this.pluginForms.type=e.type,this.pluginForms.description=e.description,this.pluginForms.config={};for(var t=0,r=Object.entries(e.config);t<r.length;t++){var s=Object(x["a"])(r[t],2),n=s[0],a=s[1],o={};o.value=a.default,o.type=a.type,o.options=a.options,o.validateRules=[];var i={required:!0,trigger:"change",type:a.type,min:a.minLength||a.minimum,max:a.maxLength||a.maximum};"string"===i.type&&(i.message="".concat(n," 不合法，配置长度为（").concat(i.min," - ").concat(i.max,"）")),"number"!==i.type&&"integer"!==i.type||(i.message="".concat(n," 不合法，取值范围为（").concat(i.min," - ").concat(i.max,"）")),o.validateRules.push(i),this.$set(this.pluginForms.config,n,o)}},openUpdatedPlugin:function(e){var t=this.systemPlugins.filter((function(t){return t.name===e.name}));if(t.length>0){var r=t[0];r.id=e.id;for(var s=0,n=Object.entries(r.config);s<n.length;s++){var a=Object(x["a"])(n[s],1),o=a[0];r.config[o].default=e.config[o]}this.createdAutoValidateAndData(r),this.pluginSaveAction="UPDATED",this.pluginSaveRadio="CONFIG",this.pluginSaveOpen=!0,this.pluginSaveTitle="编辑插件【".concat(r.name,"】")}},openCreatedPlugin:function(){var e=[];this.routerPlugins.forEach((function(t){e.push(t.name)})),this.systemPlugins=this.systemPlugins.filter((function(t){return!1===e.includes(t.name)}));var t=this.systemPlugins[0];this.createdAutoValidateAndData(t),this.pluginSaveAction="CREATED",this.pluginSaveRadio="BASIS",this.pluginSaveOpen=!0,this.pluginSaveTitle="新增插件【".concat(t.name,"】")},changeCreatedPlugin:function(e){var t=this.systemPlugins.filter((function(t){return t.name===e}));t.length>0&&this.createdAutoValidateAndData(t[0])},updatedRouterAndSystemPlugins:function(){this.getRouterPlugins(),this.getSystemPlugins()}}},P=j,S=(r("e48f"),Object(u["a"])(P,y,_,!1,null,"2fed5e4c",null)),k=S.exports,C={components:{RouterDetail:b,RouterPlugin:k,RouterCreated:d,RouterUpdated:d},data:function(){return{optionDetailRouterOpen:!1,optionDetailRouterId:0,optionPluginRouterOpen:!1,optionPluginRouterId:0,optionUpdatedRouterOpen:!1,optionUpdatedRouterId:0,optionCreatedRouterOpen:!1,optionCreatedRouterId:0,optionCreatedRouterProjectId:0,selectedProjectId:0,routerQueryData:{name:""},routerLists:[],routerCount:0,routerTableLists:[],projectLists:[],pageNum:1,pageSize:10,pageSizes:[10,15,20]}},created:function(){this.getProjects(),this.selectedProjectId=this.$route.params.projectId||0,this.getRouters()},watch:{selectedProjectId:function(){this.getRouters()}},methods:{queryRouterByName:function(){var e=this.routerQueryData.name.trim();e?(this.routerLists=this.routerLists.filter((function(t){return t.name.includes(e)})),this.initTable()):this.getRouters()},changePageSize:function(e){this.pageSize=e,this.initTable()},changePageNumber:function(e){this.pageNum=e,this.initTable()},initTable:function(){this.routerTableLists=[],this.pageNum=this.pageNum>1?this.pageNum:1;var e=(this.pageNum-1)*this.pageSize,t=e+this.pageSize;t>this.routerCount&&(t=this.routerCount);for(var r=e;r<t;r++)this.routerLists[r]&&this.routerTableLists.push(this.routerLists[r])},getRouters:function(){var e=this,t=this.$oakBackendApis.common.routers;this.selectedProjectId>0&&(t=this.$oakBackendApis.project.routers(this.selectedProjectId)),this.$oakRequest.get(t).then((function(t){if(200===t.status){var r=t.data.routers,s=Object.keys(r).length;s>0?(r.forEach((function(e){e.is_del=!1})),e.routerLists=r,e.routerCount=s,e.pageNum=1,e.initTable()):(e.routerLists=[],e.routerCount=0,e.pageNum=1,e.initTable())}}))},executePushRouter:function(e,t){var r=this,s=e.id;this.$oakRequest.post(this.$oakBackendApis.router.push(s,t)).then((function(e){200===e.status&&(r.$message({type:"success",message:"".concat(t," 环境发布成功")}),r.getRouters())}))},executePullRouter:function(e,t){var r=this,s=e.id;this.$oakRequest.delete(this.$oakBackendApis.router.pull(s,t)).then((function(e){200===e.status&&(r.$message({type:"success",message:"".concat(t," 环境下线成功")}),r.getRouters())}))},executeCopyRoutePath:function(e,t){var r="curl";r=r.concat(" -X "+e.request_method),"TEST"===t&&(r=r.concat(" -H 'APIOAK-API-ENV: TEST'")),"BETA"===t&&(r=r.concat(" -H 'APIOAK-API-ENV: BETA'"));var s=window.location.origin+e.project_path+e.request_path;r=r.concat(" '"+s+"'");var n=document.createElement("input");n.value=r,document.body.appendChild(n),n.select(),document.execCommand("Copy"),this.$message({message:"复制成功",type:"success"}),n.remove()},removeRouter:function(e){var t=this,r=e.id;this.$oakRequest.delete(this.$oakBackendApis.router.deleted(r)).then((function(e){200===e.status&&(t.$message({type:"success",message:"删除API成功"}),t.getRouters())}))},getProjects:function(){var e=this;this.$oakRequest.get(this.$oakBackendApis.common.projects).then((function(t){if(200===t.status){var r=t.data.projects;Object.keys(r).length>0&&(e.projectLists=r)}}))},openDetailRouter:function(e){this.optionDetailRouterOpen=!0,this.optionDetailRouterId=e.id},changeDetailRouter:function(e){this.optionDetailRouterOpen=!1,this.optionDetailRouterId=0},openPluginRouter:function(e){this.optionPluginRouterOpen=!0,this.optionPluginRouterId=e.id},changePluginRouter:function(e){this.optionPluginRouterOpen=!1,this.optionPluginRouterId=0},openUpdatedRouter:function(e){this.optionUpdatedRouterOpen=!0,this.optionUpdatedRouterId=e.id},changeUpdatedRouter:function(e){this.optionUpdatedRouterOpen=!1,this.optionUpdatedRouterId=0},openCreatedRouter:function(){this.optionCreatedRouterOpen=!0,this.optionCreatedRouterId=0,this.optionCreatedRouterProjectId=this.selectedProjectId},changeCreatedRouter:function(e){this.optionCreatedRouterOpen=!1,this.optionCreatedRouterId=0,this.optionCreatedRouterProjectId=0,this.getRouters()}}},w=C,F=(r("c775"),r("93ba"),Object(u["a"])(w,s,n,!1,null,"c207ed80",null));t["default"]=F.exports},ddb0:function(e,t,r){var s=r("da84"),n=r("fdbc"),a=r("e260"),o=r("9112"),i=r("b622"),l=i("iterator"),c=i("toStringTag"),u=a.values;for(var p in n){var d=s[p],m=d&&d.prototype;if(m){if(m[l]!==u)try{o(m,l,u)}catch(g){m[l]=u}if(m[c]||o(m,c,p),n[p])for(var f in a)if(m[f]!==a[f])try{o(m,f,a[f])}catch(g){m[f]=a[f]}}}},e01a:function(e,t,r){"use strict";var s=r("23e7"),n=r("83ab"),a=r("da84"),o=r("5135"),i=r("861d"),l=r("9bf2").f,c=r("e893"),u=a.Symbol;if(n&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var p={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new u(e):void 0===e?u():u(e);return""===e&&(p[t]=!0),t};c(d,u);var m=d.prototype=u.prototype;m.constructor=d;var f=m.toString,g="Symbol(test)"==String(u("test")),h=/^Symbol\((.*)\)[^)]+$/;l(m,"description",{configurable:!0,get:function(){var e=i(this)?this.valueOf():this,t=f.call(e);if(o(p,e))return"";var r=g?t.slice(7,-1):t.replace(h,"$1");return""===r?void 0:r}}),s({global:!0,forced:!0},{Symbol:d})}},e0d3:function(e,t,r){"use strict";var s=r("e7f7"),n=r.n(s);n.a},e382:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"service"},[s("div",{staticClass:"service-list"},[s("div",{staticClass:"service-title"},[s("el-button",{staticClass:"service-add fl",staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.openCreatedUser}},[e._v(" 新建用户 ")]),s("el-form",{staticClass:"user-form-inline",attrs:{inline:!0,model:e.userQueryData}},[s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{placeholder:"输入邮箱"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.executeQueryUserByEmail(t)}},model:{value:e.userQueryData.email,callback:function(t){e.$set(e.userQueryData,"email",t)},expression:"userQueryData.email"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.executeQueryUserByEmail}},[e._v("查询")])],1)],1)],1),e.userCount>0?s("div",{staticClass:"app-content"},[s("el-table",{staticClass:"service-table",attrs:{data:e.userTableLists}},[s("el-table-column",{attrs:{label:"用户ID",prop:"id",width:"100px"}}),s("el-table-column",{attrs:{label:"用户名",prop:"name"}}),s("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),s("el-table-column",{attrs:{label:"启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0,disabled:e.loginUID===t.row.id},on:{change:function(r){return e.executeUpdatedUserStatus(t.row)}},model:{value:t.row.is_enable,callback:function(r){e.$set(t.row,"is_enable",r)},expression:"user.row.is_enable"}})]}}],null,!1,3563530201)}),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{staticStyle:{"margin-right":"12px"},attrs:{type:"primary",size:"small"},on:{click:function(r){return e.openPasswordUser(t.row)}}},[e._v("修改密码 ")]),s("el-popconfirm",{staticStyle:{"margin-right":"10px"},attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",iconColor:"red",title:"确定删除该项目吗？"},on:{onConfirm:function(r){return e.executeRemoveUser(t.row)}}},[s("el-button",{attrs:{slot:"reference",type:"danger",size:"small",disabled:e.loginUID===t.row.id},slot:"reference"},[e._v("删除 ")])],1)]}}],null,!1,1678151422)})],1),s("div",{staticClass:"main-pagination-box"},[s("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.userCount},on:{"size-change":e.changePageSize,"current-change":e.changePageNumber}})],1)],1):s("div",{staticClass:"empty-content"},[s("img",{staticClass:"empty-background",attrs:{src:r("8422")}})]),s("user-created",{attrs:{userId:e.optionCreatedUserId,open:e.optionCreatedUserOpen},on:{changeCreatedUser:e.changeCreatedUser}}),s("user-password",{attrs:{userId:e.optionPasswordUserId,open:e.optionPasswordUserOpen},on:{changePasswordUser:e.changePasswordUser}})],1)])},n=[],a=(r("4de4"),r("caad"),r("b64b"),r("2532"),r("498a"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-drawer",{staticClass:"service-drawer",attrs:{visible:e.open_,direction:e.direction,"with-header":e.withHeader,size:e.size,userId:e.userId},on:{"update:visible":function(t){e.open_=t}}},[r("p",{staticClass:"service-drawer_tit"},[r("span",{domProps:{innerHTML:e._s(e.title)}}),r("i",{staticClass:"el-icon-close fr",on:{click:e.cancelSaveUser}})]),r("el-form",{ref:"userForms",staticClass:"service-form",attrs:{rules:e.userRules,model:e.userForms,"label-width":"80px","lable-position":"left"}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{attrs:{placeholder:"输入用户名"},model:{value:e.userForms.name,callback:function(t){e.$set(e.userForms,"name",t)},expression:"userForms.name"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"输入邮箱"},model:{value:e.userForms.email,callback:function(t){e.$set(e.userForms,"email",t)},expression:"userForms.email"}})],1),r("el-form-item",{attrs:{label:"启用",prop:"is_enable"}},[r("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:e.userForms.is_enable,callback:function(t){e.$set(e.userForms,"is_enable",t)},expression:"userForms.is_enable"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"输入密码，长度限制（6 - 16）",type:"password","show-password":""},model:{value:e.userForms.password,callback:function(t){e.$set(e.userForms,"password",t)},expression:"userForms.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"valid_password"}},[r("el-input",{attrs:{placeholder:"再次确认密码",type:"password","show-password":""},model:{value:e.userForms.valid_password,callback:function(t){e.$set(e.userForms,"valid_password",t)},expression:"userForms.valid_password"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.executeSaveUser("userForms")}}},[e._v("保存")]),r("el-button",{on:{click:e.cancelSaveUser}},[e._v("取消")])],1)],1)],1)}),o=[],i=(r("a9e3"),{props:{userId:{type:Number,default:0},size:{type:String,default:"50%"},direction:{type:String,default:"rtl"},open:{type:Boolean,default:!1},withHeader:{type:Boolean,default:!1}},computed:{open_:{get:function(){return this.open},set:function(e){"CREATED"===this.userOperateAction&&this.$emit("changeCreatedUser",e),"UPDATED"===this.userOperateAction&&this.$emit("changeUpdatedUser",e),this.userForms={},this.$refs["userForms"].resetFields()}}},watch:{open:function(e){e&&(this.userId>0?(this.title="编辑用户",this.userOperateAction="UPDATED"):(this.title="新增用户",this.userOperateAction="CREATED",this.getUser()))}},methods:{getUser:function(){},executeSaveUser:function(e){var t=this;this.$refs[e].validate((function(e){return!!e&&(t.userOperateAction,"CREATED"===t.userOperateAction&&t.$oakRequest.post(t.$oakBackendApis.user.created,t.userForms).then((function(e){if(200===e.status)return t.$message({type:"success",message:"新增用户成功"}),t.cancelSaveUser(),!0})),!1)}))},cancelSaveUser:function(){this.open_=!1}},data:function(){var e=this;return{title:"",userOperateAction:"",userForms:{id:0,name:"",email:"",is_enable:1,password:"",valid_password:""},userRules:{id:[{type:"number",min:0}],name:[{required:!0,message:"昵称长度限制（4 - 16）",min:4,max:16,type:"string",trigger:"change"}],email:[{required:!0,trigger:"change",validator:function(e,t,r){if(0===t.length)return r(new Error("输入登录邮箱"));var s=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;return s.test(t)?r():r(new Error("邮箱格式不合法"))}}],password:[{required:!0,message:"密码长度限制（6 - 16）",min:6,max:16,type:"string",trigger:"change"}],valid_password:[{required:!0,trigger:"change",validator:function(t,r,s){return 0===r.length?s(new Error("输入确认密码")):e.userForms.password!==r?s(new Error("密码输入不一致")):s()}}]}}}}),l=i,c=(r("545c"),r("2877")),u=Object(c["a"])(l,a,o,!1,null,"3942bf10",null),p=u.exports,d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-drawer",{staticClass:"service-drawer",attrs:{visible:e.open_,direction:e.direction,"with-header":e.withHeader,size:e.size,userId:e.userId},on:{"update:visible":function(t){e.open_=t}}},[r("p",{staticClass:"service-drawer_tit"},[r("span",{domProps:{innerHTML:e._s(e.title)}}),r("i",{staticClass:"el-icon-close fr",on:{click:e.cancelSavePassword}})]),r("el-form",{ref:"passwordForms",staticClass:"service-form",attrs:{rules:e.passwordRules,model:e.passwordForms,"label-width":"80px","lable-position":"left"}},[r("el-form-item",{attrs:{label:"新密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"输入密码，长度限制（6 - 16）",type:"password","show-password":""},model:{value:e.passwordForms.password,callback:function(t){e.$set(e.passwordForms,"password",t)},expression:"passwordForms.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"valid_password"}},[r("el-input",{attrs:{placeholder:"再次确认密码",type:"password","show-password":""},model:{value:e.passwordForms.valid_password,callback:function(t){e.$set(e.passwordForms,"valid_password",t)},expression:"passwordForms.valid_password"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.executeUpdatedPassword("passwordForms")}}},[e._v("保存")]),r("el-button",{on:{click:e.cancelSavePassword}},[e._v("取消")])],1)],1)],1)},m=[],f={props:{userId:{type:Number,default:0},size:{type:String,default:"50%"},direction:{type:String,default:"rtl"},open:{type:Boolean,default:!1},withHeader:{type:Boolean,default:!1}},computed:{open_:{get:function(){return this.open},set:function(e){this.$emit("changePasswordUser",e),this.passwordForms={},this.$refs["passwordForms"].resetFields()}}},watch:{open:function(e){e&&(this.userId>0?this.title="修改密码":this.cancelSavePassword())}},methods:{cancelSavePassword:function(){this.open_=!1},executeUpdatedPassword:function(e){var t=this;this.$refs[e].validate((function(e){return!!e&&(t.$oakRequest.put(t.$oakBackendApis.user.password(t.userId),t.passwordForms).then((function(e){if(200===e.status)return t.$message({type:"success",message:"密码修改成功"}),t.cancelSavePassword(),!0})),!1)}))}},data:function(){var e=this;return{title:"",passwordForms:{password:"",valid_password:""},passwordRules:{id:[{type:"number",min:0}],password:[{required:!0,message:"密码长度限制（6 - 16）",min:6,max:16,type:"string",trigger:"change"}],valid_password:[{required:!0,trigger:"change",validator:function(t,r,s){return 0===r.length?s(new Error("输入确认密码")):e.passwordForms.password!==r?s(new Error("密码输入不一致")):s()}}]}}}},g=f,h=(r("0729"),Object(c["a"])(g,d,m,!1,null,"7aff2c2a",null)),v=h.exports,b={components:{UserCreated:p,UserPassword:v},data:function(){return{optionCreatedUserOpen:!1,optionCreatedUserId:0,optionUpdatedUserOpen:!1,optionUpdatedUserId:0,optionPasswordUserOpen:!1,optionPasswordUserId:0,loginUID:0,userLists:[],userCount:0,userTableLists:[],userQueryData:{email:""},pageNum:1,pageSize:10,pageSizes:[10,15,20]}},created:function(){this.getLoginUID(),this.getUsers()},methods:{openCreatedUser:function(){this.optionCreatedUserOpen=!0,this.optionCreatedUserId=0},changeCreatedUser:function(e){this.optionCreatedUserOpen=!1,this.optionCreatedUserId=0,this.getUsers()},openUpdatedUser:function(e){this.optionUpdatedUserOpen=!0,this.optionUpdatedUserId=e.id},changeUpdatedUser:function(e){this.optionUpdatedUserOpen=!1,this.optionUpdatedUserId=0},openPasswordUser:function(e){this.optionPasswordUserOpen=!0,this.optionPasswordUserId=e.id},changePasswordUser:function(e){this.optionPasswordUserOpen=!1,this.optionPasswordUserId=0},changePageSize:function(e){this.pageSize=e,this.initTable()},changePageNumber:function(e){this.pageNum=e,this.initTable()},initTable:function(){this.userTableLists=[],this.pageNum=this.pageNum>1?this.pageNum:1;var e=(this.pageNum-1)*this.pageSize,t=e+this.pageSize;t>this.userCount&&(t=this.userCount);for(var r=e;r<t;r++)this.userLists[r]&&this.userTableLists.push(this.userLists[r])},executeUpdatedUserStatus:function(e){var t=this,r=e.id||0;0===e.is_enable&&this.$oakRequest.put(this.$oakBackendApis.user.disable(r)).then((function(e){200===e.status&&t.$message({type:"success",message:"账户已禁用"})})),1===e.is_enable&&this.$oakRequest.put(this.$oakBackendApis.user.enable(r)).then((function(e){200===e.status&&t.$message({type:"success",message:"账户已启用"})}))},getUsers:function(){var e=this;this.$oakRequest.get(this.$oakBackendApis.common.users).then((function(t){if(200===t.status){var r=t.data.users,s=Object.keys(r).length;return s>0?(e.userLists=r,e.userCount=s):(e.userLists=[],e.userCount=0),e.pageNum=1,e.initTable(),!0}}))},getLoginUID:function(){var e=this.$cookies.get(this.$oakConst.cookies.APIOAK_ADMIN_ID);e&&(this.loginUID=parseInt(e))},executeQueryUserByEmail:function(){var e=this.userQueryData.email.trim();e?(this.userLists=this.userLists.filter((function(t){return t.email.includes(e)})),this.initTable()):this.getUsers()},executeRemoveUser:function(e){var t=this;this.$oakRequest.delete(this.$oakBackendApis.user.deleted(e.id)).then((function(e){200===e.status&&t.$message({type:"success",message:"删除成功"}),t.getUsers()}))}}},y=b,_=(r("cec7"),r("971f"),Object(c["a"])(y,s,n,!1,null,"75bdc3ce",null));t["default"]=_.exports},e439:function(e,t,r){var s=r("23e7"),n=r("d039"),a=r("fc6a"),o=r("06cf").f,i=r("83ab"),l=n((function(){o(1)})),c=!i||l;s({target:"Object",stat:!0,forced:c,sham:!i},{getOwnPropertyDescriptor:function(e,t){return o(a(e),t)}})},e48f:function(e,t,r){"use strict";var s=r("57e9"),n=r.n(s);n.a},e538:function(e,t,r){var s=r("b622");t.f=s},e7f7:function(e,t,r){},ee42:function(e,t,r){"use strict";var s=r("46ec"),n=r.n(s);n.a},f855:function(e,t,r){}}]);
//# sourceMappingURL=dashboard.a1d073df.js.map