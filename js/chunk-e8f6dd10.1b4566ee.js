(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e8f6dd10"],{"26e9":function(e,t,r){"use strict";var s=r("23e7"),a=r("e8b5"),n=[].reverse,i=[1,2];s({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return a(this)&&(this.length=this.length),n.call(this)}})},"28a0":function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},3022:function(e,t,r){(function(e){var s=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},s=0;s<t.length;s++)r[t[s]]=Object.getOwnPropertyDescriptor(e,t[s]);return r},a=/%[sdj%]/g;t.format=function(e){if(!w(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(l(arguments[r]));return t.join(" ")}r=1;for(var s=arguments,n=s.length,i=String(e).replace(a,(function(e){if("%%"===e)return"%";if(r>=n)return e;switch(e){case"%s":return String(s[r++]);case"%d":return Number(s[r++]);case"%j":try{return JSON.stringify(s[r++])}catch(t){return"[Circular]"}default:return e}})),o=s[r];r<n;o=s[++r])g(o)||!S(o)?i+=" "+o:i+=" "+l(o);return i},t.deprecate=function(r,s){if("undefined"!==typeof e&&!0===e.noDeprecation)return r;if("undefined"===typeof e)return function(){return t.deprecate(r,s).apply(this,arguments)};var a=!1;function n(){if(!a){if(e.throwDeprecation)throw new Error(s);e.traceDeprecation?console.trace(s):console.error(s),a=!0}return r.apply(this,arguments)}return n};var n,i={};function l(e,r){var s={seen:[],stylize:c};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),_(r)?s.showHidden=r:r&&t._extend(s,r),F(s.showHidden)&&(s.showHidden=!1),F(s.depth)&&(s.depth=2),F(s.colors)&&(s.colors=!1),F(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=o),p(s,e,s.depth)}function o(e,t){var r=l.styles[t];return r?"["+l.colors[r][0]+"m"+e+"["+l.colors[r][1]+"m":e}function c(e,t){return e}function u(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}function p(e,r,s){if(e.customInspect&&r&&D(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var a=r.inspect(s,e);return w(a)||(a=p(e,a,s)),a}var n=d(e,r);if(n)return n;var i=Object.keys(r),l=u(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(r)),C(r)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return m(r);if(0===i.length){if(D(r)){var o=r.name?": "+r.name:"";return e.stylize("[Function"+o+"]","special")}if($(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(P(r))return e.stylize(Date.prototype.toString.call(r),"date");if(C(r))return m(r)}var c,_="",g=!1,y=["{","}"];if(b(r)&&(g=!0,y=["[","]"]),D(r)){var x=r.name?": "+r.name:"";_=" [Function"+x+"]"}return $(r)&&(_=" "+RegExp.prototype.toString.call(r)),P(r)&&(_=" "+Date.prototype.toUTCString.call(r)),C(r)&&(_=" "+m(r)),0!==i.length||g&&0!=r.length?s<0?$(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=g?f(e,r,s,l,i):i.map((function(t){return v(e,r,s,l,t,g)})),e.seen.pop(),h(c,_,y)):y[0]+_+y[1]}function d(e,t){if(F(t))return e.stylize("undefined","undefined");if(w(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return x(t)?e.stylize(""+t,"number"):_(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function m(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,s,a){for(var n=[],i=0,l=t.length;i<l;++i)A(t,String(i))?n.push(v(e,t,r,s,String(i),!0)):n.push("");return a.forEach((function(a){a.match(/^\d+$/)||n.push(v(e,t,r,s,a,!0))})),n}function v(e,t,r,s,a,n){var i,l,o;if(o=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]},o.get?l=o.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):o.set&&(l=e.stylize("[Setter]","special")),A(s,a)||(i="["+a+"]"),l||(e.seen.indexOf(o.value)<0?(l=g(r)?p(e,o.value,null):p(e,o.value,r-1),l.indexOf("\n")>-1&&(l=n?l.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+l.split("\n").map((function(e){return"   "+e})).join("\n"))):l=e.stylize("[Circular]","special")),F(i)){if(n&&a.match(/^\d+$/))return l;i=JSON.stringify(""+a),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+l}function h(e,t,r){var s=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return s>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function b(e){return Array.isArray(e)}function _(e){return"boolean"===typeof e}function g(e){return null===e}function y(e){return null==e}function x(e){return"number"===typeof e}function w(e){return"string"===typeof e}function k(e){return"symbol"===typeof e}function F(e){return void 0===e}function $(e){return S(e)&&"[object RegExp]"===E(e)}function S(e){return"object"===typeof e&&null!==e}function P(e){return S(e)&&"[object Date]"===E(e)}function C(e){return S(e)&&("[object Error]"===E(e)||e instanceof Error)}function D(e){return"function"===typeof e}function R(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function E(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(F(n)&&(n=Object({NODE_ENV:"production",BASE_URL:"/"}).NODE_DEBUG||""),r=r.toUpperCase(),!i[r])if(new RegExp("\\b"+r+"\\b","i").test(n)){var s=e.pid;i[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,s,e)}}else i[r]=function(){};return i[r]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=b,t.isBoolean=_,t.isNull=g,t.isNullOrUndefined=y,t.isNumber=x,t.isString=w,t.isSymbol=k,t.isUndefined=F,t.isRegExp=$,t.isObject=S,t.isDate=P,t.isError=C,t.isFunction=D,t.isPrimitive=R,t.isBuffer=r("d60a");var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function q(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),z[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",q(),t.format.apply(t,arguments))},t.inherits=r("28a0"),t._extend=function(e,t){if(!t||!S(t))return e;var r=Object.keys(t),s=r.length;while(s--)e[r[s]]=t[r[s]];return e};var T="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function j(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function L(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],s=0;s<arguments.length;s++)r.push(arguments[s]);var a=r.pop();if("function"!==typeof a)throw new TypeError("The last argument must be of type Function");var n=this,i=function(){return a.apply(n,arguments)};t.apply(this,r).then((function(t){e.nextTick(i,null,t)}),(function(t){e.nextTick(j,t,i)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,s(t)),r}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t=e[T];if("function"!==typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,s=new Promise((function(e,s){t=e,r=s})),a=[],n=0;n<arguments.length;n++)a.push(arguments[n]);a.push((function(e,s){e?r(e):t(s)}));try{e.apply(this,a)}catch(i){r(i)}return s}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,s(e))},t.promisify.custom=T,t.callbackify=L}).call(this,r("4362"))},a094:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"api"},[s("div",{staticClass:"api-list"},[s("el-button",{staticClass:"api-list_btn btn_add",attrs:{type:"primary",size:"small"},on:{click:function(t){e.drawer=!0,e.isEdit=!1}}},[e._v("新建")]),s("el-table",{attrs:{data:e.apiList}},[s("el-table-column",{attrs:{width:"40px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.plugins?s("div",[s("img",{staticStyle:{width:"24px",cursor:"pointer","vertical-align":"middle"},attrs:{src:r("6eed"),alt:"plugin"},on:{click:function(r){return e.showPlugins(t)}}})]):e._e()]}}])}),s("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-link",{attrs:{type:"primary"},on:{click:function(r){return e.showDetail(t)}}},[e._v(e._s(t.row.name))])]}}])}),s("el-table-column",{attrs:{label:"版本",prop:"service_path"}}),s("el-table-column",{attrs:{label:"路径"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("el-tag",{staticStyle:{"margin-right":"6px"},attrs:{type:"success",size:"mini"}},[e._v(e._s(t.row.method))]),e._v(" "+e._s(t.row.path)+" ")],1)]}}])}),s("el-table-column",{attrs:{label:"环境"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.push_env,(function(t,r){return s("div",{key:r},[t?s("p",{staticStyle:{color:"#67C23A"}},[s("i",{staticClass:"dot dot-on"}),e._v(" "+e._s(e.envMap[r])+" ")]):s("p",[s("i",{staticClass:"dot dot-off"}),e._v(" "+e._s(e.envMap[r])+" ")])])}))}}])}),s("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("el-dropdown",[s("span",{staticClass:"el-dropdown-link"},[e._v(" 发布 "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[s("span",{on:{click:function(r){return e.publish(t,"dev","publish")}}},[e._v("开发环境")])]),s("el-dropdown-item",[s("span",{on:{click:function(r){return e.publish(t,"beta","publish")}}},[e._v("预发环境")])]),s("el-dropdown-item",[s("span",{on:{click:function(r){return e.publish(t,"prod","publish")}}},[e._v("生产环境")])])],1)],1),s("el-dropdown",[s("span",{staticClass:"el-dropdown-link",staticStyle:{margin:"0 12px"}},[e._v(" 下线 "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[s("span",{on:{click:function(r){return e.publish(t,"dev","unpublish")}}},[e._v("开发环境")])]),s("el-dropdown-item",[s("span",{on:{click:function(r){return e.publish(t,"beta","unpublish")}}},[e._v("预发环境")])]),s("el-dropdown-item",[s("span",{on:{click:function(r){return e.publish(t,"prod","unpublish")}}},[e._v("生产环境")])])],1)],1),s("el-button",{attrs:{type:"text"},on:{click:function(r){return e.editRouter(t)}}},[e._v("编辑")]),s("el-button",{attrs:{type:"text"},on:{click:function(r){return e.delRouter(t)}}},[e._v("删除")])],1)]}}])})],1)],1),Object.keys(e.detailData).length?s("el-drawer",{staticClass:"api-drawer detail",attrs:{visible:e.showDetailDrawer,direction:e.direction,title:e.title,"with-header":!1,size:"50%"},on:{"update:visible":function(t){e.showDetailDrawer=t}}},[s("p",{staticClass:"api-drawer_tit"},[s("span",{domProps:{innerHTML:e._s(e.title)}}),s("i",{staticClass:"el-icon-close fr",on:{click:function(t){e.showDetailDrawer=!1}}})]),s("div",{staticClass:"part-info api-detail-info"},[s("h3",[e._v("基本信息")]),s("div",{staticClass:"baseinfo"},[s("p",[s("span",{staticClass:"tit"},[e._v("所属服务")]),s("span",{staticClass:"cont"},[e._v(e._s(this.$route.query.name))])]),s("p",[s("span",{staticClass:"tit"},[e._v("API名称")]),s("span",{staticClass:"cont"},[e._v(e._s(e.detailData.name))])]),s("p",[s("span",{staticClass:"tit"},[e._v("备注")]),s("span",{staticClass:"cont"},[e._v(e._s(e.detailData.desc))])])]),s("h3",[e._v("前端信息")]),s("div",{staticClass:"feinfo"},[s("p",[s("span",{staticClass:"tit"},[e._v("请求方法")]),s("span",{staticClass:"cont"},[e._v(e._s(e.detailData.method))]),s("span",{staticClass:"tit"},[e._v("版本")]),s("span",{staticClass:"cont"},[e._v(e._s(e.detailData.service_path.split("/")[2]))])]),s("p",[s("span",{staticClass:"tit"},[e._v("请求路径")]),s("span",{staticClass:"cont"},[e._v(e._s(e.detailData.path))]),s("span",{staticClass:"tit"},[e._v("跨域")]),s("span",{staticClass:"cont"},[e._v(e._s(e.detailData.enable_cors?"是":"否"))])]),s("p",[s("span",{staticClass:"tit"},[e._v("参数配置")]),s("el-table",{staticStyle:{"margin-left":"40px"},attrs:{size:"mini",data:e.detailData.request_params,"header-cell-style":e.rowClass}},[s("el-table-column",{attrs:{label:"参数",prop:"name"}}),s("el-table-column",{attrs:{label:"位置",prop:"position"}}),s("el-table-column",{attrs:{label:"必填"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.require?"是":"否"))]}}],null,!1,1709749628)}),s("el-table-column",{attrs:{label:"类型",prop:"type"}}),s("el-table-column",{attrs:{label:"默认值",prop:"default_val"}}),s("el-table-column",{attrs:{label:"描述",prop:"desc"}})],1)],1)]),s("h3",[e._v("后端信息")]),s("div",{staticClass:"serviceinfo"},[s("p",[s("span",{staticClass:"tit"},[e._v("请求路径")]),s("span",{staticClass:"cont"},[e._v(e._s(e.detailData.service_path))])]),s("p",[s("span",{staticClass:"tit"},[e._v("请求方法")]),s("span",{staticClass:"cont"},[e._v(e._s(e.detailData.service_method))]),s("span",{staticClass:"tit"},[e._v("超时时间")]),s("span",{staticClass:"cont"},[e._v(e._s(e.detailData.timeout))])]),s("p",[s("span",{staticClass:"tit"},[e._v("参数配置")]),s("el-table",{staticStyle:{"margin-left":"40px"},attrs:{size:"mini",data:e.detailData.service_params,"header-cell-style":e.rowClass}},[s("el-table-column",{attrs:{label:"后端参数名",prop:"service_name"}}),s("el-table-column",{attrs:{label:"后端参数位置",prop:"service_position"}}),s("el-table-column",{attrs:{label:"前端参数名"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[e._v(e._s(e.detailData.request_params[t.$index].name))])]}}],null,!1,1185882141)}),s("el-table-column",{attrs:{label:"前端参数位置"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[e._v(e._s(e.detailData.request_params[t.$index].position))])]}}],null,!1,3084925539)}),s("el-table-column",{attrs:{label:"前端参数类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[e._v(e._s(e.detailData.request_params[t.$index].type))])]}}],null,!1,363019458)}),s("el-table-column",{attrs:{label:"描述",prop:"desc"}})],1)],1),s("p",[s("span",{staticClass:"tit"},[e._v("常量参数")]),s("el-table",{staticStyle:{"margin-left":"40px"},attrs:{size:"mini",data:e.detailData.constant_params,"header-cell-style":e.rowClass}},[s("el-table-column",{attrs:{label:"参数",prop:"name"}}),s("el-table-column",{attrs:{label:"位置",prop:"position"}}),s("el-table-column",{attrs:{label:"参数值",prop:"value"}}),s("el-table-column",{attrs:{label:"描述",prop:"desc"}})],1)],1)]),s("h3",[e._v("响应信息")]),s("div",{staticClass:"responseinfo"},[s("p",[s("span",{staticClass:"tit"},[e._v("返回类型")]),s("span",{staticClass:"cont"},[e._v(e._s(e.detailData.response_type))])]),s("p",[s("span",{staticClass:"tit",staticStyle:{"margin-left":"28px","margin-bottom":"12px"}},[e._v("成功响应实例")]),s("el-input",{staticStyle:{"margin-left":"32px",width:"80%"},attrs:{type:"textarea",readonly:""},model:{value:e.detailData.response_success,callback:function(t){e.$set(e.detailData,"response_success",t)},expression:"detailData.response_success"}})],1),s("p",[s("span",{staticClass:"tit",staticStyle:{"margin-left":"28px","margin-bottom":"12px"}},[e._v("失败响应实例")]),s("el-input",{staticStyle:{"margin-left":"32px",width:"80%"},attrs:{type:"textarea",readonly:""},model:{value:e.detailData.response_fail,callback:function(t){e.$set(e.detailData,"response_fail",t)},expression:"detailData.response_fail"}})],1),s("p",[s("span",{staticClass:"tit",staticStyle:{"margin-bottom":"12px"}},[e._v("错误码配置")]),s("el-table",{staticStyle:{"margin-left":"40px"},attrs:{size:"mini",data:e.detailData.response_error_codes,"header-cell-style":e.rowClass}},[s("el-table-column",{attrs:{label:"错误码",prop:"code"}}),s("el-table-column",{attrs:{label:"错误信息",prop:"msg"}}),s("el-table-column",{attrs:{label:"描述",prop:"desc"}})],1)],1)])])]):e._e(),s("el-drawer",{staticClass:"api-drawer",attrs:{title:e.title,visible:e.drawer,direction:e.direction,"with-header":!1,size:"70%"},on:{"update:visible":function(t){e.drawer=t}}},[s("p",{staticClass:"api-drawer_tit"},[s("span",{domProps:{innerHTML:e._s(e.title)}}),s("i",{staticClass:"el-icon-close fr",on:{click:function(t){e.drawer=!1}}})]),s("el-steps",{staticStyle:{"margin-bottom":"24px"},attrs:{active:e.activeStep,"finish-status":"success",simple:""}},[s("el-step",{attrs:{title:"前端配置"}}),s("el-step",{attrs:{title:"后端配置"}}),s("el-step",{attrs:{title:"响应结果"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.activeStep,expression:"activeStep == 0"}],staticClass:"step-fe"},[s("el-form",{ref:"feConfig",attrs:{model:e.feForm,rules:e.feRule,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"API名称",prop:"name"}},[s("el-input",{staticClass:"api-drawer_input",attrs:{type:"text",placeholder:"请输入内容",maxlength:"60","show-word-limit":""},model:{value:e.feForm.name,callback:function(t){e.$set(e.feForm,"name",t)},expression:"feForm.name"}})],1),s("el-form-item",{attrs:{label:"路由",prop:"path"}},[s("el-input",{staticClass:"api-drawer_input",attrs:{type:"text",placeholder:"请输入内容"},model:{value:e.feForm.path,callback:function(t){e.$set(e.feForm,"path",t)},expression:"feForm.path"}}),s("span",{staticStyle:{display:"block","font-size":"12px",color:"#666"}},[e._v("支持“/”、“=/”、“^~/”开头，大小写字母、数字、和$-_.+!*'(),/%等符合URL规则的符号；支持{}内输入变量名")])],1),s("el-form-item",{attrs:{label:"请求方式"}},[s("el-select",{model:{value:e.feForm.method,callback:function(t){e.$set(e.feForm,"method",t)},expression:"feForm.method"}},[s("el-option",{attrs:{label:"GET",value:"GET"}}),s("el-option",{attrs:{label:"POST",value:"POST"}}),s("el-option",{attrs:{label:"PUT",value:"PUT"}}),s("el-option",{attrs:{label:"DELETE",value:"DELETE"}}),s("el-option",{attrs:{label:"HEAD",value:"HEAD"}})],1)],1),s("el-form-item",{attrs:{label:"支持跨域"}},[s("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.feForm.enable_cors,callback:function(t){e.$set(e.feForm,"enable_cors",t)},expression:"feForm.enable_cors"}})],1),s("el-form-item",{attrs:{label:"备注"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请输入备注信息"},model:{value:e.feForm.desc,callback:function(t){e.$set(e.feForm,"desc",t)},expression:"feForm.desc"}})],1),s("el-form-item",{attrs:{label:"参数配置"}},[s("el-table",{attrs:{data:e.feForm.request_params,"empty-text":"暂无参数"}},[s("el-table-column",{attrs:{label:"参数名",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"请输入参数名",size:"small"},model:{value:e.feForm.request_params[t.$index].name,callback:function(r){e.$set(e.feForm.request_params[t.$index],"name",r)},expression:"feForm.request_params[scope.$index].name"}})]}}])}),s("el-table-column",{attrs:{label:"参数位置",prop:"position"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-select",{attrs:{size:"small"},model:{value:e.feForm.request_params[t.$index].position,callback:function(r){e.$set(e.feForm.request_params[t.$index],"position",r)},expression:"feForm.request_params[scope.$index].position"}},[s("el-option",{attrs:{label:"Header",value:"Header"}}),s("el-option",{attrs:{label:"Path",value:"Path"}}),s("el-option",{attrs:{label:"Query",value:"Query"}})],1)]}}])}),s("el-table-column",{attrs:{label:"类型",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-select",{attrs:{size:"small"},model:{value:e.feForm.request_params[t.$index].type,callback:function(r){e.$set(e.feForm.request_params[t.$index],"type",r)},expression:"feForm.request_params[scope.$index].type"}},[s("el-option",{attrs:{label:"string",value:"string"}}),s("el-option",{attrs:{label:"init",value:"init"}}),s("el-option",{attrs:{label:"long",value:"long"}}),s("el-option",{attrs:{label:"float",value:"float"}}),s("el-option",{attrs:{label:"double",value:"double"}}),s("el-option",{attrs:{label:"boolean",value:"boolean"}})],1)]}}])}),s("el-table-column",{attrs:{label:"默认值",prop:"default_val"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"输入默认值",size:"small",disabled:""==e.feForm.request_params[t.$index].name},model:{value:e.feForm.request_params[t.$index].default_val,callback:function(r){e.$set(e.feForm.request_params[t.$index],"default_val",r)},expression:"feForm.request_params[scope.$index].default_val"}})]}}])}),s("el-table-column",{attrs:{label:"必填",prop:"require"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-select",{attrs:{size:"small"},model:{value:e.feForm.request_params[t.$index].require,callback:function(r){e.$set(e.feForm.request_params[t.$index],"require",r)},expression:"feForm.request_params[scope.$index].require"}},[s("el-option",{attrs:{label:"是",value:!0}}),s("el-option",{attrs:{label:"否",value:!1}})],1)]}}])}),s("el-table-column",{attrs:{label:"备注",prop:"desc"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"请输入备注",size:"small"},model:{value:e.feForm.request_params[t.$index].desc,callback:function(r){e.$set(e.feForm.request_params[t.$index],"desc",r)},expression:"feForm.request_params[scope.$index].desc"}})]}}])}),s("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text"},on:{click:function(r){return e.delParams(t,"fe")}}},[e._v("删除")])]}}])})],1),s("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addRequestParams("fe")}}},[e._v("新增参数配置")])],1)],1),s("el-button",{staticStyle:{"margin-left":"32px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.next("feConfig")}}},[e._v("下一步")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.activeStep,expression:"activeStep == 1"}],staticClass:"step-service"},[s("el-form",{ref:"serviceConfig",attrs:{model:e.serviceForm,rules:e.serviceRule,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"后端路径",prop:"service_path"}},[s("el-input",{staticClass:"api-drawer_input",attrs:{placeholder:"请输入内容"},model:{value:e.serviceForm.service_path,callback:function(t){e.$set(e.serviceForm,"service_path",t)},expression:"serviceForm.service_path"}}),s("span",{staticStyle:{display:"block","font-size":"12px",color:"#666"}},[e._v('支持"/"开头，大小写字母、数字、和$-_.+!*\'(),/%等符合URL规则的符号；支持{}内输入变量名前端参数中的"="与“^~”为前端路径精确度匹配符，后端路径不继承')])],1),s("el-form-item",{attrs:{label:"请求方式",prop:"service_method"}},[s("el-select",{model:{value:e.serviceForm.service_method,callback:function(t){e.$set(e.serviceForm,"service_method",t)},expression:"serviceForm.service_method"}},[s("el-option",{attrs:{label:"GET",value:"GET"}}),s("el-option",{attrs:{label:"POST",value:"POST"}}),s("el-option",{attrs:{label:"PUT",value:"PUT"}}),s("el-option",{attrs:{label:"DELETE",value:"DELETE"}}),s("el-option",{attrs:{label:"HEAD",value:"HEAD"}})],1)],1),s("el-form-item",{attrs:{label:"后端超时"}},[s("el-input",{staticStyle:{width:"160px"},attrs:{type:"number"},model:{value:e.serviceForm.timeout,callback:function(t){e.$set(e.serviceForm,"timeout",e._n(t))},expression:"serviceForm.timeout"}},[s("template",{slot:"append"},[e._v("秒")])],2)],1),s("el-form-item",{attrs:{label:"后端参数配置"}},[s("el-table",{attrs:{data:e.serviceForm.service_params,"empty-text":"暂无参数"}},[s("el-table-column",{attrs:{label:"后端参数名",prop:"service_name"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"请输入参数名",size:"small"},model:{value:e.serviceForm.service_params[t.$index].service_name,callback:function(r){e.$set(e.serviceForm.service_params[t.$index],"service_name",r)},expression:"serviceForm.service_params[scope.$index].service_name"}})]}}])}),s("el-table-column",{attrs:{label:"后端参数位置",prop:"service_position"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-select",{attrs:{size:"small"},model:{value:e.serviceForm.service_params[t.$index].service_position,callback:function(r){e.$set(e.serviceForm.service_params[t.$index],"service_position",r)},expression:"serviceForm.service_params[scope.$index].service_position"}},[s("el-option",{attrs:{label:"Header",value:"Header"}}),s("el-option",{attrs:{label:"Path",value:"Path"}}),s("el-option",{attrs:{label:"Query",value:"Query"}})],1)]}}])}),s("el-table-column",{attrs:{label:"前端参数名",prop:"name"}}),s("el-table-column",{attrs:{label:"前端参数位置",prop:"position"}}),s("el-table-column",{attrs:{label:"前端参数类型",prop:"type"}}),s("el-table-column",{attrs:{label:"备注",prop:"desc"}})],1)],1),s("el-form-item",{attrs:{label:"常量参数"}},[s("el-table",{attrs:{data:e.serviceForm.constant_params,"empty-text":"暂无参数"}},[s("el-table-column",{attrs:{label:"参数名",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"请输入参数名",size:"small"},model:{value:e.serviceForm.constant_params[t.$index].name,callback:function(r){e.$set(e.serviceForm.constant_params[t.$index],"name",r)},expression:"serviceForm.constant_params[scope.$index].name"}})]}}])}),s("el-table-column",{attrs:{label:"参数位置",prop:"position"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-select",{attrs:{size:"small"},model:{value:e.serviceForm.constant_params[t.$index].position,callback:function(r){e.$set(e.serviceForm.constant_params[t.$index],"position",r)},expression:"serviceForm.constant_params[scope.$index].position"}},[s("el-option",{attrs:{label:"Header",value:"Header"}}),s("el-option",{attrs:{label:"Path",value:"Path"}}),s("el-option",{attrs:{label:"Query",value:"Query"}})],1)]}}])}),s("el-table-column",{attrs:{label:"参数值",prop:"value"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"请输入参数名",size:"small"},model:{value:e.serviceForm.constant_params[t.$index].value,callback:function(r){e.$set(e.serviceForm.constant_params[t.$index],"value",r)},expression:"serviceForm.constant_params[scope.$index].value"}})]}}])}),s("el-table-column",{attrs:{label:"备注",prop:"desc"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"请输入备注",size:"small"},model:{value:e.serviceForm.constant_params[t.$index].desc,callback:function(r){e.$set(e.serviceForm.constant_params[t.$index],"desc",r)},expression:"serviceForm.constant_params[scope.$index].desc"}})]}}])}),s("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text"},on:{click:function(r){return e.delParams(t,"service")}}},[e._v("删除")])]}}])})],1),s("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addRequestParams("service")}}},[e._v("新增参数配置")])],1)],1),s("el-button",{staticStyle:{"margin-left":"32px"},attrs:{size:"small"},on:{click:function(t){e.activeStep=0}}},[e._v("上一步")]),s("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.next("serviceConfig")}}},[e._v("下一步")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:2==e.activeStep,expression:"activeStep == 2"}],staticClass:"step-result"},[s("el-form",{attrs:{model:e.resultForm,rules:e.resultRule,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"返回类型",prop:"response_type"}},[s("el-select",{model:{value:e.resultForm.response_type,callback:function(t){e.$set(e.resultForm,"response_type",t)},expression:"resultForm.response_type"}},[s("el-option",{attrs:{label:"JSON",value:"JSON"}}),s("el-option",{attrs:{label:"HTML",value:"HTML"}}),s("el-option",{attrs:{label:"TEXT",value:"TEXT"}}),s("el-option",{attrs:{label:"XML",value:"XML"}}),s("el-option",{attrs:{label:"BINARY",value:"BINARY"}})],1)],1),s("el-form-item",{attrs:{label:"成功响应实例",prop:"response_success"}},[e._v(" 显示JSON-SCHEMA "),s("el-switch",{model:{value:e.switchSchema,callback:function(t){e.switchSchema=t},expression:"switchSchema"}}),s("el-input",{attrs:{type:"textarea"},model:{value:e.resultForm.response_success,callback:function(t){e.$set(e.resultForm,"response_success",t)},expression:"resultForm.response_success"}})],1),s("el-form-item",{attrs:{label:"失败响应实例",prop:"response_fail"}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.resultForm.response_fail,callback:function(t){e.$set(e.resultForm,"response_fail",t)},expression:"resultForm.response_fail"}})],1),s("el-form-item",{attrs:{label:"错误码配置"}},[s("el-table",{attrs:{data:e.resultForm.response_error_codes,"empty-text":"暂无参数"}},[s("el-table-column",{attrs:{label:"错误码",prop:"code"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"请输入参数名",size:"small"},model:{value:e.resultForm.response_error_codes[t.$index].code,callback:function(r){e.$set(e.resultForm.response_error_codes[t.$index],"code",e._n(r))},expression:"resultForm.response_error_codes[scope.$index].code"}})]}}])}),s("el-table-column",{attrs:{label:"错误信息",prop:"msg"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"请输入错误信息",size:"small"},model:{value:e.resultForm.response_error_codes[t.$index].msg,callback:function(r){e.$set(e.resultForm.response_error_codes[t.$index],"msg",r)},expression:"resultForm.response_error_codes[scope.$index].msg"}})]}}])}),s("el-table-column",{attrs:{label:"备注",prop:"desc"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"请输入备注",size:"small"},model:{value:e.resultForm.response_error_codes[t.$index].desc,callback:function(r){e.$set(e.resultForm.response_error_codes[t.$index],"desc",r)},expression:"resultForm.response_error_codes[scope.$index].desc"}})]}}])}),s("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text"},on:{click:function(r){return e.delParams(t,"result")}}},[e._v("删除")])]}}])})],1),s("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addRequestParams("result")}}},[e._v("新增参数配置")])],1)],1),s("el-button",{staticStyle:{"margin-left":"32px"},attrs:{size:"small"},on:{click:function(t){e.activeStep=1}}},[e._v("上一步")]),s("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary",size:"small"},on:{click:e.saveApi}},[e._v("完成")])],1)],1),s("el-drawer",{staticClass:"api-drawer",attrs:{title:e.title,visible:e.pluginDrawer,direction:e.direction,"with-header":!1,size:"50%"},on:{"update:visible":function(t){e.pluginDrawer=t}}},[s("p",{staticClass:"api-drawer_tit"},[s("span",{domProps:{innerHTML:e._s(e.title)}}),s("i",{staticClass:"el-icon-close fr",on:{click:function(t){e.pluginDrawer=!1}}})]),e.showAddPlugins?e._e():s("el-button",{staticClass:"fr",staticStyle:{"margin-right":"32px"},attrs:{type:"primary",size:"small"},on:{click:e.addPlugin}},[e._v("添加")]),e.showAddPlugins?s("div",{staticStyle:{background:"#fafafa",padding:"12px"}},[s("h3",{staticStyle:{"font-size":"16px","font-weight":"bold","margin-bottom":"20px","margin-left":"12px"}},[e._v(e._s(e.pluginText))]),s("el-form",{ref:"pluginForm",attrs:{"label-width":"160px",rules:e.pluginRules,size:"small"},model:{value:e.pluginForm,callback:function(t){e.pluginForm=t},expression:"pluginForm"}},e._l(e.pluginParam,(function(t,r){return s("el-form-item",{key:r,attrs:{label:r}},["number"==t.type?s("span",[s("el-input-number",{attrs:{min:t.minimum},model:{value:e.pluginForm.config[r],callback:function(t){e.$set(e.pluginForm.config,r,t)},expression:"pluginForm.config[key]"}})],1):e._e(),"string"==t.type?s("span",[s("el-input",{attrs:{type:"text"},model:{value:e.pluginForm.config[r],callback:function(t){e.$set(e.pluginForm.config,r,t)},expression:"pluginForm.config[key]"}})],1):e._e(),"array"==t.type?s("span",[s("el-select",{model:{value:e.pluginForm.config[r],callback:function(t){e.$set(e.pluginForm.config,r,t)},expression:"pluginForm.config[key]"}},e._l(t.options,(function(e,t){return s("el-option",{key:"op"+t,attrs:{label:e,value:e}})})),1)],1):e._e()])})),1),s("div",{staticStyle:{"margin-left":"160px"}},[s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(t){return e.savePlugin("pluginForm")}}},[e._v("提交")]),s("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){return e.cancelPlugin("pluginForm")}}},[e._v("取消")])],1)],1):e._e(),s("div",{staticStyle:{padding:"0 32px","margin-top":"24px"}},[s("el-table",{attrs:{data:e.curPluginsList}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",size:"small"}},e._l(t.row,(function(t,r){return s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"name"!=r&&"desc"!=r,expression:"pluIndex !='name' && pluIndex != 'desc'"}],key:"apiplugin"+r,attrs:{label:r}},[s("span",[e._v(e._s(t))])])})),1)]}}])}),s("el-table-column",{attrs:{label:"配置名称",prop:"name",width:"120px"}}),s("el-table-column",{attrs:{label:"描述",prop:"desc"}}),s("el-table-column",{attrs:{label:"操作",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(r){return e.editPlugin(t)}}},[e._v("编辑")]),s("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(r){return e.delPlugin(t)}}},[e._v("删除")])]}}])})],1)],1)],1),s("el-dialog",{attrs:{title:"插件列表",visible:e.allPluginList},on:{"update:visible":function(t){e.allPluginList=t}}},[s("el-row",{attrs:{gutter:20}},e._l(e.pluginsList,(function(t,r){return s("el-col",{key:"plu"+r,staticStyle:{"margin-bottom":"20px"},attrs:{span:8}},[s("el-card",{staticClass:"plugin-card",attrs:{shadow:"hover"}},[s("h3",[e._v(e._s(t.name))]),s("p",[e._v(e._s(t.desc))]),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){return e.getPluginParam(t)}}},[e._v("添加")])],1)],1)})),1)],1)],1)},a=[],n=(r("4160"),r("26e9"),r("b0c0"),r("d3b7"),r("ac1f"),r("1276"),r("159b"),r("96cf"),r("365c")),i=r("3022"),l={name:"apiList",data:function(){return{apiList:[],originData:[],detailData:{},direction:"rtl",drawer:!1,showDetailDrawer:!1,title:"添加API",activeStep:0,switchSchema:!1,isEdit:!1,curRouterid:"",envMap:{beta:"预发环境",dev:"开发环境",prod:"生产环境"},feForm:{name:"",path:"",method:"GET",enable_cors:!0,desc:"",request_params:[]},serviceForm:{service_path:"",service_method:"GET",timeout:5,service_params:[],constant_params:[]},resultForm:{response_type:"",response_success:"",response_fail:"",response_error_codes:[]},feRule:{name:[{required:!0,message:"请输入服务名称",trigger:"blur"}],path:[{required:!0,message:"路由不能为空",trigger:"blur"}]},serviceRule:{service_path:[{required:!0,message:"请输入服务名称",trigger:"blur"}]},resultRule:{},pluginDrawer:!1,allPluginList:!1,pluginsList:[],pluginText:"",curPluginsList:[],showAddPlugins:!1,pluginForm:{},pluginParam:{},pluginRules:{conn:[{required:!0,message:"必填",trigger:"blur"}],burst:[{required:!0,message:"必填",trigger:"blur"}],key:[{required:!0,message:"必填",trigger:"blur"}],default_conn_delay:[{required:!0,message:"必填",trigger:"blur"}]}}},created:function(){this.getRoutersList()},methods:{getRoutersList:function(){var e,t,r,s;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return e=this.$route.query.id,a.next=3,regeneratorRuntime.awrap(this.$http.get(n["a"].routersList,{headers:{"APIOAK-SERVICE-ID":e}}));case 3:t=a.sent,r=t.data,s=[],r.nodes.forEach((function(e){e.value&&s.push(e.value)})),this.apiList=s,this.originData=r.nodes;case 9:case"end":return a.stop()}}),null,this)},addRequestParams:function(e){"fe"==e?this.feForm.request_params.push({name:"",position:"Header",type:"string",default_val:"",require:"",desc:""}):"service"==e?this.serviceForm.constant_params.push({value:"apioak",position:"Query",desc:"",name:"gateway"}):this.resultForm.response_error_codes.push({code:"",msg:"",desc:""})},delParams:function(e,t){"fe"==t?this.$delete(this.feForm.request_params,e.$index):"service"==t?this.$delete(this.serviceForm.constant_params,e.$index):this.$delete(this.resultForm.response_error_codes,e.$index)},next:function(e){if(this.activeStep=this.activeStep+1,"feConfig"==e&&this.feForm.request_params.length!=this.serviceForm.service_params.length){var t=[];this.feForm.request_params.forEach((function(e,r){t.push({name:e.name,position:e.position,type:e.type,desc:e.desc,service_name:"",service_position:""})})),this.serviceForm.service_params=t}},saveApi:function(){var e,t,r,s,a;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:if(e=Object.assign(this.feForm,this.serviceForm,this.resultForm),this.isEdit){i.next=10;break}return i.next=4,regeneratorRuntime.awrap(this.$http.post(n["a"].creatRouter,e,{headers:{"APIOAK-SERVICE-ID":this.$route.query.id}}));case 4:t=i.sent,r=t.status,t.data,201==r?this.$message({type:"success",message:"创建成功"}):this.$message({type:"error",message:"保存失败"}),i.next=16;break;case 10:return i.next=12,regeneratorRuntime.awrap(this.$http.put(n["a"].updateRouter(this.curRouterid),e,{headers:{"APIOAK-SERVICE-ID":this.$route.query.id}}));case 12:s=i.sent,a=s.status,s.data,200==a?this.$message({type:"success",message:"更新成功"}):this.$message({type:"error",message:"保存失败"});case 16:return this.drawer=!1,i.next=19,regeneratorRuntime.awrap(this.getRoutersList());case 19:case"end":return i.stop()}}),null,this)},editRouter:function(e){this.drawer=!0,this.isEdit=!0;var t=e.row,r=this.originData[e.$index];this.curRouterid=r["key"].split("/").reverse()[0],this.feForm={name:t.name,path:t.path,method:t.method,enable_cors:t.enable_cors,desc:t.desc,request_params:Object(i["isArray"])(t.request_params)?t.request_params:[]},this.serviceForm={service_path:t.service_path,service_method:t.service_method,timeout:t.timeout,service_params:Object(i["isArray"])(t.service_params)?t.service_params:[],constant_params:Object(i["isArray"])(t.constant_params)?t.constant_params:[]},this.resultForm={response_type:t.response_type,response_success:t.response_success,response_fail:t.response_fail,response_error_codes:Object(i["isArray"])(t.response_error_codes)?t.response_error_codes:[]}},delRouter:function(e){var t,r=this;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:t=this.originData[e.$index]["key"].split("/").reverse()[0],this.$confirm("此操作将永久删除该文件, 是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e,s;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r.$http.delete(n["a"].updateRouter(t),{headers:{"APIOAK-SERVICE-ID":r.$route.query.id}}));case 2:if(e=a.sent,s=e.status,e.data,200!=s){a.next=9;break}return r.$message({type:"success",message:"删除成功"}),a.next=9,regeneratorRuntime.awrap(r.getRoutersList());case 9:case"end":return a.stop()}}))})).catch((function(){}));case 2:case"end":return s.stop()}}),null,this)},publish:function(e,t,r){var s,a,i,l,o;return regeneratorRuntime.async((function(c){while(1)switch(c.prev=c.next){case 0:if(s=this.originData[e.$index]["key"].split("/").reverse()[0],"publish"!=r){c.next=10;break}return c.next=4,regeneratorRuntime.awrap(this.$http.post(n["a"].publishRouter(s,t),{},{headers:{"APIOAK-SERVICE-ID":this.$route.query.id}}));case 4:a=c.sent,i=a.status,a.data,200==i&&this.$message({type:"success",message:"".concat(t,"环境发布成功")}),c.next=16;break;case 10:return c.next=12,regeneratorRuntime.awrap(this.$http.delete(n["a"].publishRouter(s,t),{headers:{"APIOAK-SERVICE-ID":this.$route.query.id}}));case 12:l=c.sent,o=l.status,l.data,200==o&&this.$message({type:"success",message:"".concat(t,"环境下线成功")});case 16:return c.next=18,regeneratorRuntime.awrap(this.getRoutersList());case 18:case"end":return c.stop()}}),null,this)},showDetail:function(e){this.showDetailDrawer=!0;var t=e.row;this.detailData=t,this.title="".concat(t.name,"详情")},showPlugins:function(e){for(var t in this.curPluginsList=[],this.pluginDrawer=!0,this.curRouterid=this.originData[e.$index]["key"].split("/").reverse()[0],e.row.plugins)e.row.plugins[t]["name"]=t,this.curPluginsList.push(e.row.plugins[t]);this.title="".concat(e.row.name," 插件列表")},addPlugin:function(){var e,t,r;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return this.allPluginList=!0,s.next=3,regeneratorRuntime.awrap(this.$http.get(n["a"].pluginList));case 3:e=s.sent,t=e.status,r=e.data,200==t&&(this.pluginsList=r);case 7:case"end":return s.stop()}}),null,this)},getPluginParam:function(e){var t,r;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:for(r in this.pluginForm.key=e.key,this.showAddPlugins=!0,this.pluginText="添加 ".concat(e.key," 插件"),this.allPluginList=!1,this.pluginParam=e.parameter,t={},e.parameter)t[r]=e.parameter[r]["default"],t["desc"]=e.desc;this.$set(this.pluginForm,"config",t),this.$set(this.pluginForm,"key",e.key);case 9:case"end":return s.stop()}}),null,this)},editPlugin:function(e){var t,r,s,a,i,l=this;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return e.row,o.next=3,regeneratorRuntime.awrap(this.$http.get(n["a"].pluginList));case 3:if(t=o.sent,r=t.status,s=t.data,200==r){for(i in this.showAddPlugins=!0,this.pluginText="编辑 ".concat(e.row.name," 插件"),console.log(s),s.forEach((function(t,r){t.key==e.row.name&&(l.pluginParam=t.parameter)})),a={},e.row)"name"!=i&&(a[i]=e.row[i]);this.$set(this.pluginForm,"key",e.row.name),this.$set(this.pluginForm,"config",a)}case 7:case"end":return o.stop()}}),null,this)},cancelPlugin:function(e){this.showAddPlugins=!1},savePlugin:function(e){var t,r,s,a;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.$http.post(n["a"].saveRouterPlugin(this.curRouterid),this.pluginForm,{headers:{"APIOAK-SERVICE-ID":this.$route.query.id}}));case 2:if(t=e.sent,r=t.status,s=t.data,200==r){for(a in this.curPluginsList=[],s.value.plugins)s.value.plugins[a]["name"]=a,this.curPluginsList.push(s.value.plugins[a]);this.showAddPlugins=!1,this.pluginForm={key:"",config:{conn:"",burst:"",key:"",default_conn_delay:"",desc:""}}}case 6:case"end":return e.stop()}}),null,this)},delPlugin:function(e){var t=this;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:this.$confirm("此操作将永久删除, 是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var r,s;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(t.$http.delete(n["a"].delRouterPlugin(t.curRouterid,e.row.name),{headers:{"APIOAK-SERVICE-ID":t.$route.query.id}}));case 2:r=a.sent,s=r.status,r.data,200==s&&(t.$message({type:"success",message:"".concat(e.row.name,"插件删除成功")}),t.$delete(t.curPluginsList,e.$index));case 6:case"end":return a.stop()}}))})).catch((function(){}));case 1:case"end":return r.stop()}}),null,this)},handleClick:function(){console.log(11)},rowClass:function(e){e.row,e.rowIndex;return"background:#fafafa"}}},o=l,c=(r("ac92"),r("bd04"),r("2877")),u=Object(c["a"])(o,s,a,!1,null,"230e18ae",null);t["default"]=u.exports},ac92:function(e,t,r){"use strict";var s=r("adf2"),a=r.n(s);a.a},adf2:function(e,t,r){},bd04:function(e,t,r){"use strict";var s=r("dd96"),a=r.n(s);a.a},d60a:function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},dd96:function(e,t,r){}}]);
//# sourceMappingURL=chunk-e8f6dd10.1b4566ee.js.map